<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>哨兵值和牙膏</title>
    <link rel="stylesheet" href="../dist/style.min.css">
</head>
<body>
<script>
const darkModeMediaQuery = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)")
const darkModeSwitcher = () => {
    const isDarkMode = darkModeMediaQuery.matches
    document.body.classList.toggle("dark" ,  isDarkMode)
    document.body.classList.toggle("light", !isDarkMode)
}
if (darkModeMediaQuery) {
    darkModeMediaQuery.addListener(darkModeSwitcher)
    darkModeSwitcher()
}
</script>
<article>
    <h1><ruby data-notation="The sentinel toothpaste: a useful programming technique for everyday life">哨兵值和牙膏<rp>(</rp>,<rt>The sentinel toothpaste: a useful programming technique for everyday life</rt>,<rp>)</rp></ruby></h1><p>原文链接：<a href="https://dunkels.com/adam/sentinel-toothpaste/" target="_blank">The sentinel toothpaste: a useful programming technique for everyday life</a></p><hr><p>这是我在日常生活中发现的一个非常有用的编程技巧：<a href="https://en.wikipedia.org/wiki/Sentinel_value" target="_blank">哨兵值</a>。我每天使用这个技巧来管理我的牙膏。</p><p>在编程中，哨兵值可以用来判断一个列表的末尾。当你有一个列表，你可以将列表的最后一项元素设为一个特殊值，这样你可以很容易地知道你是否遍历到了列表的末尾：当你遍历到的值是那个特殊值，你就遍历到列表的末尾。</p><p>这是一个使用 Emoji 的可视化表示：</p><div class="table"><table><thead><tr><th>😀</th><th>🥰</th><th>😎</th><th>🤗</th><th>🙄</th><th>😜</th><th>😮‍💨</th><th>🐈</th></tr></thead><tbody></tbody></table></div><p>上面表格中的猫猫不是个笑脸（和其它表情不同），所以我们可以用猫猫表情来表示这个列表的末尾。</p><h2>一个典型用例</h2><p>这个编程技巧的一个典型用例就是（C 语言中）使用字符 <code>\0</code> 结尾的字符串。要计算这种字符串的长度，我们可以遍历字符串直到找到 null 字符，这里的 null 字符就是哨兵值。</p><p>下面是一个值为 <code>String</code> 的字符串，其最后的 <code>\0</code> 字符就是字符串的哨兵值：</p><div class="table"><table><thead><tr><th>S</th><th>t</th><th>r</th><th>i</th><th>n</th><th>g</th><th>\0</th></tr></thead><tbody></tbody></table></div><h2>另一个典型用例</h2><p>另一个典型用例就是链表数据结构中的 <code>null</code> 值指针。如果所有链表节点的数据都不为 <code>null</code>，我们可以使用 <code>null</code> 值指针来表示链表的结束。</p><h2>哨兵值和牙膏</h2><p>我发现这个编程技巧对于日常生活极其有用，比如，用来管理牙膏管。</p><p>当你刷牙的时候发现牙膏用完通常不是件好事。所以当我买牙膏时，我总是买许多，并且总是确保其中一管和其它的（外观）不同，这就是哨兵牙膏。</p><div class="media-container"><img src="https://bhznjns.github.io/static/译文/.哨兵值和牙膏/sentinel-toothpaste.jpg" alt="哨兵牙膏" loading="lazy" tabindex="0"></div><p>这样，当我发现只剩下这管特殊的哨兵牙膏时，我就知道我需要买牙膏了，并且我还有充足的时间。</p><h2>我如何学到这个技巧</h2><p>我第一次知道这个哨兵值技巧是在知名的计算机科学家兼教授 <a href="https://cs.lth.se/lennart-andersson/" target="_blank">Lennart Andersson</a> 的编程课上，这也是我的第一门计算机科学课和编程课。我从他那学到了很多极其有用的编程技巧，这些技巧在我的职业生涯中也发挥了很大的用处。但哨兵值是唯一的一个我发现在计算机编程之外，在生活中也十分有用的技巧。</p><hr><blockquote><p>译者注：后面还有一些作者从 Lennart 教授学到的东西，个人觉得用处不大，就不翻译了，直接贴原文。</p></blockquote><p>Here are a few of the useful things I learned from Lennart:</p><ul><li>How to efficiently write parsers for formal languages, such as mathematical expressions and programming languages.</li><li>How satisfyingly compact functional programming techniques can be, particularly with map, reduce, and filter operations, even in imperative languages.</li><li>That (some) printers weren’t just dumb devices that would print bitmaps, but that they were running a fully-fledged language called PostScript. So you could manually write a piece of code that you could send to the printer, which would run it and generate output – on the paper. What a realization!</li><li>How to avoid comparing floating point values directly with each other – instead, subtract them from each other and check that the difference is small. That is, instead of checking a == b, check abs(a - b) &lt; 0.0001 (or some other small quantity). This is a nifty way to protect against small numerical errors in floating point repressentation.</li><li>The importance of external vs internal repressentation of data structures: we were given a lab assignment to write a small Excel/VisiCalc clone. We were free to do it in any way we wanted, with one exception – we were not allowed to use a two-dimensional array to repressent the contents of the sheet. The purpose was to teach us that the externally visible repressentation (a two-dimensional sheet of cells) was in no way related to the best way to repressent the same data internally, inside our program. This has stuck with me ever since.</li></ul>
    <p><a href="https://bhznjns.github.io/#static/译文/哨兵值和牙膏.md">
        点此查看原文
    </a></p>
</article>
</body>
</html>