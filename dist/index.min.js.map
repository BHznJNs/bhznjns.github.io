{"version":3,"file":"index.min.js","sources":["../src/scripts/fetchResources.js","../src/scripts/importers/highlight.js","../src/scripts/importers/style.js","../build.config.js","../src/scripts/importers/katex.js","../src/utils/eventbus/inst.js","../src/utils/eventbus/index.js","../src/utils/languageSelector.js","../src/scripts/importers/echarts.js","../src/utils/debounce.js","../src/utils/dom/el.js","../src/utils/markdown/utils/getInterval.js","../src/utils/markdown/inline.js","../src/utils/htmlEntityReplace.js","../src/utils/markdown/node.js","../src/utils/markdown/utils/getIndent.js","../src/utils/markdown/resolvers/listResolver.js","../src/utils/markdown/resolvers/quoteResolver.js","../src/utils/markdown/resolvers/tableResolver.js","../src/utils/markdown/resolvers/blockResolvers.js","../src/utils/markdown/index.js","../src/utils/markdown/utils/getLines.js","../src/utils/dom/keydownEvent.js","../src/utils/dom/backToTop.js","../src/scripts/articleRenderer.js","../src/scripts/indexRenderer.js","../src/scripts/pathManager.js","../src/components/paging.js","../src/scripts/mainManager.js","../src/scripts/importers/component.js","../src/index.js"],"sourcesContent":["let controller = null\r\n\r\nexport async function fetchJSON(path) {\r\n    controller && controller.abort()\r\n    controller = new AbortController()\r\n\r\n    return await fetch(path, { signal: controller.signal })\r\n        .then(async res => {\r\n            const json = await res.json()\r\n            controller = null\r\n            return json\r\n        })\r\n        .catch(err => {\r\n            console.log(\"JSON request error: \" + path)\r\n            console.error(err)\r\n            return null\r\n        })\r\n}\r\n\r\nexport async function fetchMD(path) {\r\n    controller && controller.abort()\r\n    controller = new AbortController()\r\n\r\n    return await fetch(path, { signal: controller.signal })\r\n        .then(async res => {\r\n            if (res.status != 200) {\r\n                throw res.status\r\n            }\r\n            const text = await res.text()\r\n            controller = null\r\n            return text\r\n        })\r\n        .catch(err => {\r\n            if (typeof err != \"number\") {\r\n                console.error(err)\r\n                return null\r\n            }\r\n\r\n            switch (err) {\r\n                // render error code in markdown format\r\n                case 404:\r\n                    return \"# 404 Not Found\"\r\n                case 500:\r\n                    return \"# 500 Internal Server Error\"\r\n                case DOMException:\r\n                    console.error(err)\r\n                    break\r\n                default:\r\n                    console.log(\"Markdown request error: \" + path)\r\n                    console.error(err)\r\n                    return \"# Unexpected request error\"\r\n            }\r\n        })\r\n}\r\n","let hljs = null\r\n\r\nexport default async function(languageList=new Set) {\r\n    function importLangDefs() {\r\n        // dynamically import language definitions\r\n        const languageListArr = Array.from(languageList)\r\n        const langDefImporters = languageListArr\r\n            .filter(name => !hljs.getLanguage(name))\r\n            .map(lang => import(`../../libs/highlight-es/languages/${lang.toLowerCase()}.js`))\r\n\r\n        Promise.all(langDefImporters)\r\n            .then(langDefs => langDefs.forEach((defModule, index) => {\r\n                const name = languageListArr[index]\r\n                const def  = defModule.default\r\n                hljs.registerLanguage(name, def)\r\n            }))\r\n            .then(() => hljs.highlightAll())\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n    if (!languageList.size) {\r\n        // no code blocks\r\n        return\r\n    }\r\n    if (hljs) {\r\n        importLangDefs()\r\n        return\r\n    }\r\n\r\n    // import highlight.js itself\r\n    import(\"../../libs/highlight-es/highlight.min.js\")\r\n        .then(module => hljs = module.default)\r\n        .then(importLangDefs)\r\n        .catch(err => console.error(err))\r\n}","export default function(path) {\r\n    const linkEl = document.createElement(\"link\")\r\n    linkEl.rel  = \"stylesheet\"\r\n    linkEl.href = path\r\n    document.head.appendChild(linkEl)\r\n}","export default {\r\n    /**\r\n     * homepage: String\r\n     * the URL that this site deployed, is used to generate the rss.xml file\r\n     * 此站点部署的 URL，用于生成 rss.xml 文件\r\n     */\r\n    homepage: \"https://bhznjns.github.io/markdown-blog/\",\r\n\r\n    /**\r\n     * title: String\r\n     * the title of blog HTML document, will be shown in the tabbar of browser\r\n     * 博客 HTML 文档的标题，会被展示在浏览器的标签栏\r\n     */\r\n    title: \"BHznJNs' Blog\",\r\n\r\n    /**\r\n     * footer: String\r\n     * the footer for this site, can be deleted if you do not need it\r\n     * 站点的脚注，如果你不需要可以删除\r\n     */\r\n    footer: \"::Powered by [MarkdownBlog](https://github.com/BHznJNs/markdown-blog)::\",\r\n\r\n    /**\r\n     * language: String\r\n     * \"zh\" => Simplified Chinese 简体中文\r\n     * \"en\" => English            英文\r\n     */\r\n    language: \"zh\",\r\n\r\n    /**\r\n     * enableFab: Boolean\r\n     * used to enable / disable the FAB buttons\r\n     * 用来启用/禁用浮动操作按钮\r\n     */\r\n    enableFab: true,\r\n    /**\r\n     * fabOrdering: [String]\r\n     * defines the ordering of FAB buttons, if you do need some FAB button, just remove it\r\n     * 定义浮动操作按钮的顺序，如果你不需要某个浮动操作按钮，直接将其移除即可\r\n     */\r\n    fabOrdering: [\r\n        \"catalogSwitcher\",\r\n        \"downsizeText\",\r\n        \"enlargeText\",\r\n        \"backToParent\",\r\n        \"backToTop\",\r\n    ],\r\n\r\n    /**\r\n     * enableCatalog: Boolean\r\n     * used to enable / disable the catalog feature\r\n     * 用来启用/禁用文章目录功能\r\n     */\r\n    enableCatalog: true,\r\n\r\n    /**\r\n     * enableRSS: Boolean\r\n     * used to enable / disable the RSS function, if you do not want add blogs in some directory to the `rss.xml` , just add it into the `rssIgnoreDir`\r\n     * 用来启用/禁用 RSS 发布功能，如果你不想将某些文件夹的内容添加到 `rss.xml` 中，将其添加到 `rssIgnoreDir` 中\r\n     */\r\n    enableRSS: true,\r\n    rssIgnoreDir: [\r\n        // directories in `static`\r\n        \"学习笔记/\"\r\n    ],\r\n\r\n    /**\r\n     * enableNewest: Boolean | Object<value: Boolean, ignoreDir: [String]>\r\n     * used to enable / disable the Newest function, if you do not want add blogs in some directory, just add it into the `newestIgnoreDir`\r\n     * 用来启用/禁用 最新博文 功能，如果你不想将某些文件夹的内容添加到其中，将其添加到 `newestIgnoreDir` 中\r\n     */\r\n    enableNewest: true,\r\n    newestIgnoreDir: [],\r\n\r\n    /**\r\n     * pageCapacity: Number\r\n     * defined the amount of the items in every page\r\n     * 定义每一页展示的博文数\r\n     */\r\n    pageCapacity: 10,\r\n\r\n    /**\r\n     * RSSCapacity: Number\r\n     * defined the amount of the items in `rss.xml`\r\n     * 定义 `rss.xml` 中包含的博文个数\r\n     */\r\n    RSSCapacity: 16,\r\n\r\n    /**\r\n     * previewPort: Number\r\n     * defined the port id for preview server\r\n     * 为预览服务器定义端口\r\n     */\r\n    previewPort: 3000,\r\n\r\n    /**\r\n     * katexOptions: Object\r\n     * options for katex.js rendering, see here: https://katex.org/docs/options\r\n     * katex.js 用于渲染数学公式的配置项，见此：https://katex.org/docs/options\r\n     */\r\n    katexOptions: null,\r\n\r\n    /**\r\n     * echartsOptions: Object\r\n     * the global general config options for echarts.js rendering, see here: https://echarts.apache.org/zh/option.html\r\n     * echarts.js 用于渲染图表的通用配置项，见此：https://echarts.apache.org/zh/option.html\r\n     */\r\n    echartsOptions: {\r\n        tooltip: {\r\n            show: true,\r\n            backgroundColor: \"rgb(255,255,255,.9)\"\r\n        }\r\n    }\r\n}\r\n","import importStyle from \"./style.js\"\r\nimport config from \"../../../build.config.js\"\r\n\r\nlet katex = null\r\nconst { katexOptions } = config\r\n\r\nexport default async function(isContainsFormula) {\r\n    function renderFormula() {\r\n        // render all formula element\r\n        document.querySelectorAll(\".math\")\r\n            .forEach(el => {\r\n                const texString = el.textContent\r\n                try {\r\n                    katex.render(texString, el, katexOptions)\r\n                } catch(e) {\r\n                    if (e instanceof katex.ParseError) {\r\n                        // KaTeX can't parse the expression\r\n                        el.innerHTML = (\"Error in LaTeX '\" + texString + \"': \" + e.message)\r\n                            .replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n                    } else {\r\n                        // other error\r\n                        throw e\r\n                    }\r\n                }\r\n            })\r\n    }\r\n\r\n    if (!isContainsFormula) {\r\n        // no formula\r\n        return\r\n    }\r\n    if (katex) {\r\n        renderFormula()\r\n        return\r\n    }\r\n\r\n    // dynamically import katex style and script \r\n    importStyle(\"./dist/libs/katex/katex.min.css\")\r\n    try {\r\n        const katexModule = await import(\"../../libs/katex/katex.min.js\")\r\n        katex = katexModule.default\r\n        renderFormula()\r\n    } catch(e) {\r\n        console.error(e)\r\n    }\r\n}","import EventBus from \"./index.js\"\r\nconst eventbus = new EventBus()\r\nexport default eventbus\r\n","export default class EventBus {\r\n    // A map used to store events and handlers for events\r\n    events = new Map()\r\n\r\n    /**\r\n     * @name emit\r\n     * @description to trigger the handlers for the given event name\r\n     * @param { String | Symbol } name event name\r\n     * @param { Array<any> }      args use `...` to support multi-arg\r\n     */\r\n    emit(name, ...args) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            targetEvent.forEach((handler) => {\r\n                handler.apply(null, args)\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name on\r\n     * @description to add event listener & register the given event handler\r\n     * @param { String | Symbol } name event name\r\n     * @param { EventHandler } handler given handler to given event\r\n     */\r\n    on(name, handler) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            targetEvent.push(handler)\r\n        } else {\r\n            this.events.set(name, [handler])\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name off\r\n     * @description remove the given handler to the given event\r\n     * @param { String | Symbol } name event name\r\n     * @param { EventHandler } handler given handler to given event\r\n     */\r\n    off(name, handler) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            if (targetEvent.length === 1) {\r\n                this.events.delete(name)\r\n            } else {\r\n                const handlerIndex = targetEvent.indexOf(handler)\r\n                targetEvent.splice(handlerIndex, 1)\r\n            }\r\n        }\r\n    }\r\n}","import config from \"../../build.config.js\"\r\n\r\nconst currentLang = config.language\r\nconst langList = [\"zh\", \"en\"]\r\nfunction languageSelectorCreator(lang) {\r\n    for (const [index, langName] of Object.entries(langList)) {\r\n        if (lang === langName) {\r\n            return (...selections) => selections[index]\r\n        }\r\n    }\r\n    console.warn(\"Unexpected language: \" + lang)\r\n    // default returns English text\r\n    return (...selections) => selections[1]\r\n}\r\nconst languageSelector = languageSelectorCreator(currentLang)\r\nexport default languageSelector\r\n","import debounce from \"../../utils/debounce.js\"\r\nimport eventbus from \"../../utils/eventbus/inst.js\"\r\nimport languageSelector from \"../../utils/languageSelector.js\"\r\nimport config from \"../../../build.config.js\"\r\n\r\nconst globalOptions = config.echartsOptions\r\n\r\nlet echarts = null\r\nlet importChart = null\r\nlet importComponent = null\r\n\r\nconst chartElList = () => document.querySelectorAll(\".chart\")\r\n\r\nconst darkmodeObserver = new MutationObserver(_ => {\r\n    for (const el of chartElList()) {\r\n        // rerender all chart elements to reset color theme\r\n        echarts.dispose(el)\r\n        chartRenderer(el)\r\n    }\r\n})\r\n\r\nconst resizeEvent = () => chartElList()\r\n    .forEach(el => echarts.getInstanceByDom(el).resize())\r\n\r\nfunction chartRenderer(el) {\r\n    const isDarkMode = document.body.classList.contains(\"dark\")\r\n    const renderMode = isDarkMode ? \"dark\" : \"light\"\r\n    const chartInst = echarts.init(el, renderMode)\r\n\r\n    // options merging\r\n    const currentOptions = el.__ChartOptions__\r\n    const globalOptionsCloned = Object.assign({}, globalOptions)\r\n    const finalOptions = Object.assign(globalOptionsCloned, currentOptions)\r\n    chartInst.setOption(finalOptions)\r\n}\r\n\r\nfunction chartOptionResolver(options={}, libsToImport) {\r\n    const ignoredProps = [\r\n        \"color\",\r\n        \"backgroundColor\",\r\n        \"darkMode\",\r\n        \"textStyle\",\r\n        \"aria\",\r\n        \"axisPointer\",\r\n        \"animation\",\r\n        \"animationThreshold\",\r\n        \"animationDuration\",\r\n        \"animationEasing\",\r\n        \"animationDelay\",\r\n        \"animationDurationUpdate\",\r\n        \"animationEasingUpdate\",\r\n        \"animationDelayUpdate\",\r\n        \"stateAnimation\",\r\n        \"blendMode\",\r\n        \"hoverLayerThreshold\",\r\n        \"options\",\r\n        \"useUTC\",\r\n        \"media\",\r\n    ]\r\n\r\n    for (const key in options) {\r\n        if (ignoredProps.includes(key)) {\r\n            continue\r\n        }\r\n        if (key === \"series\") {\r\n            for (const item of options.series) {\r\n                if (!(\"type\" in item)) {\r\n                    continue\r\n                }\r\n                libsToImport.charts.add(item.type)\r\n            }\r\n            continue\r\n        }\r\n\r\n        switch (key) {\r\n            case \"xAxis\":\r\n            case \"yAxis\":\r\n                libsToImport.components.add(\"grid\")\r\n                continue\r\n            case \"radiusAxis\":\r\n            case \"angleAxis\":\r\n                libsToImport.components.add(\"polar\")\r\n                continue\r\n            case \"parallelAxis\":\r\n                libsToImport.components.add(\"parallel\")\r\n                continue\r\n        }\r\n        libsToImport.components.add(key)\r\n    }\r\n}\r\n\r\nexport default async function(chartOptions) {\r\n    function loadError(err) {\r\n        const loadErrText = languageSelector(\"图表加载失败\", \"Chart load error\")\r\n        console.error(err)\r\n        chartElList().forEach(el =>\r\n            el.textContent = loadErrText)\r\n    }\r\n    function importChartLibs() {\r\n        const libsToImport = {\r\n            charts: new Set(),\r\n            components: new Set(),\r\n        }\r\n        chartOptionResolver(globalOptions, libsToImport)\r\n        chartOptions.forEach(options =>\r\n            chartOptionResolver(options, libsToImport))\r\n\r\n        const chartsToImport = Array.from(libsToImport.charts).map(importChart)\r\n        const componentsToImport = Array.from(libsToImport.components).map(importComponent)\r\n        Promise.all(chartsToImport.concat(componentsToImport))\r\n            .then(echartsLibs => {\r\n                echarts.use(echartsLibs)\r\n                chartElList().forEach(chartRenderer)\r\n            })\r\n            .catch(loadError)\r\n    }\r\n\r\n    if (!chartOptions.length) {\r\n        // no chart\r\n        return\r\n    }\r\n    if (echarts) {\r\n        importChartLibs()\r\n        return\r\n    }\r\n    import(\"../../libs/echarts/core.js\")\r\n        .then(module => {\r\n            echarts         = module.default\r\n            importChart     = module.importChart\r\n            importComponent = module.importComponent\r\n        })\r\n        .then(importChartLibs)\r\n        .then(() => {\r\n            const body = document.body\r\n            darkmodeObserver.observe(body, {\r\n                attributes: true,\r\n                attributeFilter: [\"class\"]\r\n            })\r\n\r\n            // resize event listeners\r\n            eventbus.on(\"catalog-toggle\", resizeEvent)\r\n            window.addEventListener(\"resize\",\r\n                debounce(resizeEvent, 200))\r\n        })\r\n        .catch(loadError)\r\n}","export default function(callback, waitMillisecond) {\r\n    let timer = null\r\n\r\n    return function(...args) {\r\n        if (timer) {\r\n            clearTimeout(timer)\r\n        }\r\n\r\n        timer = setTimeout(() => {\r\n            return callback(...args)\r\n        }, waitMillisecond)\r\n    }\r\n}","function propSetter(el, props) {\r\n    if (!props) {\r\n        return\r\n    }\r\n    for (const [key, val] of Object.entries(props)) {\r\n        if (val === undefined) {\r\n            continue\r\n        }\r\n        if (val instanceof Function) {\r\n            el[key] = val\r\n        } else {\r\n            el.setAttribute(key, val)\r\n        }\r\n    }\r\n}\r\n\r\nfunction propToString(props) {\r\n    // input: {prop: \"value\"}\r\n    // output: \"prop='value'\"\r\n    const htmlValueFormater = val => val.toString().replaceAll(\"\\\"\", \"&quot;\") \r\n    const resultPropStr = Object.entries(props)\r\n        .filter(([_, val]) => val != undefined)\r\n        .map(([key, val]) => `${key}=\"${htmlValueFormater(val)}\"`)\r\n        .join(\" \")\r\n    return resultPropStr\r\n}\r\n\r\nfunction contentSetter(el, content) {\r\n    if (content instanceof Array) {\r\n        // array of html element\r\n        for (const childEl of content) {\r\n            el.appendChild(childEl)\r\n        }\r\n    } else if (content instanceof HTMLElement) {\r\n        // single element\r\n        el.appendChild(content)\r\n    } else if (typeof content === \"string\") {\r\n        // common text\r\n        el.textContent = content\r\n    } else {\r\n        throw Error(\"Unexpected element content: \" + content)\r\n    }\r\n}\r\n\r\nexport default function el(tagName, content=\"\", props=null) {\r\n    if (\"document\" in globalThis) {\r\n        // in browser\r\n        if (tagName === \"text\") {\r\n            return document.createTextNode(content)\r\n        }\r\n\r\n        const targetEl = document.createElement(tagName)\r\n        propSetter(targetEl, props)\r\n        contentSetter(targetEl, content)\r\n        return targetEl\r\n    } else {\r\n        // in node.js\r\n        if (content instanceof Array) {\r\n            content = content.join(\"\")\r\n        }\r\n        switch (tagName) {\r\n            case \"text\":\r\n                return content\r\n            case \"hr\":\r\n            case \"br\":\r\n                return `<${tagName}>`\r\n            case \"img\":\r\n            case \"input\":\r\n                return `<${tagName} ${props ? propToString(props) : \"\"}>`\r\n        }\r\n        return `<${tagName}${props ? \" \" + propToString(props) : \"\"}>${content}</${tagName}>`\r\n    }\r\n}\r\n","// (\"abc]\", \"]\") -> \"abc\"\r\nexport default function getInterval(text, endSign) {\r\n    if (!text.includes(endSign)) {\r\n        return null\r\n    }\r\n\r\n    let intervalText = \"\"\r\n    let isEscape = false\r\n\r\n    while (text.length) {\r\n        const ch = text.slice(0, 1)\r\n        text = text.substr(1)\r\n\r\n        if (ch === \"\\\\\") {\r\n            isEscape = !isEscape\r\n            continue\r\n        }\r\n        if (ch === endSign && !isEscape) {\r\n            break\r\n        }\r\n        intervalText += ch\r\n        isEscape = false\r\n    }\r\n\r\n    return intervalText\r\n}\r\n","import el from \"../dom/el.js\"\r\nimport htmlEntityReplace from \"../htmlEntityReplace.js\"\r\nimport getInterval from \"./utils/getInterval.js\"\r\n\r\n// identifier character to HTML tag\r\nconst KeyToken_TagName_map = new Map([\r\n    [\"#\", \"strong\"],\r\n    [\"`\", \"code\"],\r\n    [\"_\", \"u\"],\r\n    [\"/\", \"i\"],\r\n    [\"-\", \"del\"],\r\n    [\":\", \"span.dim\"],\r\n    [\",\", \"sub\"],\r\n    [\"'\", \"sup\"],\r\n    [\"$\", \"span.math\"],\r\n])\r\n\r\nconst PairedParenMap = new Map([\r\n    [\"[\", \"]\"],\r\n    [\"{\", \"}\"],\r\n])\r\n\r\n// --- --- --- --- --- ---\r\n\r\nclass TextToken {\r\n    constructor(content) {\r\n        this.content = content\r\n    }\r\n    toHTML = () => el(\"text\", this.content)\r\n}\r\nclass KeyToken {\r\n    constructor(tagSign, content) {\r\n        const tag = KeyToken_TagName_map.get(tagSign)\r\n        if (tag.includes(\".\")) {\r\n            const [realTagName, className] = tag.split(\".\")\r\n            this.tagName = realTagName\r\n            this.className = className\r\n        } else {\r\n            this.tagName = tag\r\n        }\r\n        this.content = content\r\n\r\n        if (this.className === \"math\") {\r\n            // set this global variable to import\r\n            // the math formula renderer module\r\n            globalThis.__ContainsFormula__ = true\r\n        }\r\n    }\r\n\r\n    toHTML() {\r\n        const elOption = this.className === undefined ? null : {\"class\": this.className}\r\n        const thisEl = el(this.tagName, parseEntry(this.content), elOption)\r\n        return thisEl\r\n    }\r\n}\r\n\r\nclass LinkToken {\r\n    constructor(content, address) {\r\n        this.content = content\r\n        this.address = address\r\n    }\r\n\r\n    toHTML() {\r\n        const displayContent = parseEntry(this.content)\r\n        if (this.address.startsWith(\"http\")) {\r\n            // internet links\r\n            return el(\"a\", displayContent, {\r\n                href: this.address,\r\n                target: \"_blank\"\r\n            })\r\n        }\r\n\r\n        // static resources or links\r\n        const actualAddress = \"static/\" + this.address\r\n        return el(\"a\", displayContent, {\r\n            href: \"#\" + actualAddress\r\n        })\r\n    }\r\n}\r\nclass PhoneticToken {\r\n    constructor(content, notation) {\r\n        this.content  = content\r\n        this.notation = notation\r\n    }\r\n    toHTML() {\r\n        const ignoredLeftParenthesis = el(\"rp\", \"(\")\r\n        const ignoredRightParenthesis = el(\"rp\", \")\")\r\n        const notationEl = el(\"rt\", this.notation)\r\n\r\n        const content = parseEntry(this.content).concat([\r\n            ignoredLeftParenthesis,\r\n            notationEl,\r\n            ignoredRightParenthesis,\r\n        ])\r\n        return el(\"ruby\", content, {\r\n            \"data-notation\": this.notation\r\n        })\r\n    }\r\n}\r\n\r\n// --- --- --- --- --- ---\r\n\r\nfunction parser(source) {\r\n    function getFirstChar() {\r\n        const ch = source.charAt(0)\r\n        source = source.substring(1)\r\n        return ch\r\n    }\r\n    function getSpecialTokenClass(tokenSign) {\r\n        let targetTokenType\r\n        if (tokenSign === \"[\") {\r\n            targetTokenType = LinkToken\r\n        } else if (tokenSign === \"{\") {\r\n            targetTokenType = PhoneticToken\r\n        } else { /* unreachable */ }\r\n        return targetTokenType\r\n    }\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    const tokens = []\r\n    let textTerm = \"\" // text\r\n    let keyTerm  = \"\" // inline style content\r\n    let keyStart = \"\"\r\n    let isEscape = false\r\n    let isInKey  = false\r\n\r\n    while (source.length) {\r\n        const ch = getFirstChar()\r\n\r\n        // key rules resolve\r\n        if (KeyToken_TagName_map.has(ch)) {\r\n            if (isEscape) {\r\n                if (isInKey) {\r\n                    keyTerm += ch\r\n                } else {\r\n                    textTerm += ch\r\n                }\r\n                continue\r\n            }\r\n\r\n            if (isInKey && ch != keyStart) {\r\n                keyTerm += ch\r\n                continue\r\n            }\r\n\r\n            const nextCh = getFirstChar()\r\n            if (nextCh != ch) {\r\n                if (isInKey) {\r\n                    keyTerm += ch\r\n                } else {\r\n                    textTerm += ch\r\n                }\r\n                source = nextCh + source\r\n                continue\r\n            }\r\n\r\n            if (isInKey) {\r\n                tokens.push(new KeyToken(ch, keyTerm))\r\n                keyTerm  = \"\"\r\n                keyStart = \"\"\r\n            } else {\r\n                tokens.push(new TextToken(textTerm))\r\n                textTerm = \"\"\r\n                keyStart = ch\r\n            }\r\n            isInKey = !isInKey\r\n            continue\r\n        }\r\n\r\n        // special inline rules resolve\r\n        if ([\"[\", \"{\"].includes(ch) && !isInKey && !isEscape) {\r\n            const specialTokenSign = ch\r\n            const pairedTokenSign = PairedParenMap.get(specialTokenSign)\r\n\r\n            tokens.push(new TextToken(textTerm))\r\n            textTerm = \"\"\r\n\r\n            let removedContent = specialTokenSign\r\n            // the actual displayed content for special inline elements\r\n            const displayContent = getInterval(source, pairedTokenSign)\r\n            if (displayContent != null) {\r\n                removedContent += source.slice(0, displayContent.length + 1)\r\n                source = source.substr(displayContent.length + 1)\r\n\r\n                const nextCh = getFirstChar()\r\n                removedContent += nextCh\r\n                if (nextCh === \"(\") {\r\n                    // the hidden displayed content for special inline elements\r\n                    const hiddenContent = getInterval(source, \")\")\r\n                    if (hiddenContent != null) {\r\n                        let targetTokenType = getSpecialTokenClass(specialTokenSign)\r\n                        source = source.substr(hiddenContent.length + 1)\r\n                        tokens.push(new targetTokenType(displayContent, hiddenContent))\r\n                        continue\r\n                    }\r\n                }\r\n            }\r\n            textTerm += removedContent\r\n            continue\r\n        }\r\n\r\n        // --- --- --- --- --- ---\r\n\r\n        if (ch === \"\\\\\") {\r\n            isEscape = !isEscape\r\n            continue\r\n        }\r\n\r\n        let text\r\n        if (isEscape) {\r\n            text = \"\\\\\" + ch\r\n            isEscape = false\r\n        } else {\r\n            text = ch\r\n        }\r\n\r\n        if (isInKey) {\r\n            keyTerm += text\r\n        } else {\r\n            textTerm += text\r\n        }\r\n    }\r\n\r\n    if (keyTerm.length) {\r\n        tokens.push(new KeyToken(keyStart, keyTerm))\r\n    }\r\n    if (textTerm.length) {\r\n        tokens.push(new TextToken(textTerm))\r\n    }\r\n    return tokens\r\n}\r\n\r\nexport default function parseEntry(source) {\r\n    const tokens = parser(source)\r\n    let resultHTML = tokens\r\n        .filter(token =>\r\n            // remove empty TextToken\r\n            !(token instanceof TextToken && !token.content.length))\r\n        .map(token => token.toHTML())\r\n\r\n    if (typeof window !== \"object\" && source === resultHTML[0]) {\r\n        // for server rendering\r\n        return htmlEntityReplace(source)\r\n    }\r\n    return resultHTML\r\n}\r\n\r\n// test cases\r\n// console.log(parseEntry(\"##bo//itelic//ld##\"))\r\n// console.log(parseEntry(\"##bo[link text](http://www.com)ld##\"))\r\n// console.log(parseEntry(\"::dim[link text](http://www.com)med::\"))\r\n// console.log(parseEntry(\"//ita[link text](http:\\\\/\\\\/www.com)lic//\"))\r\n// console.log(parseEntry(\"``<test>``\"))\r\n// console.log(parseEntry(\"asd[asd\"))\r\n// console.log(parseEntry(\"asd[asd]asd\"))\r\n// console.log(parseEntry(\"asd[asd](asd\"))\r\n// console.log(parseEntry(\"asd[asd](asd)\"))\r\n// console.log(parseEntry(\"asd[##link##](asd)\"))\r\n// console.log(parseEntry(\"##asd[link##](asd)\"))\r\n// console.log(parseEntry(\"##asd[link](asd)##\"))\r\n// console.log(parseEntry(\"::dimmed::\"))\r\n// console.log(parseEntry(\"$$f_c = \\\\frac{1}{abc}$$\"))\r\n","export default source => source\r\n    .replaceAll(\"<\", \"&lt;\")\r\n    .replaceAll(\">\", \"&gt;\")\r\n","import mdResolver from \"./index.js\"\r\nimport inlineResolver from \"./inline.js\"\r\nimport el from \"../dom/el.js\"\r\nimport languageSelector from \"../languageSelector.js\"\r\nimport getInterval from \"./utils/getInterval.js\"\r\n\r\nexport class Headline {\r\n    constructor(content) {\r\n        // \"### test\" -> \"###\"\r\n        const splited = content.split(\" \")\r\n        const numberSignStr = splited[0]\r\n        let numberSignCount = 0\r\n        for (const ch of numberSignStr) {\r\n            if (ch === '#') {\r\n                numberSignCount += 1\r\n            }\r\n        }\r\n\r\n        if (numberSignCount > 6) {\r\n            numberSignCount = 0\r\n        }\r\n\r\n        const rawContent = splited.slice(1).join(\" \")\r\n        this.tagName = \"h\" + numberSignCount\r\n        this.content = inlineResolver(rawContent)\r\n    }\r\n    toHTML() {\r\n        const options = this.id === undefined\r\n            ? null\r\n            : { id: this.id }\r\n        return el(this.tagName, this.content, options)\r\n    }\r\n\r\n    static pattern = source => source.match(/^(#+ )/)\r\n}\r\n\r\nexport class Para {\r\n    tagName = \"p\"\r\n\r\n    constructor(content) {\r\n        this.content = content.trimStart()\r\n    }\r\n    toHTML() {\r\n        const inline = inlineResolver(this.content)\r\n        return el(this.tagName, inline)\r\n    }\r\n}\r\n\r\nexport class Quote {\r\n    tagName = \"blockquote\"\r\n    children = []\r\n\r\n    constructor(children) {\r\n        this.children = children\r\n    }\r\n    toHTML() {\r\n        const innerNodes = this.children\r\n            .map(node => node.toHTML())\r\n        return el(this.tagName, innerNodes)\r\n    }\r\n\r\n    static pattern = source =>\r\n        (source === \">\") || source.startsWith(\"> \")\r\n}\r\n\r\nexport class Divider {\r\n    toHTML = () => el(\"hr\")\r\n    static pattern = source =>\r\n        source.match(/(-\\s*-\\s*-)|(\\*\\s*\\*\\s*\\*)/) && !source.match(/[a-zA-Z0-9]/)\r\n}\r\n\r\nexport class List {\r\n    children = []\r\n\r\n    constructor(content) {\r\n        this.isOrdered = Boolean(List.orderedPattern(content))\r\n        this.tagName   = (this.isOrdered) ? \"ol\" : \"ul\"\r\n        this.children  = [List.getContent(content, this.isOrdered)]\r\n    }\r\n\r\n    push = child => this.children.push(child)\r\n\r\n    toHTML() {\r\n        const childrenHTML = []\r\n        for (const child of this.children) {\r\n            if (typeof child === \"string\") {\r\n                const inline = inlineResolver(child)\r\n                childrenHTML.push(el(\"li\", inline))\r\n            } else {\r\n                childrenHTML.push(child.toHTML())\r\n            }\r\n        }\r\n        return el(this.tagName, childrenHTML)\r\n    }\r\n\r\n    static unorderedPattern = (source) => Boolean(source.match(/^([\\s\\t]*[+-]+ )/))\r\n    static orderedPattern = (source) => Boolean(source.match(/^([\\s\\t]*[0-9]+. )/))\r\n\r\n    static isListPattern = (source) =>\r\n        List.orderedPattern(source) || List.unorderedPattern(source)\r\n\r\n    static getContent(line, isOrdered) {\r\n        if (isOrdered) {\r\n            // \"1. ...\" => \"...\"\r\n            return line.match(/(?<=^([\\s\\t]*[0-9]+. )).+$/g)[0]\r\n        } else {\r\n            // \"- ...\" => \"...\"\r\n            return line.match(/(?<=^([\\s\\t]*[+-]+ )).+$/g)[0]\r\n        }\r\n    }\r\n}\r\n\r\nexport class Table {\r\n    headerCells = [\"\"]   // [string]\r\n    bodyRows    = [[\"\"]] // [[string]]\r\n\r\n    constructor(headerCells, bodyRows) {\r\n        this.headerCells = headerCells\r\n        this.bodyRows    = bodyRows\r\n    }\r\n\r\n    #tableHeaderCell = content => el(\"th\", content)\r\n    #tableBodyCell   = content => el(\"td\", inlineResolver(content))\r\n    #tableHeaderRow  = row => el(\"tr\", row.map(this.#tableHeaderCell))\r\n    #tableBodyRow    = row => el(\"tr\", row.map(this.#tableBodyCell))\r\n\r\n    toHTML() {\r\n        const tableHeader = el(\r\n            \"thead\",\r\n            this.#tableHeaderRow(this.headerCells)\r\n        )\r\n        const tableBody = el(\r\n            \"tbody\",\r\n            this.bodyRows\r\n                .map(this.#tableBodyRow)\r\n        )\r\n        return el(\"div\", el(\"table\", [tableHeader, tableBody]), {\r\n            \"class\": \"table\"\r\n        })\r\n    }\r\n\r\n    static pattern = source => source.startsWith(\"| \")\r\n}\r\n\r\n// --- --- --- --- -\r\n// media nodes start\r\n// --- --- --- --- -\r\n\r\nclass MediaNode {\r\n    source = \"\"\r\n    description = \"\"    \r\n    constructor(mdText) {\r\n        mdText = mdText.substr(2)\r\n        this.description = getInterval(mdText, \"]\")\r\n        mdText = mdText.substr(this.description.length + 2)\r\n        this.source = getInterval(mdText, \")\")\r\n    }\r\n\r\n    static containerGenerator(content) {\r\n        return el(\"div\", content, {\r\n            \"class\": \"media-container\"\r\n        })\r\n    }\r\n\r\n    static patternGenerator(identifierSign) {\r\n        return (source) =>\r\n            source.startsWith(identifierSign + \"[\") && source.endsWith(\")\")\r\n    }\r\n\r\n    static replaceContentGenerator(href, description) {\r\n        const downloadEl = el(\"a\", languageSelector(\"从这里下载！\", \"Download Here!\"), { href })\r\n        const replaceContent = `${description}<br>${downloadEl}`\r\n        return replaceContent\r\n    }\r\n\r\n    static srcUrlResolver(rawUrl) {\r\n        let actualUrl\r\n        if (rawUrl.startsWith(\"http\")) {\r\n            actualUrl = rawUrl\r\n        } else {\r\n            if (\"location\" in globalThis) {\r\n                // in browser\r\n                const hash = location.hash.slice(1)\r\n                // get the parent directory path\r\n                const currentPath = hash.split(\"/\").slice(0, -1).join(\"/\")\r\n                actualUrl = currentPath + \"/\" + rawUrl\r\n            } else {\r\n                // in nodejs\r\n                const path = globalThis.__ResourcePath__\r\n                actualUrl = path + \"/\" + rawUrl\r\n            }\r\n        }\r\n        return actualUrl\r\n    }\r\n}\r\n\r\nexport class Image extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\"!\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const imageEl = el(\"img\", \"\", {\r\n            src: actualUrl,\r\n            alt: this.description,\r\n            loading: \"lazy\",\r\n            tabindex: 0,\r\n        })\r\n        if (typeof window === \"object\") {\r\n            // in browser\r\n            imageEl.onclick = e =>\r\n                window.open(e.target.src)\r\n            imageEl.onerror = e => {\r\n                const target = e.target\r\n                target.onclick = null\r\n                target.title = this.description\r\n                target.classList.add(\"load-error\")\r\n            }\r\n        }\r\n        return MediaNode.containerGenerator(imageEl)\r\n    }\r\n}\r\n\r\nexport class Audio extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\":\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const replaceContent = MediaNode.replaceContentGenerator(actualUrl, this.description)\r\n        const audioEl = el(\"audio\", replaceContent, {\r\n            src: actualUrl,\r\n            controls: true,\r\n        })\r\n        return MediaNode.containerGenerator(audioEl)\r\n    }\r\n}\r\n\r\nexport class Video extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\"?\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const replaceContent = MediaNode.replaceContentGenerator(actualUrl, this.description)\r\n        const videoEl = el(\"video\", replaceContent, {\r\n            src: actualUrl,\r\n            controls: \"true\",\r\n        })\r\n        return MediaNode.containerGenerator(videoEl)\r\n    }\r\n}\r\n\r\nexport const isIframePattern = (source) =>\r\n    MediaNode.patternGenerator(\"@\")(source)\r\n    || source.startsWith(\"@@@\")\r\n\r\nexport class Iframe extends MediaNode {\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const iframeEl = el(\"iframe\", this.description, {\r\n            src: actualUrl,\r\n            title: this.description,\r\n            sandbox: \"allow-scripts\",\r\n            loading: \"lazy\",\r\n        })\r\n        return MediaNode.containerGenerator(iframeEl)\r\n    }\r\n}\r\n\r\n// --- --- --- ---\r\n// media nodes end\r\n// --- --- --- ---\r\n\r\n// --- --- --- --- -\r\n// block nodes start\r\n// --- --- --- --- -\r\n\r\nexport class CodeBlock {\r\n    constructor(content, lang) {\r\n        this.lang = lang\r\n        if (typeof window === \"object\") {\r\n            // in browser\r\n            this.content = content\r\n        } else {\r\n            // in node.js\r\n            this.content = content\r\n                .replaceAll(\"<\", \"&lt;\")\r\n                .replaceAll(\">\", \"&gt;\")\r\n        }\r\n    }\r\n    append(content) {\r\n        this.content += content\r\n    }\r\n    toHTML() {\r\n        const isPlaintext = [\"plaintext\", \"text\", \"\"].includes(this.lang)\r\n        if (typeof window === \"object\" && !isPlaintext) {\r\n            globalThis.__LanguageList__.add(this.lang)\r\n        }\r\n        \r\n        let langName\r\n        let langClass\r\n        if (isPlaintext) {\r\n            langClass = \"nohighlight\"\r\n            langName  = \"PLAINTEXT\"\r\n        } else {\r\n            langClass = `language-${this.lang}`\r\n            langName  = this.lang.toUpperCase()\r\n        }\r\n\r\n        const codeEl = el(\"code\", this.content, {\r\n            \"class\": langClass,\r\n            tabindex: 0\r\n        })\r\n        return el(\"pre\", codeEl, {\r\n            \"data-language\": langName\r\n        })\r\n    }\r\n\r\n    static pattern = source => source.startsWith(\"```\")\r\n}\r\n\r\nexport class DetailsBlock {\r\n    summary = \"\"\r\n    content = \"\"\r\n\r\n    constructor(content, summary) {   \r\n        this.summary = summary\r\n        this.content = mdResolver(content)\r\n    }\r\n    toHTML() {\r\n        const summaryEl = el(\"summary\", this.summary)\r\n        const detailsEl = el(\"details\", summaryEl)\r\n\r\n        const innerNodes = this.content\r\n            .map(node => node.toHTML())\r\n        const childrenEl = el(\"div\", el(\"div\", innerNodes, {\r\n            \"class\": \"details-children\"\r\n        }), {\r\n            \"class\": \"details-children-container\"\r\n        })\r\n        return el(\"div\", [detailsEl, childrenEl], {\r\n            \"class\": \"details\"\r\n        })\r\n    }\r\n\r\n    static pattern = source =>\r\n        source.startsWith(\">>>\")\r\n}\r\n\r\nexport class FormulaBlock {\r\n    content = \"\"\r\n    description = \"\"\r\n\r\n    constructor(content, description) {\r\n        this.content = content\r\n        this.description = description\r\n    }\r\n    toHTML() {\r\n        globalThis.__ContainsFormula__ = true\r\n        return el(\"div\", this.content, {\r\n            \"class\": \"math\",\r\n            title: this.description,\r\n        })\r\n    }\r\n\r\n    static pattern = source =>\r\n        source.startsWith(\"$$$\")\r\n}\r\n\r\nexport class ChartBlock {\r\n    static pattern = source =>\r\n        source.startsWith(\"!!!\")\r\n\r\n    constructor(content, _description) {\r\n        const options = new Function(content + \";return option\")()\r\n        this.chartOptions = options\r\n        globalThis.__ChartOptionList__.push(options)\r\n    }\r\n    toHTML() {\r\n        const chartEl = el(\"div\", \"\", {\r\n            \"class\": \"chart\",\r\n        })\r\n        chartEl.__ChartOptions__ = this.chartOptions\r\n        return MediaNode.containerGenerator(chartEl)\r\n    }\r\n}\r\n\r\nexport class IframeBlock {\r\n    // injected html codes, used to auto darkmode\r\n    // and send height message\r\n    static #injectedCodes = id => `\\\r\n<style>\r\n@media (prefers-color-scheme: dark) {\r\n  :root {\r\n    color: white;\r\n    background-color: #121212;\r\n  }\r\n}\r\n</style>\r\n<script>\r\nconst rootEl = document.documentElement\r\nfunction postHeight() {\r\n    const parent = window.parent\r\n    const height = parseFloat(getComputedStyle(rootEl).height)\r\n    parent.postMessage({\r\n        height,\r\n        id: \"${id}\"\r\n    }, \"*\")\r\n}\r\nwindow.addEventListener(\"load\", postHeight)\r\nwindow.addEventListener(\"message\", e => {\r\n  const { fontSize } = e.data\r\n  rootEl.style.fontSize = fontSize\r\n  postHeight()\r\n})\r\n</script>`\r\n\r\n    constructor(content, description) {\r\n        globalThis.__IframeCounter__ += 1\r\n        this.id = \"iframe_\" + globalThis.__IframeCounter__\r\n        this.description = description\r\n\r\n        if (typeof window === \"object\") {\r\n            // in browser\r\n            this.content = content + IframeBlock.#injectedCodes(this.id)\r\n        } else {\r\n            // in node.js\r\n            this.content = content\r\n        }\r\n    }\r\n\r\n    toHTML() {\r\n        const iframeEl = el(\"iframe\", this.description, {\r\n            id: this.id,\r\n            title: this.description,\r\n            srcdoc: this.content,\r\n            sandbox: \"allow-scripts\",\r\n        })\r\n        return MediaNode.containerGenerator(iframeEl)\r\n    }\r\n}\r\n\r\n// --- --- --- ---\r\n// block nodes end\r\n// --- --- --- ---\r\n","export default function(line) {\r\n    let indentCount = 0\r\n    let spaceCount = 0\r\n\r\n    for (const ch of line) {\r\n        if (ch.match(/[^\\s\\t]/)) {\r\n            break\r\n        }\r\n\r\n        if (ch === \"\\t\") {\r\n            indentCount += 1\r\n            continue\r\n        }\r\n        if (ch === \" \") {\r\n            spaceCount += 1\r\n        }\r\n        if (spaceCount === 2) {\r\n            spaceCount = 0\r\n            indentCount += 1\r\n        }\r\n    }\r\n    return indentCount\r\n}\r\n","import { List } from \"../node.js\"\r\nimport getIndent from \"../utils/getIndent.js\"\r\n\r\nexport default function listResolver(currentLine, lines) {\r\n    const currentIndent = getIndent(currentLine)\r\n    const currentNode = new List(currentLine)\r\n\r\n    while (lines.length && List.isListPattern(lines[0])) {\r\n        const nextLine = lines.shift()\r\n        const nextIndent = getIndent(nextLine)\r\n        const isNextOrdered = List.orderedPattern(nextLine)\r\n\r\n        if (nextIndent > currentIndent) {\r\n            currentNode.push(listResolver(nextLine, lines))\r\n        } else if (nextIndent === currentIndent && isNextOrdered === currentNode.isOrdered) {\r\n            currentNode.push(List.getContent(nextLine, isNextOrdered))\r\n        } else {\r\n            lines.unshift(nextLine)\r\n            break\r\n        }\r\n    }\r\n    return currentNode\r\n}","import mdResolver from \"../index.js\"\r\nimport { Quote } from \"../node.js\"\r\n\r\nexport default function(firstLine, lines) {\r\n    let quotedContent = firstLine.slice(2) + \"\\n\"\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (Quote.pattern(l)) {\r\n            quotedContent += l.slice(2) + \"\\n\"\r\n        } else {\r\n            lines.unshift(l)\r\n            break\r\n        }\r\n    }\r\n    const children = mdResolver(quotedContent)\r\n    const node = new Quote(children)\r\n    return node\r\n}\r\n","import { Table } from \"../node.js\"\r\n\r\n// input: \"| content | content |\"\"\r\n// output: [\"content\",\"content\"]\r\nfunction tableLineConverter(tableLine) {\r\n    const splited = tableLine.split(\"|\")\r\n    const result = splited\r\n        .filter(item => item.length > 0)\r\n        .map(item => item.trim())\r\n    return result\r\n}\r\n\r\nexport default function(firstLine, lines) {\r\n    const headerText = firstLine\r\n    const contentLines = []\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (Table.pattern(l)) {\r\n            contentLines.push(l)\r\n        } else {\r\n            lines.unshift(l)\r\n            break\r\n        }\r\n    }\r\n\r\n    const headerCells = tableLineConverter(headerText)\r\n    const contentRows = contentLines.map(tableLineConverter)\r\n    const tableNode = new Table(headerCells, contentRows)\r\n    return tableNode\r\n}\r\n","import { ChartBlock, CodeBlock, DetailsBlock, FormulaBlock, Iframe, IframeBlock } from \"../node.js\"\r\n\r\nfunction blockResolverGenerator(endSign, targetClass) {\r\n    return function(firstLine, lines) {\r\n        const description = firstLine.slice(3)\r\n\r\n        let content = \"\"\r\n        while (lines.length) {\r\n            const l = lines.shift()\r\n\r\n            if (l === endSign) {\r\n                break\r\n            }\r\n\r\n            content += l + \"\\n\"\r\n        }\r\n        return new targetClass(content, description)\r\n    }\r\n}\r\n\r\nexport const codeResolver    = blockResolverGenerator(\"```\", CodeBlock)\r\nexport const chartResolver   = blockResolverGenerator(\"!!!\", ChartBlock)\r\nexport const detailsResolver = blockResolverGenerator(\">>>\", DetailsBlock)\r\nexport const formulaResolver = blockResolverGenerator(\"$$$\", FormulaBlock)\r\nexport function iframeResolver(firstLine, lines) {\r\n    const blockResolver = blockResolverGenerator(\"@@@\", IframeBlock)\r\n\r\n    if (!firstLine.startsWith(\"@@@\")) {\r\n        // link to out resource\r\n        return new Iframe(firstLine)\r\n    }\r\n    return blockResolver(firstLine, lines)\r\n}\r\n","import {\r\n    Headline, Quote, Divider,\r\n    List, Para, Table,\r\n    Image, Audio, Video,\r\n    FormulaBlock, CodeBlock,\r\n    isIframePattern,\r\n    DetailsBlock,\r\n    ChartBlock\r\n} from \"./node.js\"\r\nimport {\r\n    listResolver, quoteResolver, tableResolver,\r\n    codeResolver, formulaResolver, chartResolver,\r\n    iframeResolver, detailsResolver,\r\n} from \"./resolvers/index.js\"\r\nimport getLines from \"./utils/getLines.js\"\r\n\r\nexport default function mdResolver(source) {\r\n    const lines = getLines(source)\r\n    const nodes = []\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (!l.length) {\r\n            // skip empty line\r\n            continue\r\n        }\r\n\r\n        if (Headline.pattern(l)) {\r\n            nodes.push(new Headline(l))\r\n        } else\r\n        if (Divider.pattern(l)) {\r\n            nodes.push(new Divider)\r\n        } else\r\n        if (Quote.pattern(l)) {\r\n            nodes.push(quoteResolver(l, lines))\r\n        } else\r\n        if (List.isListPattern(l)) {\r\n            nodes.push(listResolver(l, lines))\r\n        } else\r\n        if (Table.pattern(l)) {\r\n            nodes.push(tableResolver(l, lines))\r\n        } else\r\n        if (Image.pattern(l)) {\r\n            nodes.push(new Image(l))\r\n        } else\r\n        if (Audio.pattern(l)) {\r\n            nodes.push(new Audio(l))\r\n        } else\r\n        if (Video.pattern(l)) {\r\n            nodes.push(new Video(l))\r\n        } else\r\n        if (DetailsBlock.pattern(l)) {\r\n            nodes.push(detailsResolver(l, lines))\r\n        } else\r\n        if (FormulaBlock.pattern(l)) {\r\n            nodes.push(formulaResolver(l, lines))\r\n        } else\r\n        if (CodeBlock.pattern(l)) {\r\n            nodes.push(codeResolver(l, lines))\r\n        } else\r\n        if (ChartBlock.pattern(l)) {\r\n            nodes.push(chartResolver(l, lines))\r\n        } else\r\n        if (isIframePattern(l)) {\r\n            nodes.push(iframeResolver(l, lines))\r\n        } else {\r\n            nodes.push(new Para(l))\r\n        }\r\n    }\r\n    return nodes\r\n}","export default function(source) {\r\n    if (source.indexOf(\"\\r\") != -1) {\r\n        return source.split(\"\\r\\n\")\r\n    } else {\r\n        return source.split(\"\\n\")\r\n    }\r\n}","export default function(el) {\r\n    return function(e) {\r\n        // when Enter key or Space key\r\n        if (e.key === \"Enter\" || e.key === \" \") {\r\n            el.click()\r\n        }\r\n    }\r\n}\r\n","// return to the document top\r\nexport default function() {\r\n    document.body.scrollTop = 0\r\n    document.documentElement.scrollTop = 0\r\n}\r\n","import importHighlighter from \"./importers/highlight.js\"\r\nimport importTexRenderer from \"./importers/katex.js\"\r\nimport importChartRenderer from \"./importers/echarts.js\"\r\n\r\nimport mdResolver from \"../utils/markdown/index.js\"\r\nimport keydownEvent from \"../utils/dom/keydownEvent.js\"\r\nimport backToTop from \"../utils/dom/backToTop.js\"\r\nimport eventbus from \"../utils/eventbus/inst.js\"\r\nimport config from \"../../build.config.js\"\r\nimport { Headline } from \"../utils/markdown/node.js\"\r\nimport languageSelector from \"../utils/languageSelector.js\"\r\n\r\nconst articleEl = document.querySelector(\"article\")\r\nconst emptyArticlePlaceHolder = languageSelector(\"空文章\", \"Empty Article\")\r\n\r\neventbus.on(\"catalog-toggle\", () => {\r\n    articleEl.classList.toggle(\"with-catalog\")\r\n})\r\neventbus.on(\"catalog-closed\", () => {\r\n    articleEl.classList.remove(\"with-catalog\")\r\n})\r\n\r\nfunction getHeadlines(structure) {\r\n    return structure\r\n        .filter(node => node instanceof Headline)\r\n        .map((node, index) => {\r\n            const id = node.id = \"headline-\" + index\r\n            const content = node.content.map(el => el.cloneNode(true))\r\n            return {\r\n                id, content,\r\n                level: node.tagName,\r\n            }\r\n        })\r\n}\r\n\r\nexport default function articleRender(articleEl, mdText) {\r\n    // language names to import for `highlight.js`\r\n    globalThis.__LanguageList__ = new Set()\r\n    // to deside whether to import `katex`\r\n    globalThis.__ContainsFormula__ = false\r\n    // to deside whether to import `echarts.js`\r\n    globalThis.__ChartOptionList__ = []\r\n    // used to dynamic generate iframe id\r\n    globalThis.__IframeCounter__ = 0\r\n\r\n    const structure = mdResolver(mdText)\r\n    if (config.enableCatalog) {\r\n        const headlineItems = getHeadlines(structure)\r\n        eventbus.emit(\"article-rendered\", headlineItems)\r\n    }\r\n\r\n    let resultNodes = structure.map(node => node.toHTML())\r\n    if (!resultNodes.length) {\r\n        resultNodes = el(\"h1\", emptyArticlePlaceHolder)\r\n    }\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    articleEl.innerHTML = \"\"\r\n    resultNodes.forEach(el => articleEl.appendChild(el))\r\n\r\n    articleEl.style.display = \"block\"\r\n    articleEl.querySelectorAll(\"[tabindex='0']\").forEach((el) => {\r\n        el.onkeydown = keydownEvent(el)\r\n    })\r\n    backToTop()\r\n\r\n    importHighlighter(globalThis.__LanguageList__).then(() => globalThis.__LanguageList__ = null)\r\n    importTexRenderer(globalThis.__ContainsFormula__).then(() => globalThis.__ContainsFormula__ = false)\r\n    importChartRenderer(globalThis.__ChartOptionList__).then(() => globalThis.__ChartOptions__ = null)\r\n}\r\n","import articleRender from \"./articleRenderer.js\"\r\nimport el from \"../utils/dom/el.js\"\r\nimport keydownEvent from \"../utils/dom/keydownEvent.js\"\r\n\r\nexport function newestItemRenderer(item) {\r\n    const createDate = new Date(item.timestamp)\r\n    const formatedDate = new Intl.DateTimeFormat().format(createDate)\r\n    const dateEl  = el(\"code\", formatedDate)\r\n    const titleEl = el(\"span\", item.title, {\r\n        \"class\": \"underline-target\"\r\n    })\r\n    return el(\"li\",\r\n        [dateEl, el(\"text\", \": \"), titleEl],\r\n        {\r\n            tabindex: 0,\r\n            \"class\": \"underline-through\",\r\n            \"data-target-blog\": item.link,\r\n        }\r\n    )\r\n}\r\nexport function directoryItemRenderer(item) {\r\n    const contentEl = el(\"span\", item, {\r\n        \"class\": \"underline-target\"\r\n    })\r\n    return el(\"li\", contentEl, {\r\n        \"class\": \"underline-through\",\r\n        tabindex: 0,\r\n    })\r\n}\r\n\r\nconst mainEl           = document.querySelector(\"main\")\r\nconst articleEl        = document.querySelector(\"article\")\r\nconst articleList      = mainEl.querySelector(\"#article-list\")\r\nconst dirDescriptionEl = mainEl.querySelector(\"#directory-description\")\r\nconst pagingComponent  = mainEl.querySelector(\"paging-view\")\r\n\r\nexport default function indexRender(indexing, itemResolver) {\r\n    const {current, total} = indexing\r\n    pagingComponent.setPage(current, total)\r\n\r\n    // --- --- --- --- --- ---\r\n    \r\n    // reset directory description\r\n    dirDescriptionEl.innerHTML = \"\"\r\n    if (\"directoryDescription\" in indexing) {\r\n        articleRender(dirDescriptionEl, indexing.directoryDescription)\r\n    }\r\n\r\n    // reset articleList content\r\n    articleList.innerHTML = \"\"\r\n    indexing.content\r\n        .map(itemResolver)\r\n        .forEach(el =>\r\n            articleList.appendChild(el)\r\n        )\r\n\r\n    // set keyboard event\r\n    articleList.querySelectorAll(\"[tabindex='0']\").forEach((el) => {\r\n        el.onkeydown = keydownEvent(el)\r\n    })\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    articleEl.style.display = \"none\"\r\n    mainEl.style.display = \"block\"\r\n\r\n    // return to the top\r\n    document.body.scrollTop = 0\r\n    document.documentElement.scrollTop = 0\r\n}\r\n","import pageController from \"../components/paging.js\"\r\nimport { fetchJSON, fetchMD } from \"./fetchResources.js\"\r\nimport articleRender from \"./articleRenderer.js\"\r\nimport indexRender, { newestItemRenderer, directoryItemRenderer } from \"./indexRenderer.js\"\r\n\r\nexport async function hashChangeEvent(_) {\r\n    const mainEl = document.querySelector(\"main\")\r\n    const articleEl = document.querySelector(\"article\")\r\n    const indexDirPath = \"./.index/\"\r\n\r\n    if (!location.hash) {\r\n        pathManager.homepage()\r\n        return\r\n    }\r\n    const hash = location.hash.slice(1)\r\n    mainEl.classList.add(\"disabled\")\r\n\r\n    if (pathManager.isIn.newestPage()) {\r\n        // open newest page\r\n        const indexPath = indexDirPath\r\n            + \"newest_\"\r\n            + pageController.current()\r\n        const newestIndex = await fetchJSON(indexPath)\r\n        if (!newestIndex) return\r\n        indexRender(newestIndex, newestItemRenderer)\r\n    } else\r\n    if (pathManager.isIn.directory()) {\r\n        // open directory\r\n        const splited = hash.split(\"/\").slice(0, -1)\r\n        const indexFilePath = indexDirPath\r\n            + splited.join(\"+\") + \"_\"\r\n            + pageController.current()\r\n        const index = await fetchJSON(indexFilePath)\r\n        if (!index) return\r\n        indexRender(index, directoryItemRenderer)\r\n    } else\r\n    if (pathManager.isIn.article()) {\r\n        // open article\r\n        const articleContent = await fetchMD(\"./\" + hash)\r\n        if (!articleContent) return\r\n        mainEl.style.display = \"none\"\r\n        articleRender(articleEl, articleContent)\r\n    } else {\r\n        pathManager.homepage()\r\n    }\r\n\r\n    mainEl.setAttribute(\"data-is-root\", hash === \"static/\")\r\n    mainEl.classList.remove(\"disabled\")\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", hashChangeEvent)\r\nwindow.addEventListener(\"load\", hashChangeEvent)\r\n\r\nconst homepagePath = \"static/\"\r\nconst newestPath = \"newest/\"\r\nconst pathManager = {\r\n    homepage() {\r\n        location.hash = homepagePath\r\n    },\r\n\r\n    open(name) {\r\n        location.hash += name\r\n    },\r\n    jumpTo(target) {\r\n        location.hash = target\r\n    },\r\n    parent() {\r\n        if (this.isIn.root() || this.isIn.newestPage()) {\r\n            return homepagePath\r\n        }\r\n        const splited = location.hash.slice(1).split(\"/\")\r\n        if (this.isIn.directory()) {\r\n            return splited.slice(0, -2).join(\"/\") + \"/\"\r\n        }\r\n        if (this.isIn.article()) {\r\n            return splited.slice(0, -1).join(\"/\") + \"/\"\r\n        }\r\n        throw new Error(\"Unexpected hash: \" + location.hash)\r\n    },\r\n    isIn: {\r\n        root() {\r\n            return location.hash === \"#\" + homepagePath\r\n        },\r\n        newestPage() {\r\n            return location.hash === \"#\" + newestPath\r\n        },\r\n        directory() {\r\n            return location.hash.startsWith(\"#static\")\r\n                && location.hash.endsWith(\"/\")\r\n        },\r\n        article() {\r\n            return location.hash.startsWith(\"#static\")\r\n                && location.hash.endsWith(\".md\")\r\n        }\r\n    }\r\n}\r\nexport default pathManager\r\n","import { hashChangeEvent } from \"../scripts/pathManager.js\"\r\nimport el from \"../utils/dom/el.js\"\r\nimport languageSelector from \"../utils/languageSelector.js\"\r\n\r\nclass PageController {\r\n    #pageList = [1]\r\n\r\n    current = () => this.#pageList[this.length() - 1]\r\n    next    = () => this.#pageList[this.length() - 1] += 1\r\n    prev    = () => this.#pageList[this.length() - 1] -= 1\r\n    jumpTo  = targetPage => this.#pageList[this.length() - 1] = Number(targetPage)\r\n    length  = () => this.#pageList.length\r\n\r\n    back() {\r\n        // called when \"popstate\" event emited\r\n        this.#pageList.pop()\r\n        if (!this.#pageList.length) {\r\n            this.#pageList.push(1)\r\n        }\r\n    }\r\n    open() {\r\n        // called when enter directory\r\n        this.#pageList.push(1)\r\n    }\r\n}\r\nconst pageController = new PageController()\r\nexport default pageController\r\n\r\n// --- --- --- --- --- ---\r\n\r\nconst btn = content => el(\"button\",\r\n    el(\"span\", content, {\r\n        \"class\": \"underline-target\"\r\n    }), {\r\n    \"class\": \"icon-btn underline-side\"\r\n})\r\n\r\nclass PagingView extends HTMLElement {\r\n    #elements = {}\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.#elements.input = el(\"input\", \"1\", {\r\n            type: \"number\",\r\n            min: 1,\r\n            max: 1,\r\n        })\r\n        this.#elements.maxPage = el(\"span\", \"1\")\r\n        const prevBtn = this.#elements.prevBtn = btn(languageSelector(\"上一页\", \"Prev\"))\r\n        const nextBtn = this.#elements.nextBtn = btn(languageSelector(\"下一页\", \"Next\"))\r\n        prevBtn.id = \"prev-btn\"; prevBtn.classList.add(\"left\")\r\n        nextBtn.id = \"next-btn\"; nextBtn.classList.add(\"right\")\r\n\r\n        const labelEl = el(\"label\", [\r\n            this.#elements.input,\r\n            el(\"text\", \"/\"),\r\n            this.#elements.maxPage,\r\n        ])\r\n        this.#appendEvent()\r\n        for (const el of [prevBtn, labelEl, nextBtn]) {\r\n            this.appendChild(el)\r\n        }\r\n    }\r\n    #appendEvent() {\r\n        this.#elements.input.addEventListener(\"keydown\", e => {\r\n            if (e.key !== \"Enter\") {\r\n                return\r\n            }\r\n            const targetPageStr = e.target.value\r\n            if (!/^\\d+$/.test(targetPageStr)) {\r\n                e.target.value = 1\r\n                return\r\n            }\r\n            const targetPage = Number(targetPageStr)\r\n            if (!(targetPage > 0 && targetPage <= this.#elements.input.max)) {\r\n                e.target.value = 1\r\n                return\r\n            }\r\n            pageController.jumpTo(targetPage)\r\n            hashChangeEvent()\r\n        })\r\n        this.#elements.prevBtn.addEventListener(\"click\", () => {\r\n            if (pageController.current() > 0) {\r\n                pageController.prev()\r\n                hashChangeEvent()\r\n            }\r\n        })\r\n        this.#elements.nextBtn.addEventListener(\"click\", () => {\r\n            if (pageController.current() < this.#elements.input.max) {\r\n                pageController.next()\r\n                hashChangeEvent()\r\n            }\r\n        })\r\n    }\r\n    setPage(current, total) {\r\n        let isFirstPage = false\r\n        let isLastPage  = false\r\n        let isOnlyPage  = false\r\n        if (total === 1) {\r\n            isOnlyPage = true\r\n        } else {\r\n            if (current === 1) {\r\n                isFirstPage = true\r\n            }\r\n            if (current === total) {\r\n                isLastPage = true\r\n            }\r\n        }\r\n        this.#elements.prevBtn.disabled = isOnlyPage || isFirstPage\r\n        this.#elements.nextBtn.disabled = isOnlyPage || isLastPage\r\n        this.#elements.maxPage.textContent = total\r\n        this.#elements.input.value = current\r\n        this.#elements.input.max   = total\r\n        this.classList.toggle(\"hidden\", isOnlyPage)\r\n    }\r\n}\r\ncustomElements.define(\"paging-view\", PagingView)\r\n","import pageController from \"../components/paging.js\"\r\nimport pathManager from \"./pathManager.js\"\r\n\r\nconst mainEl       = document.querySelector(\"main\")\r\nconst parentDirBtn = mainEl.querySelector(\"#previous-dir li\")\r\nconst articleList  = mainEl.querySelector(\"#article-list\")\r\n\r\nparentDirBtn.addEventListener(\"click\", () => {\r\n    pageController.back()\r\n    pathManager.jumpTo(pathManager.parent())\r\n})\r\narticleList.addEventListener(\"click\", e => {\r\n    const target = e.target\r\n\r\n    if (target === articleList) {\r\n        // when click on the `articleList` itself\r\n        // ignore this event.\r\n        return\r\n    }\r\n\r\n    if (!target.getAttribute(\"data-target-blog\")) {\r\n        if (target.innerText.endsWith(\"/\")) {\r\n            // open directory\r\n            pageController.open()\r\n        }\r\n        pathManager.open(target.innerText)\r\n    } else {\r\n        // in `newest` page\r\n        pageController.open()\r\n        pathManager.jumpTo(target.getAttribute(\"data-target-blog\"))\r\n    }\r\n})\r\n","import importStyle from \"./style.js\"\r\n\r\nexport default async function(name) {\r\n    await import(`../../components/${name}.js`)\r\n    importStyle(`./dist/chunks/${name}.min.css`)\r\n}\r\n","import \"./styles/style.css\"\r\n\r\nimport \"./scripts/mainManager.js\"\r\nimport config from \"../build.config.js\"\r\nimport pageController from \"./components/paging.js\"\r\nimport keydownEvent from \"./utils/dom/keydownEvent.js\"\r\nimport importComponent from \"./scripts/importers/component.js\"\r\n\r\nif (config.enableFab) {\r\n    importComponent(\"fab\")\r\n}\r\nif (config.enableCatalog) {\r\n    importComponent(\"catalog\")\r\n}\r\n\r\nconst lightBtn = document.querySelector(\"#light-btn\")\r\nconst darkBtn = document.querySelector(\"#dark-btn\")\r\nlightBtn.onkeydown = keydownEvent(lightBtn)\r\ndarkBtn.onkeydown = keydownEvent(darkBtn)\r\n\r\nwindow.addEventListener(\"popstate\", () => {\r\n    if (location.hash.endsWith(\"/\")) {\r\n        // in a directory\r\n        pageController.back()\r\n    }\r\n})\r\nwindow.addEventListener(\"message\", e => {\r\n    if (e.origin != \"null\") {\r\n        return\r\n    }\r\n    const { id, height } = e.data\r\n    const targetIframeEl = document.getElementById(id)\r\n    targetIframeEl.style.height = height + \"px\"\r\n})\r\n\r\nif (\"serviceWorker\" in navigator) {\r\n    // if support service worker, register\r\n    navigator.serviceWorker\r\n        .register(\"./sw.js\")\r\n        .catch(function(error) {\r\n            // registration failed\r\n            console.error(\"Registration failed with \" + error);\r\n        })\r\n}\r\n"],"names":["controller","async","fetchJSON","path","abort","AbortController","fetch","signal","then","json","res","catch","err","console","log","error","hljs","importHighlighter","languageList","Set","importLangDefs","languageListArr","Array","from","langDefImporters","filter","name","getLanguage","map","lang","__variableDynamicImportRuntime0__","toLowerCase","Promise","all","langDefs","forEach","defModule","index","def","default","registerLanguage","highlightAll","size","import","module","importStyle","linkEl","document","createElement","rel","href","head","appendChild","config","homepage","title","footer","language","enableFab","fabOrdering","enableCatalog","enableRSS","rssIgnoreDir","enableNewest","newestIgnoreDir","pageCapacity","RSSCapacity","previewPort","katexOptions","echartsOptions","tooltip","show","backgroundColor","katex","eventbus","events","Map","emit","args","targetEvent","this","get","handler","apply","on","push","set","off","length","delete","handlerIndex","indexOf","splice","langList","languageSelector","langName","Object","entries","selections","warn","languageSelectorCreator","globalOptions","echarts","importChart","importComponent","chartElList","querySelectorAll","darkmodeObserver","MutationObserver","_","el","dispose","chartRenderer","resizeEvent","getInstanceByDom","resize","renderMode","body","classList","contains","chartInst","init","currentOptions","__ChartOptions__","globalOptionsCloned","assign","finalOptions","setOption","chartOptionResolver","options","libsToImport","ignoredProps","key","includes","components","add","item","series","charts","type","importChartRenderer","chartOptions","loadError","loadErrText","textContent","importChartLibs","chartsToImport","componentsToImport","concat","echartsLibs","use","observe","attributes","attributeFilter","window","addEventListener","callback","waitMillisecond","timer","clearTimeout","setTimeout","debounce","propToString","props","val","undefined","toString","replaceAll","htmlValueFormater","join","tagName","content","globalThis","createTextNode","targetEl","Function","setAttribute","propSetter","childEl","HTMLElement","Error","contentSetter","getInterval","text","endSign","intervalText","isEscape","ch","slice","substr","KeyToken_TagName_map","PairedParenMap","TextToken","constructor","toHTML","KeyToken","tagSign","tag","realTagName","className","split","__ContainsFormula__","elOption","class","parseEntry","LinkToken","address","displayContent","startsWith","target","PhoneticToken","notation","ignoredLeftParenthesis","ignoredRightParenthesis","notationEl","source","tokens","getFirstChar","charAt","substring","getSpecialTokenClass","tokenSign","targetTokenType","textTerm","keyTerm","keyStart","isInKey","has","nextCh","specialTokenSign","pairedTokenSign","removedContent","hiddenContent","parser","resultHTML","token","htmlEntityReplace","Headline","splited","numberSignStr","numberSignCount","rawContent","inlineResolver","id","static","match","Para","trimStart","inline","Quote","children","innerNodes","node","Divider","List","isOrdered","Boolean","orderedPattern","getContent","child","childrenHTML","unorderedPattern","line","Table","headerCells","bodyRows","tableHeaderCell","tableBodyCell","tableHeaderRow","row","tableBodyRow","tableHeader","tableBody","MediaNode","description","mdText","containerGenerator","patternGenerator","identifierSign","endsWith","replaceContentGenerator","srcUrlResolver","rawUrl","actualUrl","location","hash","__ResourcePath__","Image","imageEl","src","alt","loading","tabindex","onclick","e","open","onerror","Audio","audioEl","controls","Video","videoEl","isIframePattern","Iframe","iframeEl","sandbox","CodeBlock","append","isPlaintext","langClass","__LanguageList__","toUpperCase","codeEl","DetailsBlock","summary","mdResolver","summaryEl","detailsEl","childrenEl","FormulaBlock","ChartBlock","_description","__ChartOptionList__","chartEl","IframeBlock","__IframeCounter__","injectedCodes","srcdoc","getIndent","indentCount","spaceCount","listResolver","currentLine","lines","currentIndent","currentNode","isListPattern","nextLine","shift","nextIndent","isNextOrdered","unshift","quoteResolver","firstLine","quotedContent","l","pattern","tableLineConverter","tableLine","trim","tableResolver","headerText","contentLines","contentRows","blockResolverGenerator","targetClass","codeResolver","chartResolver","detailsResolver","formulaResolver","iframeResolver","blockResolver","getLines","nodes","keydownEvent","click","backToTop","scrollTop","documentElement","articleEl","querySelector","emptyArticlePlaceHolder","articleRender","structure","headlineItems","cloneNode","level","getHeadlines","resultNodes","innerHTML","style","display","onkeydown","isContainsFormula","renderFormula","texString","render","ParseError","message","replace","katexModule","importTexRenderer","newestItemRenderer","createDate","Date","timestamp","dateEl","Intl","DateTimeFormat","format","titleEl","link","directoryItemRenderer","contentEl","toggle","remove","mainEl","articleList","dirDescriptionEl","pagingComponent","indexRender","indexing","itemResolver","current","total","setPage","directoryDescription","hashChangeEvent","indexDirPath","pathManager","isIn","newestPage","indexPath","pageController","newestIndex","directory","indexFilePath","article","articleContent","status","DOMException","fetchMD","homepagePath","jumpTo","parent","root","pageList","next","prev","targetPage","Number","back","pop","btn","PagingView","elements","super","input","min","max","maxPage","prevBtn","nextBtn","labelEl","appendEvent","targetPageStr","value","test","isFirstPage","isLastPage","isOnlyPage","disabled","customElements","define","parentDirBtn","getAttribute","innerText","lightBtn","darkBtn","origin","height","data","getElementById","navigator","serviceWorker","register"],"mappings":"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"}