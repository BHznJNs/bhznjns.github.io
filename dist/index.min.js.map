{"version":3,"file":"index.min.js","sources":["../src/scripts/fetchResources.js","../src/scripts/importers/highlight.js","../src/scripts/importers/style.js","../src/scripts/importers/katex.js","../src/utils/eventbus/inst.js","../src/utils/eventbus/index.js","../src/utils/mergeObj.js","../src/scripts/importers/charts/echarts.js","../src/scripts/importers/umd.js","../src/scripts/importers/charts/flowchart.js","../src/scripts/importers/charts/sequence.js","../src/scripts/importers/charts/gantt.js","../src/utils/languageSelector.js","../src/scripts/importers/charts/index.js","../src/utils/debounce.js","../src/utils/dom/el.js","../src/utils/markdown/utils/getInterval.js","../src/utils/markdown/inline.js","../src/utils/htmlEntityReplace.js","../src/utils/markdown/node.js","../src/utils/markdown/utils/getIndent.js","../src/utils/markdown/resolvers/listResolver.js","../src/utils/markdown/resolvers/quoteResolver.js","../src/utils/markdown/resolvers/tableResolver.js","../src/utils/markdown/resolvers/blockResolvers.js","../src/utils/markdown/index.js","../src/utils/markdown/utils/getLines.js","../src/utils/dom/keydownEvent.js","../src/utils/dom/backToTop.js","../src/scripts/articleRenderer.js","../src/scripts/indexRenderer.js","../src/scripts/pathManager.js","../src/components/paging.js","../src/scripts/mainManager.js","../src/scripts/importers/component.js","../src/index.js"],"sourcesContent":["let controller = null\r\n\r\nexport async function fetchJSON(path) {\r\n    controller && controller.abort()\r\n    controller = new AbortController()\r\n\r\n    return await fetch(path, { signal: controller.signal })\r\n        .then(async res => {\r\n            const json = await res.json()\r\n            controller = null\r\n            return json\r\n        })\r\n        .catch(err => {\r\n            console.log(\"JSON request error: \" + path)\r\n            console.error(err)\r\n            return null\r\n        })\r\n}\r\n\r\nexport async function fetchMD(path) {\r\n    controller && controller.abort()\r\n    controller = new AbortController()\r\n\r\n    return await fetch(path, { signal: controller.signal })\r\n        .then(async res => {\r\n            if (res.status != 200) {\r\n                throw res.status\r\n            }\r\n            const text = await res.text()\r\n            controller = null\r\n            return text\r\n        })\r\n        .catch(err => {\r\n            if (typeof err != \"number\") {\r\n                console.error(err)\r\n                return null\r\n            }\r\n\r\n            switch (err) {\r\n                // render error code in markdown format\r\n                case 404:\r\n                    return \"# 404 Not Found\"\r\n                case 500:\r\n                    return \"# 500 Internal Server Error\"\r\n                case DOMException:\r\n                    console.error(err)\r\n                    break\r\n                default:\r\n                    console.log(\"Markdown request error: \" + path)\r\n                    console.error(err)\r\n                    return \"# Unexpected request error\"\r\n            }\r\n        })\r\n}\r\n","let hljs = null\r\n\r\nexport default async function(languageList=new Set()) {\r\n    function importLangDefs() {\r\n        // dynamically import language definitions\r\n        const languageListArr = Array.from(languageList)\r\n        const langDefImporters = languageListArr\r\n            .filter(name => !hljs.getLanguage(name))\r\n            .map(lang => import(`../../libs/highlight-es/languages/${lang.toLowerCase()}.js`))\r\n\r\n        Promise.all(langDefImporters)\r\n            .then(langDefs => langDefs.forEach((defModule, index) => {\r\n                const name = languageListArr[index]\r\n                const def  = defModule.default\r\n                hljs.registerLanguage(name, def)\r\n            }))\r\n            .then(() => {\r\n                const seletor = \"pre.code-block code\"\r\n                document.querySelectorAll(seletor)\r\n                    .forEach(hljs.highlightElement)\r\n            })\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n    if (!languageList.size) {\r\n        // no code blocks\r\n        return\r\n    }\r\n    if (hljs) {\r\n        importLangDefs()\r\n        return\r\n    }\r\n\r\n    // import highlight.js itself\r\n    import(\"../../libs/highlight-es/highlight.min.js\")\r\n        .then(module => hljs = module.default)\r\n        .then(importLangDefs)\r\n        .catch(err => console.error(err))\r\n}","export default function(path) {\r\n    const linkEl = document.createElement(\"link\")\r\n    linkEl.rel  = \"stylesheet\"\r\n    linkEl.href = path\r\n    document.head.appendChild(linkEl)\r\n}\r\n","import importStyle from \"./style.js\"\r\nimport config from \"../../../build.config.js\"\r\n\r\nlet katex = null\r\nconst { katexOptions } = config\r\n\r\nexport default async function(isContainsFormula=false) {\r\n    function renderFormula() {\r\n        // render all formula element\r\n        document.querySelectorAll(\".math\")\r\n            .forEach(el => {\r\n                const texString = el.textContent\r\n                try {\r\n                    katex.render(texString, el, katexOptions)\r\n                } catch(e) {\r\n                    if (e instanceof katex.ParseError) {\r\n                        // KaTeX can't parse the expression\r\n                        el.innerHTML = (\"Error in LaTeX '\" + texString + \"': \" + e.message)\r\n                            .replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n                    } else {\r\n                        // other error\r\n                        throw e\r\n                    }\r\n                }\r\n            })\r\n    }\r\n\r\n    if (!isContainsFormula) {\r\n        // no formula\r\n        return\r\n    }\r\n    if (katex) {\r\n        renderFormula()\r\n        return\r\n    }\r\n\r\n    // dynamically import katex style and script \r\n    importStyle(\"./dist/libs/katex/katex.min.css\")\r\n    try {\r\n        const katexModule = await import(\"../../libs/katex/katex.min.js\")\r\n        katex = katexModule.default\r\n        renderFormula()\r\n    } catch(e) {\r\n        console.error(e)\r\n    }\r\n}","import EventBus from \"./index.js\"\r\nconst eventbus = new EventBus()\r\nexport default eventbus\r\n","export default class EventBus {\r\n    // A map used to store events and handlers for events\r\n    events = new Map()\r\n\r\n    /**\r\n     * @name emit\r\n     * @description to trigger the handlers for the given event name\r\n     * @param { String | Symbol } name event name\r\n     * @param { Array<any> }      args use `...` to support multi-arg\r\n     */\r\n    emit(name, ...args) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            targetEvent.forEach((handler) => {\r\n                handler.apply(null, args)\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name on\r\n     * @description to add event listener & register the given event handler\r\n     * @param { String | Symbol } name event name\r\n     * @param { EventHandler } handler given handler to given event\r\n     */\r\n    on(name, handler) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            targetEvent.push(handler)\r\n        } else {\r\n            this.events.set(name, [handler])\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name off\r\n     * @description remove the given handler to the given event\r\n     * @param { String | Symbol } name event name\r\n     * @param { EventHandler } handler given handler to given event\r\n     */\r\n    off(name, handler) {\r\n        const targetEvent = this.events.get(name)\r\n\r\n        if (targetEvent) {\r\n            if (targetEvent.length === 1) {\r\n                this.events.delete(name)\r\n            } else {\r\n                const handlerIndex = targetEvent.indexOf(handler)\r\n                targetEvent.splice(handlerIndex, 1)\r\n            }\r\n        }\r\n    }\r\n}","export default function mergeObj(destObj={}, srcObj={}) {\r\n    for (const key of Object.keys(srcObj)) {\r\n        if (!(key in destObj)) {\r\n            destObj[key] = srcObj[key]\r\n            continue\r\n        }\r\n        // for properties that is in the `destObj`\r\n        if (typeof destObj[key] !== \"object\") {\r\n            continue\r\n        }\r\n\r\n        // for object properties\r\n        mergeObj(destObj[key], srcObj[key])\r\n    }\r\n    return destObj\r\n}\r\n","import config from \"../../../../build.config.js\"\r\nimport { loadErrText } from \"./index.js\"\r\nimport debounce from \"../../../utils/debounce.js\"\r\nimport eventbus from \"../../../utils/eventbus/inst.js\"\r\nimport mergeObj from \"../../../utils/mergeObj.js\"\r\n\r\nlet echarts = null\r\nlet importChart = null\r\nlet importComponent = null\r\n\r\nconst globalOptions = config.echartsOptions\r\nconst chartElList = () => document.querySelectorAll(\".echarts-container\")\r\n\r\nfunction chartRenderer(el) {\r\n    const isDarkMode = document.body.classList.contains(\"dark\")\r\n    const renderMode = isDarkMode ? \"another-dark\" : \"light\"\r\n    const chartInst  = echarts.init(el, renderMode)\r\n\r\n    // options merging\r\n    const currentOptions = el.__ChartOptions__\r\n    const globalOptionsCloned = mergeObj({}, globalOptions)\r\n    const finalOptions = mergeObj(globalOptionsCloned, currentOptions)\r\n    chartInst.setOption(finalOptions)\r\n}\r\n\r\nfunction chartOptionResolver(options={}, libsToImport) {\r\n    const ignoredProps = [\r\n        \"color\",\r\n        \"backgroundColor\",\r\n        \"darkMode\",\r\n        \"textStyle\",\r\n        \"aria\",\r\n        \"axisPointer\",\r\n        \"animation\",\r\n        \"animationThreshold\",\r\n        \"animationDuration\",\r\n        \"animationEasing\",\r\n        \"animationDelay\",\r\n        \"animationDurationUpdate\",\r\n        \"animationEasingUpdate\",\r\n        \"animationDelayUpdate\",\r\n        \"stateAnimation\",\r\n        \"blendMode\",\r\n        \"hoverLayerThreshold\",\r\n        \"options\",\r\n        \"useUTC\",\r\n        \"media\",\r\n    ]\r\n\r\n    for (const key in options) {\r\n        if (ignoredProps.includes(key)) {\r\n            continue\r\n        }\r\n        if (key === \"series\") {\r\n            for (const item of options.series) {\r\n                if (!(\"type\" in item)) {\r\n                    continue\r\n                }\r\n                libsToImport.charts.add(item.type)\r\n            }\r\n            continue\r\n        }\r\n\r\n        switch (key) {\r\n            case \"xAxis\":\r\n            case \"yAxis\":\r\n                libsToImport.components.add(\"grid\")\r\n                continue\r\n            case \"radiusAxis\":\r\n            case \"angleAxis\":\r\n                libsToImport.components.add(\"polar\")\r\n                continue\r\n            case \"parallelAxis\":\r\n                libsToImport.components.add(\"parallel\")\r\n                continue\r\n        }\r\n        libsToImport.components.add(key)\r\n    }\r\n}\r\n\r\n// event listeners\r\nconst darkmodeObserver = new MutationObserver(_ => {\r\n    for (const el of chartElList()) {\r\n        // rerender all chart elements to reset color theme\r\n        echarts.dispose(el)\r\n        chartRenderer(el)\r\n    }\r\n})\r\nconst resizeEvent = () => chartElList()\r\n    .forEach(el => echarts.getInstanceByDom(el).resize())\r\n\r\n\r\nexport default async function() {\r\n    function loadError(err) {\r\n        console.error(err)\r\n        chartElList().forEach(el =>\r\n            el.textContent = loadErrText)\r\n    }\r\n    function importChartLibs(chartOptions) {\r\n        const libsToImport = {\r\n            charts: new Set(),\r\n            components: new Set(),\r\n        }\r\n        chartOptionResolver(globalOptions, libsToImport)\r\n        chartOptions.forEach(options =>\r\n            chartOptionResolver(options, libsToImport))\r\n\r\n        const chartsToImport = Array.from(libsToImport.charts).map(importChart)\r\n        const componentsToImport = Array.from(libsToImport.components).map(importComponent)\r\n        Promise.all(chartsToImport.concat(componentsToImport))\r\n            .then(echartsLibs => {\r\n                echarts.use(echartsLibs)\r\n                chartElList().forEach(chartRenderer)\r\n            })\r\n            .catch(loadError)\r\n    }\r\n\r\n    const chartOptions = []\r\n    for (const el of chartElList()) {\r\n        chartOptions.push(el.__ChartOptions__)\r\n    }\r\n\r\n    if (!chartOptions.length) {\r\n        // no chart\r\n        return\r\n    }\r\n    if (echarts) {\r\n        importChartLibs(chartOptions)\r\n        return\r\n    }\r\n    Promise.all([\r\n        import(\"../../../libs/echarts/core.js\"),\r\n        import(\"./echartsAnotherDarkTheme.js\"),\r\n    ])\r\n        .then(([module, darkModule]) => {\r\n            echarts         = module.default\r\n            importChart     = module.importChart\r\n            importComponent = module.importComponent\r\n            const darkTheme = darkModule.default\r\n            echarts.registerTheme(\"another-dark\", darkTheme)\r\n        })\r\n        .then(() => importChartLibs(chartOptions))\r\n        .then(() => {\r\n            const body = document.body\r\n            darkmodeObserver.observe(body, {\r\n                attributes: true,\r\n                attributeFilter: [\"class\"]\r\n            })\r\n\r\n            // resize event listeners\r\n            eventbus.on(\"catalog-toggle\", () => {\r\n                setTimeout(resizeEvent, 1000)\r\n            })\r\n            window.addEventListener(\"resize\",\r\n                debounce(resizeEvent, 200))\r\n        })\r\n        .catch(loadError)\r\n}","export default function(path, name) {\r\n    const scriptEl = document.createElement(\"script\")\r\n    scriptEl.src   = path\r\n    scriptEl.type  = \"text/javascript\"\r\n    document.head.appendChild(scriptEl)\r\n    return new Promise((resolve, reject) => {\r\n        scriptEl.onload = () => {\r\n            const localModuleObj = globalThis[name]\r\n            delete globalThis[name]\r\n            resolve(localModuleObj)\r\n        }\r\n        scriptEl.onerror = reject\r\n    })\r\n}\r\n","import { loadErrText, renderErrText } from \"./index.js\"\r\nimport umdLoader from \"../umd.js\"\r\nimport config from \"../../../../build.config.js\"\r\n\r\nlet flowchart        = null\r\nglobalThis.raphael   = null // dependence for flowchart\r\nconst { flowchartOptions } = config\r\nconst chartElList    = () => document.querySelectorAll(\".flowchart-container\")\r\n\r\nexport default async function() {\r\n    function flowChartRender() {\r\n        for (const el of chartElList()) {\r\n            const chartContent = el.__ChartContent__\r\n            const chartInst = flowchart.parse(chartContent)\r\n            try {\r\n                chartInst.drawSVG(el, flowchartOptions)\r\n            } catch(_) {\r\n                el.textContent = renderErrText\r\n            }\r\n        }\r\n    }\r\n    if (flowchart) {\r\n        flowChartRender()\r\n        return\r\n    }\r\n\r\n    try {\r\n        globalThis.raphael = await umdLoader(\"./dist/libs/flowchart.js/raphael.min.js\", \"raphael\")\r\n        flowchart = await umdLoader(\"./dist/libs/flowchart.js/flowchart.min.js\", \"flowchart\")\r\n    } catch(err) {\r\n        console.error(err)\r\n        chartElList().forEach(el =>\r\n            el.textContent = loadErrText)\r\n    }\r\n    flowChartRender()\r\n}\r\n","import { loadErrText, renderErrText } from \"./index.js\"\r\n\r\nlet SequenceDiagram = null\r\nconst chartElList = () => document.querySelectorAll(\".sequencechart-container\")\r\n\r\nexport default async function() {\r\n    function renderItem(el) {\r\n        const chartContent = el.__ChartContent__\r\n        const diagram = new SequenceDiagram(chartContent)\r\n        el.appendChild(diagram.dom())\r\n    }\r\n    function sequenceChartRenderer() {\r\n        for (const el of chartElList()) {\r\n            try {\r\n                renderItem(el)\r\n            } catch(err) {\r\n                console.error(err)\r\n                el.textContent = renderErrText\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    if (SequenceDiagram) {\r\n        sequenceChartRenderer()\r\n        return\r\n    }\r\n\r\n    import(\"../../../libs/sequence-diagram/sequence-diagram-web.mjs\")\r\n        .then(module => SequenceDiagram = module.SequenceDiagram)\r\n        .then(sequenceChartRenderer)\r\n        .catch(err => {\r\n            console.error(err)\r\n            chartElList().forEach(el =>\r\n                el.textContent = loadErrText)\r\n        })\r\n}\r\n","import { loadErrText } from \"./index.js\"\r\nimport importStyle from \"../style.js\"\r\nimport config from \"../../../../build.config.js\"\r\n\r\nlet FrappGantt = null\r\nconst { language, ganttOptions } = config\r\nconst chartElList = () => document.querySelectorAll(\".ganttchart-container\")\r\n\r\nif (!(\"language\" in ganttOptions)) {\r\n    // set language of gantt charts as default\r\n    ganttOptions.language = language\r\n}\r\n\r\nexport default async function() {\r\n    function ganttChartRenderer() {\r\n        for (const el of chartElList()) {\r\n            const chartContent = el.__ChartContent__\r\n            new FrappGantt(el, chartContent, ganttOptions)\r\n        }\r\n    }\r\n\r\n    if (FrappGantt) {\r\n        ganttChartRenderer()\r\n        return\r\n    }\r\n\r\n    importStyle(\"./dist/libs/frappe-gantt/frappe-gantt.min.css\")\r\n    import(\"../../../libs/frappe-gantt/frappe-gantt.min.js\")\r\n        .then(module => FrappGantt = module.default)\r\n        .then(ganttChartRenderer)\r\n        .catch(err => {\r\n            console.error(err)\r\n            chartElList().forEach(el =>\r\n                el.textContent = loadErrText)\r\n        })\r\n}\r\n","import config from \"../../build.config.js\"\r\n\r\nconst currentLang = config.language\r\nconst langList = [\"zh\", \"en\"]\r\nfunction languageSelectorCreator(lang) {\r\n    for (const [index, langName] of Object.entries(langList)) {\r\n        if (lang === langName) {\r\n            return (...selections) => selections[index]\r\n        }\r\n    }\r\n    console.warn(\"Unexpected language: \" + lang)\r\n    // default returns English text\r\n    return (...selections) => selections[1]\r\n}\r\nconst languageSelector = languageSelectorCreator(currentLang)\r\nexport default languageSelector\r\n","import importEcharts from \"./echarts.js\"\r\nimport importFlowchart from \"./flowchart.js\"\r\nimport importSequenceChart from \"./sequence.js\"\r\nimport importGantt from \"./gantt.js\"\r\nimport languageSelector from \"../../../utils/languageSelector.js\"\r\n\r\nconst chartMethodMap = new Map([\r\n    [\"echarts\"       , importEcharts],\r\n    [\"flow-chart\"    , importFlowchart],\r\n    [\"sequence-chart\", importSequenceChart],\r\n    [\"gantt-chart\"   , importGantt],\r\n])\r\n\r\nexport const loadErrText   = languageSelector(\"图表加载失败\", \"Chart load error\")\r\nexport const renderErrText = languageSelector(\"图表渲染失败\", \"Chart render error\")\r\n\r\nexport default async function(chartTypeList=new Set()) {\r\n    for (const type of chartTypeList) {\r\n        if (!chartMethodMap.has(type)) {\r\n            console.error(\"Unknown chart type: \" + type)\r\n            continue\r\n        }\r\n        const targetChartLoadMethod = chartMethodMap.get(type)\r\n        await targetChartLoadMethod()\r\n    }\r\n}\r\n","export default function(callback, waitMillisecond) {\r\n    let timer = null\r\n\r\n    return function(...args) {\r\n        if (timer) {\r\n            clearTimeout(timer)\r\n        }\r\n\r\n        timer = setTimeout(() => {\r\n            return callback(...args)\r\n        }, waitMillisecond)\r\n    }\r\n}","function propSetter(el, props) {\r\n    if (!props) {\r\n        return\r\n    }\r\n    for (const [key, val] of Object.entries(props)) {\r\n        if (val === undefined) {\r\n            continue\r\n        }\r\n        if (val instanceof Function) {\r\n            el[key] = val\r\n        } else {\r\n            el.setAttribute(key, val)\r\n        }\r\n    }\r\n}\r\n\r\nfunction propToString(props) {\r\n    // input: {prop: \"value\"}\r\n    // output: \"prop='value'\"\r\n    const htmlValueFormater = val => val.toString().replaceAll(\"\\\"\", \"&quot;\") \r\n    const resultPropStr = Object.entries(props)\r\n        .filter(([_, val]) => val != undefined)\r\n        .map(([key, val]) => `${key}=\"${htmlValueFormater(val)}\"`)\r\n        .join(\" \")\r\n    return resultPropStr\r\n}\r\n\r\nfunction contentSetter(el, content) {\r\n    if (content instanceof Array) {\r\n        // array of html element\r\n        for (const childEl of content) {\r\n            el.appendChild(childEl)\r\n        }\r\n    } else if (content instanceof HTMLElement) {\r\n        // single element\r\n        el.appendChild(content)\r\n    } else if (typeof content === \"string\") {\r\n        // common text\r\n        el.textContent = content\r\n    } else {\r\n        throw Error(\"Unexpected element content: \" + content)\r\n    }\r\n}\r\n\r\nexport default function el(tagName, content=\"\", props=null) {\r\n    if (\"document\" in globalThis) {\r\n        // in browser\r\n        if (tagName === \"text\") {\r\n            return document.createTextNode(content)\r\n        }\r\n\r\n        const targetEl = document.createElement(tagName)\r\n        propSetter(targetEl, props)\r\n        contentSetter(targetEl, content)\r\n        return targetEl\r\n    } else {\r\n        // in node.js\r\n        if (content instanceof Array) {\r\n            content = content.join(\"\")\r\n        }\r\n        switch (tagName) {\r\n            case \"text\":\r\n                return content\r\n            case \"hr\":\r\n            case \"br\":\r\n                return `<${tagName}>`\r\n            case \"img\":\r\n            case \"input\":\r\n                return `<${tagName} ${props ? propToString(props) : \"\"}>`\r\n        }\r\n        return `<${tagName}${props ? \" \" + propToString(props) : \"\"}>${content}</${tagName}>`\r\n    }\r\n}\r\n","// (\"abc]\", \"]\") -> \"abc\"\r\nexport default function getInterval(text, endSign) {\r\n    if (!text.includes(endSign)) {\r\n        return null\r\n    }\r\n\r\n    let intervalText = \"\"\r\n    let isEscape = false\r\n\r\n    while (text.length) {\r\n        const ch = text.slice(0, 1)\r\n        text = text.substr(1)\r\n\r\n        if (ch === \"\\\\\") {\r\n            isEscape = !isEscape\r\n            continue\r\n        }\r\n        if (ch === endSign && !isEscape) {\r\n            break\r\n        }\r\n        intervalText += ch\r\n        isEscape = false\r\n    }\r\n\r\n    return intervalText\r\n}\r\n","import el from \"../dom/el.js\"\r\nimport htmlEntityReplace from \"../htmlEntityReplace.js\"\r\nimport getInterval from \"./utils/getInterval.js\"\r\n\r\n// identifier character to HTML tag\r\nconst KeyToken_TagName_map = new Map([\r\n    [\"#\", \"strong\"],\r\n    [\"`\", \"code\"],\r\n    [\"_\", \"u\"],\r\n    [\"/\", \"i\"],\r\n    [\"-\", \"del\"],\r\n    [\":\", \"span.dim\"],\r\n    [\",\", \"sub\"],\r\n    [\"'\", \"sup\"],\r\n    [\"$\", \"span.math\"],\r\n])\r\n\r\nconst PairedParenMap = new Map([\r\n    [\"[\", \"]\"],\r\n    [\"{\", \"}\"],\r\n])\r\n\r\n// --- --- --- --- --- ---\r\n\r\nlet katexRenderer = null\r\nif (typeof window === \"undefined\") {\r\n    const renderModule = await import(\"../../../builder/utils/renderer/index.js\")\r\n    katexRenderer = content => renderModule.render(content, \"katex\")\r\n}\r\n\r\nclass TextToken {\r\n    constructor(content) {\r\n        this.content = content\r\n    }\r\n    toHTML = () => el(\"text\", this.content)\r\n}\r\nclass KeyToken {\r\n    constructor(tagSign, content) {\r\n        const tag = KeyToken_TagName_map.get(tagSign)\r\n        if (tag.includes(\".\")) {\r\n            const [realTagName, className] = tag.split(\".\")\r\n            this.tagName = realTagName\r\n            this.className = className\r\n        } else {\r\n            this.tagName = tag\r\n        }\r\n        this.content = content\r\n\r\n        if (this.className === \"math\" && typeof window === \"object\") {\r\n            // set this global variable to import\r\n            // the math formula renderer module\r\n            globalThis.__ContainsFormula__ = true\r\n        }\r\n    }\r\n\r\n    toHTML() {\r\n        if (this.className === \"math\" && typeof window === \"undefined\") {\r\n            // for katex rendering in node.js\r\n            const filename = katexRenderer(this.content)\r\n            const formulaImage = el(\"img\", \"\", {\r\n                src: \"./\" + filename\r\n            })\r\n            const container = el(\"span\", formulaImage, {\r\n                \"class\": \"math\"\r\n            })\r\n            return container\r\n        }\r\n        const elOption = this.className === undefined ? null : {\"class\": this.className}\r\n        const thisEl = el(this.tagName, parseEntry(this.content), elOption)\r\n        return thisEl\r\n    }\r\n}\r\n\r\nclass LinkToken {\r\n    constructor(content, address) {\r\n        this.content = content\r\n        this.address = address\r\n    }\r\n\r\n    toHTML() {\r\n        const displayContent = parseEntry(this.content)\r\n        if (this.address.startsWith(\"http\")) {\r\n            // internet links\r\n            return el(\"a\", displayContent, {\r\n                href: this.address,\r\n                target: \"_blank\"\r\n            })\r\n        }\r\n\r\n        // static resources or links\r\n        const actualAddress = \"static/\" + this.address\r\n        return el(\"a\", displayContent, {\r\n            href: \"#\" + actualAddress\r\n        })\r\n    }\r\n}\r\nclass PhoneticToken {\r\n    constructor(content, notation) {\r\n        this.content  = content\r\n        this.notation = notation\r\n    }\r\n    toHTML() {\r\n        const ignoredLeftParenthesis = el(\"rp\", \"(\")\r\n        const ignoredRightParenthesis = el(\"rp\", \")\")\r\n        const notationEl = el(\"rt\", this.notation)\r\n\r\n        const content = parseEntry(this.content).concat([\r\n            ignoredLeftParenthesis,\r\n            notationEl,\r\n            ignoredRightParenthesis,\r\n        ])\r\n        return el(\"ruby\", content, {\r\n            \"data-notation\": this.notation\r\n        })\r\n    }\r\n}\r\n\r\n// --- --- --- --- --- ---\r\n\r\nfunction parser(source) {\r\n    function getFirstChar() {\r\n        const ch = source.charAt(0)\r\n        source = source.substring(1)\r\n        return ch\r\n    }\r\n    function getSpecialTokenClass(tokenSign) {\r\n        let targetTokenType\r\n        if (tokenSign === \"[\") {\r\n            targetTokenType = LinkToken\r\n        } else if (tokenSign === \"{\") {\r\n            targetTokenType = PhoneticToken\r\n        } else { /* unreachable */ }\r\n        return targetTokenType\r\n    }\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    const tokens = []\r\n    let textTerm = \"\" // text\r\n    let keyTerm  = \"\" // inline style content\r\n    let keyStart = \"\"\r\n    let isEscape = false\r\n    let isInKey  = false\r\n\r\n    while (source.length) {\r\n        const ch = getFirstChar()\r\n\r\n        // key rules resolve\r\n        if (KeyToken_TagName_map.has(ch)) {\r\n            if (isEscape) {\r\n                if (isInKey) {\r\n                    keyTerm += ch\r\n                } else {\r\n                    textTerm += ch\r\n                }\r\n                continue\r\n            }\r\n\r\n            if (isInKey && ch != keyStart) {\r\n                keyTerm += ch\r\n                continue\r\n            }\r\n\r\n            const nextCh = getFirstChar()\r\n            if (nextCh != ch) {\r\n                if (isInKey) {\r\n                    keyTerm += ch\r\n                } else {\r\n                    textTerm += ch\r\n                }\r\n                source = nextCh + source\r\n                continue\r\n            }\r\n\r\n            if (isInKey) {\r\n                tokens.push(new KeyToken(ch, keyTerm))\r\n                keyTerm  = \"\"\r\n                keyStart = \"\"\r\n            } else {\r\n                tokens.push(new TextToken(textTerm))\r\n                textTerm = \"\"\r\n                keyStart = ch\r\n            }\r\n            isInKey = !isInKey\r\n            continue\r\n        }\r\n\r\n        // special inline rules resolve\r\n        if ([\"[\", \"{\"].includes(ch) && !isInKey && !isEscape) {\r\n            const specialTokenSign = ch\r\n            const pairedTokenSign = PairedParenMap.get(specialTokenSign)\r\n\r\n            tokens.push(new TextToken(textTerm))\r\n            textTerm = \"\"\r\n\r\n            let removedContent = specialTokenSign\r\n            // the actual displayed content for special inline elements\r\n            const displayContent = getInterval(source, pairedTokenSign)\r\n            if (displayContent != null) {\r\n                removedContent += source.slice(0, displayContent.length + 1)\r\n                source = source.substr(displayContent.length + 1)\r\n\r\n                const nextCh = getFirstChar()\r\n                removedContent += nextCh\r\n                if (nextCh === \"(\") {\r\n                    // the hidden displayed content for special inline elements\r\n                    const hiddenContent = getInterval(source, \")\")\r\n                    if (hiddenContent != null) {\r\n                        let targetTokenType = getSpecialTokenClass(specialTokenSign)\r\n                        source = source.substr(hiddenContent.length + 1)\r\n                        tokens.push(new targetTokenType(displayContent, hiddenContent))\r\n                        continue\r\n                    }\r\n                }\r\n            }\r\n            textTerm += removedContent\r\n            continue\r\n        }\r\n\r\n        // --- --- --- --- --- ---\r\n\r\n        if (ch === \"\\\\\") {\r\n            isEscape = !isEscape\r\n            continue\r\n        }\r\n\r\n        let text\r\n        if (isEscape) {\r\n            text = \"\\\\\" + ch\r\n            isEscape = false\r\n        } else {\r\n            text = ch\r\n        }\r\n\r\n        if (isInKey) {\r\n            keyTerm += text\r\n        } else {\r\n            textTerm += text\r\n        }\r\n    }\r\n\r\n    if (keyTerm.length) {\r\n        tokens.push(new KeyToken(keyStart, keyTerm))\r\n    }\r\n    if (textTerm.length) {\r\n        tokens.push(new TextToken(textTerm))\r\n    }\r\n    return tokens\r\n}\r\n\r\nexport default function parseEntry(source) {\r\n    const tokens = parser(source)\r\n    let resultHTML = tokens\r\n        .filter(token =>\r\n            // remove empty TextToken\r\n            !(token instanceof TextToken && !token.content.length))\r\n        .map(token => token.toHTML())\r\n\r\n    if (typeof window !== \"object\" && source === resultHTML[0]) {\r\n        // for server rendering\r\n        return htmlEntityReplace(source)\r\n    }\r\n    return resultHTML\r\n}\r\n\r\n// test cases\r\n// console.log(parseEntry(\"##bo//itelic//ld##\"))\r\n// console.log(parseEntry(\"##bo[link text](http://www.com)ld##\"))\r\n// console.log(parseEntry(\"::dim[link text](http://www.com)med::\"))\r\n// console.log(parseEntry(\"//ita[link text](http:\\\\/\\\\/www.com)lic//\"))\r\n// console.log(parseEntry(\"``<test>``\"))\r\n// console.log(parseEntry(\"asd[asd\"))\r\n// console.log(parseEntry(\"asd[asd]asd\"))\r\n// console.log(parseEntry(\"asd[asd](asd\"))\r\n// console.log(parseEntry(\"asd[asd](asd)\"))\r\n// console.log(parseEntry(\"asd[##link##](asd)\"))\r\n// console.log(parseEntry(\"##asd[link##](asd)\"))\r\n// console.log(parseEntry(\"##asd[link](asd)##\"))\r\n// console.log(parseEntry(\"::dimmed::\"))\r\n// console.log(parseEntry(\"$$f_c = \\\\frac{1}{abc}$$\"))\r\n","export default source => source\r\n    .replaceAll(\"<\", \"&lt;\")\r\n    .replaceAll(\">\", \"&gt;\")\r\n","import mdResolver from \"./index.js\"\r\nimport inlineResolver from \"./inline.js\"\r\nimport el from \"../dom/el.js\"\r\nimport languageSelector from \"../languageSelector.js\"\r\nimport getInterval from \"./utils/getInterval.js\"\r\n\r\nexport class Headline {\r\n    constructor(content) {\r\n        // \"### test\" -> \"###\"\r\n        const splited = content.split(\" \")\r\n        const numberSignStr = splited[0]\r\n        let numberSignCount = 0\r\n        for (const ch of numberSignStr) {\r\n            if (ch === '#') {\r\n                numberSignCount += 1\r\n            }\r\n        }\r\n\r\n        if (numberSignCount > 6) {\r\n            numberSignCount = 0\r\n        }\r\n\r\n        const rawContent = splited.slice(1).join(\" \")\r\n        this.tagName = \"h\" + numberSignCount\r\n        this.content = inlineResolver(rawContent)\r\n    }\r\n    toHTML() {\r\n        const options = this.id === undefined\r\n            ? null\r\n            : { id: this.id }\r\n        return el(this.tagName, this.content, options)\r\n    }\r\n\r\n    static pattern = source => source.match(/^(#+ )/)\r\n}\r\n\r\nexport class Para {\r\n    tagName = \"p\"\r\n\r\n    constructor(content) {\r\n        this.content = content.trimStart()\r\n    }\r\n    toHTML() {\r\n        const inline = inlineResolver(this.content)\r\n        return el(this.tagName, inline)\r\n    }\r\n}\r\n\r\nexport class Quote {\r\n    tagName = \"blockquote\"\r\n    children = []\r\n\r\n    constructor(children) {\r\n        this.children = children\r\n    }\r\n    toHTML() {\r\n        const innerNodes = this.children\r\n            .map(node => node.toHTML())\r\n        return el(this.tagName, innerNodes)\r\n    }\r\n\r\n    static pattern = source =>\r\n        (source === \">\") || source.startsWith(\"> \")\r\n}\r\n\r\nexport class Divider {\r\n    toHTML = () => el(\"hr\")\r\n    static pattern = source =>\r\n        source.match(/(-\\s*-\\s*-)|(\\*\\s*\\*\\s*\\*)/) && !source.match(/[a-zA-Z0-9]/)\r\n}\r\n\r\nexport class List {\r\n    children = []\r\n\r\n    constructor(content) {\r\n        this.isOrdered = Boolean(List.orderedPattern(content))\r\n        this.tagName   = (this.isOrdered) ? \"ol\" : \"ul\"\r\n        this.children  = [List.getContent(content, this.isOrdered)]\r\n    }\r\n\r\n    push = child => this.children.push(child)\r\n\r\n    toHTML() {\r\n        const childrenHTML = []\r\n        for (const child of this.children) {\r\n            if (typeof child === \"string\") {\r\n                const inline = inlineResolver(child)\r\n                childrenHTML.push(el(\"li\", inline))\r\n            } else {\r\n                childrenHTML.push(child.toHTML())\r\n            }\r\n        }\r\n        return el(this.tagName, childrenHTML)\r\n    }\r\n\r\n    static unorderedPattern = (source) => Boolean(source.match(/^([\\s\\t]*[+-]+ )/))\r\n    static orderedPattern = (source) => Boolean(source.match(/^([\\s\\t]*[0-9]+. )/))\r\n\r\n    static isListPattern = (source) =>\r\n        List.orderedPattern(source) || List.unorderedPattern(source)\r\n\r\n    static getContent(line, isOrdered) {\r\n        if (isOrdered) {\r\n            // \"1. ...\" => \"...\"\r\n            return line.match(/(?<=^([\\s\\t]*[0-9]+. )).+$/g)[0]\r\n        } else {\r\n            // \"- ...\" => \"...\"\r\n            return line.match(/(?<=^([\\s\\t]*[+-]+ )).+$/g)[0]\r\n        }\r\n    }\r\n}\r\n\r\nexport class Table {\r\n    headerCells = [\"\"]   // [string]\r\n    bodyRows    = [[\"\"]] // [[string]]\r\n\r\n    constructor(headerCells, bodyRows) {\r\n        this.headerCells = headerCells\r\n        this.bodyRows    = bodyRows\r\n    }\r\n\r\n    #tableHeaderCell = content => el(\"th\", content)\r\n    #tableBodyCell   = content => el(\"td\", inlineResolver(content))\r\n    #tableHeaderRow  = row => el(\"tr\", row.map(this.#tableHeaderCell))\r\n    #tableBodyRow    = row => el(\"tr\", row.map(this.#tableBodyCell))\r\n\r\n    toHTML() {\r\n        const tableHeader = el(\r\n            \"thead\",\r\n            this.#tableHeaderRow(this.headerCells)\r\n        )\r\n        const tableBody = el(\r\n            \"tbody\",\r\n            this.bodyRows\r\n                .map(this.#tableBodyRow)\r\n        )\r\n        return el(\"div\", el(\"table\", [tableHeader, tableBody]), {\r\n            \"class\": \"table\"\r\n        })\r\n    }\r\n\r\n    static pattern = source => source.startsWith(\"| \")\r\n}\r\n\r\n// --- --- --- --- -\r\n// media nodes start\r\n// --- --- --- --- -\r\n\r\nclass MediaNode {\r\n    source = \"\"\r\n    description = \"\"    \r\n    constructor(mdText) {\r\n        mdText = mdText.substr(2)\r\n        this.description = getInterval(mdText, \"]\")\r\n        mdText = mdText.substr(this.description.length + 2)\r\n        this.source = getInterval(mdText, \")\")\r\n    }\r\n\r\n    static containerGenerator(content) {\r\n        return el(\"div\", content, {\r\n            \"class\": \"media-container\"\r\n        })\r\n    }\r\n\r\n    static patternGenerator(identifierSign) {\r\n        return (source) =>\r\n            source.startsWith(identifierSign + \"[\") && source.endsWith(\")\")\r\n    }\r\n\r\n    static replaceContentGenerator(href, description) {\r\n        const downloadEl = el(\"a\", languageSelector(\"从这里下载！\", \"Download Here!\"), { href })\r\n        const replaceContent = `${description}<br>${downloadEl}`\r\n        return replaceContent\r\n    }\r\n\r\n    static srcUrlResolver(rawUrl) {\r\n        let actualUrl\r\n        if (rawUrl.startsWith(\"http\")) {\r\n            actualUrl = rawUrl\r\n        } else {\r\n            const hash = location.hash.slice(1)\r\n            // get the parent directory path\r\n            const currentPath = hash.split(\"/\").slice(0, -1).join(\"/\")\r\n            actualUrl = currentPath + \"/\" + rawUrl\r\n        }\r\n        return actualUrl\r\n    }\r\n}\r\n\r\nexport class Image extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\"!\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const imageEl = el(\"img\", \"\", {\r\n            src: actualUrl,\r\n            alt: this.description,\r\n            loading: \"lazy\",\r\n            tabindex: 0,\r\n        })\r\n        imageEl.onclick = e =>\r\n            window.open(e.target.src)\r\n        imageEl.onerror = e => {\r\n            const target = e.target\r\n            target.onclick = null\r\n            target.title = this.description\r\n            target.classList.add(\"load-error\")\r\n        }\r\n        return MediaNode.containerGenerator(imageEl)\r\n    }\r\n}\r\n\r\nexport class Audio extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\":\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const replaceContent = MediaNode.replaceContentGenerator(actualUrl, this.description)\r\n        const audioEl = el(\"audio\", replaceContent, {\r\n            src: actualUrl,\r\n            controls: true,\r\n        })\r\n        return MediaNode.containerGenerator(audioEl)\r\n    }\r\n}\r\n\r\nexport class Video extends MediaNode {\r\n    static pattern = MediaNode.patternGenerator(\"?\")\r\n\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const replaceContent = MediaNode.replaceContentGenerator(actualUrl, this.description)\r\n        const videoEl = el(\"video\", replaceContent, {\r\n            src: actualUrl,\r\n            controls: \"true\",\r\n        })\r\n        return MediaNode.containerGenerator(videoEl)\r\n    }\r\n}\r\n\r\nexport const isIframePattern = (source) =>\r\n    MediaNode.patternGenerator(\"@\")(source)\r\n    || source.startsWith(\"@@@\")\r\n\r\nexport class Iframe extends MediaNode {\r\n    toHTML() {\r\n        const actualUrl = MediaNode.srcUrlResolver(this.source)\r\n        const iframeEl = el(\"iframe\", this.description, {\r\n            src: actualUrl,\r\n            title: this.description,\r\n            sandbox: \"allow-scripts\",\r\n            loading: \"lazy\",\r\n        })\r\n        return MediaNode.containerGenerator(iframeEl)\r\n    }\r\n}\r\n\r\n// --- --- --- ---\r\n// media nodes end\r\n// --- --- --- ---\r\n\r\n// --- --- --- --- -\r\n// block nodes start\r\n// --- --- --- --- -\r\n\r\nexport class CodeBlock {\r\n    constructor(content, lang) {\r\n        this.lang = lang\r\n        this.content = content\r\n    }\r\n    append(content) {\r\n        this.content += content\r\n    }\r\n    toHTML() {\r\n        const isPlaintext = [\"plaintext\", \"text\", \"\"].includes(this.lang)\r\n        if (!isPlaintext) {\r\n            globalThis.__LanguageList__.add(this.lang)\r\n        }\r\n\r\n        let langName, langClass\r\n        if (isPlaintext) {\r\n            langClass = \"nohighlight\"\r\n            langName  = \"PLAINTEXT\"\r\n        } else {\r\n            langClass = `language-${this.lang}`\r\n            langName  = this.lang.toUpperCase()\r\n        }\r\n\r\n        const codeEl = el(\"code\", this.content, {\r\n            \"class\": langClass,\r\n            tabindex: 0\r\n        })\r\n        return el(\"pre\", codeEl, {\r\n            \"class\": \"code-block\",\r\n            \"data-language\": langName\r\n        })\r\n    }\r\n\r\n    static pattern = source => source.startsWith(\"```\")\r\n}\r\n\r\nexport class DetailsBlock {\r\n    summary = \"\"\r\n    content = \"\"\r\n\r\n    constructor(content, summary) {   \r\n        this.summary = summary\r\n        this.content = mdResolver(content)\r\n    }\r\n    toHTML() {\r\n        const summaryEl = el(\"summary\", this.summary)\r\n        const detailsEl = el(\"details\", summaryEl)\r\n\r\n        const innerNodes = this.content\r\n            .map(node => node.toHTML())\r\n        const childrenEl = el(\"div\", el(\"div\", innerNodes, {\r\n            \"class\": \"details-children\"\r\n        }), {\r\n            \"class\": \"details-children-container\"\r\n        })\r\n        return el(\"div\", [detailsEl, childrenEl], {\r\n            \"class\": \"details\"\r\n        })\r\n    }\r\n\r\n    static pattern = source =>\r\n        source.startsWith(\">>>\")\r\n}\r\n\r\nexport class FormulaBlock {\r\n    content = \"\"\r\n    description = \"\"\r\n\r\n    constructor(content, description) {\r\n        this.content = content\r\n        this.description = description\r\n    }\r\n    toHTML() {\r\n        globalThis.__ContainsFormula__ = true\r\n        return el(\"div\", this.content, {\r\n            \"class\": \"math\",\r\n            title: this.description,\r\n        })\r\n    }\r\n\r\n    static pattern = source =>\r\n        source.startsWith(\"$$$\")\r\n}\r\n\r\nexport class IframeBlock {\r\n    // injected html codes, used to auto darkmode\r\n    // and send height message\r\n    static #injectedCodes = id => `\\\r\n<style>\r\n@media (prefers-color-scheme: dark) {\r\n  :root {\r\n    color: white;\r\n    background-color: #121212;\r\n  }\r\n}\r\n</style>\r\n<script>\r\nconst rootEl = document.documentElement\r\nfunction postHeight() {\r\n    const parent = window.parent\r\n    const height = parseFloat(getComputedStyle(rootEl).height)\r\n    parent.postMessage({\r\n        height,\r\n        id: \"${id}\"\r\n    }, \"*\")\r\n}\r\nwindow.addEventListener(\"load\", postHeight)\r\nwindow.addEventListener(\"message\", e => {\r\n  const { fontSize } = e.data\r\n  rootEl.style.fontSize = fontSize\r\n  postHeight()\r\n})\r\n</script>`\r\n\r\n    constructor(content, description) {\r\n        globalThis.__IframeCounter__ += 1\r\n        this.id = \"iframe_\" + globalThis.__IframeCounter__\r\n        this.description = description\r\n        this.content = content + IframeBlock.#injectedCodes(this.id)\r\n    }\r\n\r\n    toHTML() {\r\n        const iframeEl = el(\"iframe\", this.description, {\r\n            id: this.id,\r\n            title: this.description,\r\n            srcdoc: this.content,\r\n            sandbox: \"allow-scripts\",\r\n        })\r\n        return MediaNode.containerGenerator(iframeEl)\r\n    }\r\n}\r\n\r\n// types of chart blocks\r\n\r\nclass EchartsChartType {\r\n    constructor(content) {\r\n        const options = new Function(\r\n            \"let option;\"\r\n            + content\r\n            + \";return option\"\r\n        )()\r\n        this.chartOptions = options\r\n        globalThis.__ChartTypeList__.add(\"echarts\")\r\n    }\r\n    toHTML() {\r\n        const chartEl = el(\"div\", \"\", {\r\n            \"class\": \"echarts-container\",\r\n        })\r\n        chartEl.__ChartOptions__ = this.chartOptions\r\n        return chartEl\r\n    }\r\n}\r\nclass FlowChartType {\r\n    constructor(content) {\r\n        this.content = content\r\n        globalThis.__ChartTypeList__.add(\"flow-chart\")\r\n    }\r\n    toHTML() {\r\n        const chartEl = el(\"div\", \"\", {\r\n            \"class\": \"flowchart-container\"\r\n        })\r\n        chartEl.__ChartContent__ = this.content\r\n        return chartEl\r\n    }\r\n}\r\nclass SequenceChartType {\r\n    constructor(content) {\r\n        this.content = content\r\n        globalThis.__ChartTypeList__.add(\"sequence-chart\")\r\n    }\r\n    toHTML() {\r\n        const chartEl = el(\"div\", \"\", {\r\n            \"class\": \"sequencechart-container\"\r\n        })\r\n        chartEl.__ChartContent__ = this.content\r\n        return chartEl\r\n    }\r\n}\r\nclass GanttChartType {\r\n    constructor(content) {\r\n        this.content = new Function(`const tasks = [${content}]; return tasks`)()\r\n        globalThis.__ChartTypeList__.add(\"gantt-chart\")\r\n    }\r\n    toHTML() {\r\n        const chartEl = el(\"div\", \"\", {\r\n            \"class\": \"ganttchart-container\"\r\n        })\r\n        chartEl.__ChartContent__ = this.content\r\n        return chartEl\r\n    }\r\n}\r\nclass UnknownChartType {\r\n    constructor(errMsg) {\r\n        this.content = errMsg\r\n    }\r\n    toHTML() {\r\n        return el(\"span\", this.content)\r\n    }\r\n}\r\n\r\nexport class ChartBlock {\r\n    static pattern = source =>\r\n        source.startsWith(\"!!!\")\r\n    \r\n    #type = null\r\n\r\n    constructor(content, type) {\r\n        switch (type) {\r\n            case \"\": case \"echarts\":\r\n                this.#type = new EchartsChartType(content)\r\n                break\r\n            case \"flow\":       case \"flowchart\":\r\n            case \"flow chart\": case \"flow-chart\":\r\n                this.#type = new FlowChartType(content)\r\n                break\r\n            case \"sequence\":      case \"sequencechart\":\r\n            case \"sequence char\": case \"sequence-chart\":\r\n                this.#type = new SequenceChartType(content)\r\n                break\r\n            case \"gantt\":       case \"ganttchart\":\r\n            case \"gantt chart\": case \"gantt-chart\":\r\n                this.#type = new GanttChartType(content)\r\n                break\r\n            default:\r\n                const errMsg = \"Unknown chart type: \" + type\r\n                console.error(errMsg)\r\n                this.#type = new UnknownChartType(errMsg)\r\n        }\r\n    }\r\n    toHTML() {\r\n        const chartEl = this.#type.toHTML()\r\n        return MediaNode.containerGenerator(chartEl)\r\n    }\r\n}\r\n\r\n// --- --- --- ---\r\n// block nodes end\r\n// --- --- --- ---\r\n","export default function(line) {\r\n    let indentCount = 0\r\n    let spaceCount = 0\r\n\r\n    for (const ch of line) {\r\n        if (ch.match(/[^\\s\\t]/)) {\r\n            break\r\n        }\r\n\r\n        if (ch === \"\\t\") {\r\n            indentCount += 1\r\n            continue\r\n        }\r\n        if (ch === \" \") {\r\n            spaceCount += 1\r\n        }\r\n        if (spaceCount === 2) {\r\n            spaceCount = 0\r\n            indentCount += 1\r\n        }\r\n    }\r\n    return indentCount\r\n}\r\n","import { List } from \"../node.js\"\r\nimport getIndent from \"../utils/getIndent.js\"\r\n\r\nexport default function listResolver(currentLine, lines) {\r\n    const currentIndent = getIndent(currentLine)\r\n    const currentNode = new List(currentLine)\r\n\r\n    while (lines.length && List.isListPattern(lines[0])) {\r\n        const nextLine = lines.shift()\r\n        const nextIndent = getIndent(nextLine)\r\n        const isNextOrdered = List.orderedPattern(nextLine)\r\n\r\n        if (nextIndent > currentIndent) {\r\n            currentNode.push(listResolver(nextLine, lines))\r\n        } else if (nextIndent === currentIndent && isNextOrdered === currentNode.isOrdered) {\r\n            currentNode.push(List.getContent(nextLine, isNextOrdered))\r\n        } else {\r\n            lines.unshift(nextLine)\r\n            break\r\n        }\r\n    }\r\n    return currentNode\r\n}","import mdResolver from \"../index.js\"\r\nimport { Quote } from \"../node.js\"\r\n\r\nexport default function(firstLine, lines) {\r\n    let quotedContent = firstLine.slice(2) + \"\\n\"\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (Quote.pattern(l)) {\r\n            quotedContent += l.slice(2) + \"\\n\"\r\n        } else {\r\n            lines.unshift(l)\r\n            break\r\n        }\r\n    }\r\n    const children = mdResolver(quotedContent)\r\n    const node = new Quote(children)\r\n    return node\r\n}\r\n","import { Table } from \"../node.js\"\r\n\r\n// input: \"| content | content |\"\"\r\n// output: [\"content\",\"content\"]\r\nfunction tableLineConverter(tableLine) {\r\n    const splited = tableLine.split(\"|\")\r\n    const result = splited\r\n        .filter(item => item.length > 0)\r\n        .map(item => item.trim())\r\n    return result\r\n}\r\n\r\nexport default function(firstLine, lines) {\r\n    const headerText = firstLine\r\n    const contentLines = []\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (Table.pattern(l)) {\r\n            contentLines.push(l)\r\n        } else {\r\n            lines.unshift(l)\r\n            break\r\n        }\r\n    }\r\n\r\n    const headerCells = tableLineConverter(headerText)\r\n    const contentRows = contentLines.map(tableLineConverter)\r\n    const tableNode = new Table(headerCells, contentRows)\r\n    return tableNode\r\n}\r\n","import { ChartBlock, CodeBlock, DetailsBlock, FormulaBlock, Iframe, IframeBlock } from \"../node.js\"\r\n\r\nexport function blockResolverGenerator(endSign, targetClass) {\r\n    return function(firstLine, lines) {\r\n        const description = firstLine.slice(3)\r\n\r\n        let content = \"\"\r\n        while (lines.length) {\r\n            const l = lines.shift()\r\n\r\n            if (l === endSign) {\r\n                break\r\n            }\r\n\r\n            content += l + \"\\n\"\r\n        }\r\n        return new targetClass(content, description)\r\n    }\r\n}\r\n\r\nexport const codeResolver    = blockResolverGenerator(\"```\", CodeBlock)\r\nexport const chartResolver   = blockResolverGenerator(\"!!!\", ChartBlock)\r\nexport const detailsResolver = blockResolverGenerator(\">>>\", DetailsBlock)\r\nexport const formulaResolver = blockResolverGenerator(\"$$$\", FormulaBlock)\r\nexport function iframeResolver(firstLine, lines) {\r\n    const blockResolver = blockResolverGenerator(\"@@@\", IframeBlock)\r\n\r\n    if (!firstLine.startsWith(\"@@@\")) {\r\n        // link to out resource\r\n        return new Iframe(firstLine)\r\n    }\r\n    return blockResolver(firstLine, lines)\r\n}\r\n","import {\r\n    Headline, Quote, Divider,\r\n    List, Para, Table,\r\n    Image, Audio, Video,\r\n    FormulaBlock, CodeBlock,\r\n    isIframePattern,\r\n    DetailsBlock,\r\n    ChartBlock\r\n} from \"./node.js\"\r\nimport {\r\n    listResolver, quoteResolver, tableResolver,\r\n    codeResolver, formulaResolver, chartResolver,\r\n    iframeResolver, detailsResolver,\r\n} from \"./resolvers/index.js\"\r\nimport getLines from \"./utils/getLines.js\"\r\n\r\nexport default function mdResolver(source) {\r\n    const lines = getLines(source)\r\n    const nodes = []\r\n\r\n    while (lines.length) {\r\n        const l = lines.shift()\r\n\r\n        if (!l.length) {\r\n            // skip empty line\r\n            continue\r\n        }\r\n\r\n        if (Headline.pattern(l)) {\r\n            nodes.push(new Headline(l))\r\n        } else\r\n        if (Divider.pattern(l)) {\r\n            nodes.push(new Divider)\r\n        } else\r\n        if (Quote.pattern(l)) {\r\n            nodes.push(quoteResolver(l, lines))\r\n        } else\r\n        if (List.isListPattern(l)) {\r\n            nodes.push(listResolver(l, lines))\r\n        } else\r\n        if (Table.pattern(l)) {\r\n            nodes.push(tableResolver(l, lines))\r\n        } else\r\n        if (Image.pattern(l)) {\r\n            nodes.push(new Image(l))\r\n        } else\r\n        if (Audio.pattern(l)) {\r\n            nodes.push(new Audio(l))\r\n        } else\r\n        if (Video.pattern(l)) {\r\n            nodes.push(new Video(l))\r\n        } else\r\n        if (DetailsBlock.pattern(l)) {\r\n            nodes.push(detailsResolver(l, lines))\r\n        } else\r\n        if (FormulaBlock.pattern(l)) {\r\n            nodes.push(formulaResolver(l, lines))\r\n        } else\r\n        if (CodeBlock.pattern(l)) {\r\n            nodes.push(codeResolver(l, lines))\r\n        } else\r\n        if (ChartBlock.pattern(l)) {\r\n            nodes.push(chartResolver(l, lines))\r\n        } else\r\n        if (isIframePattern(l)) {\r\n            nodes.push(iframeResolver(l, lines))\r\n        } else {\r\n            nodes.push(new Para(l))\r\n        }\r\n    }\r\n    return nodes\r\n}","export default function(source) {\r\n    if (source.indexOf(\"\\r\") != -1) {\r\n        return source.split(\"\\r\\n\")\r\n    } else {\r\n        return source.split(\"\\n\")\r\n    }\r\n}","export default function(el) {\r\n    return function(e) {\r\n        // when Enter key or Space key\r\n        if (e.key === \"Enter\" || e.key === \" \") {\r\n            el.click()\r\n        }\r\n    }\r\n}\r\n","// return to the document top\r\nexport default function() {\r\n    document.body.scrollTop = 0\r\n    document.documentElement.scrollTop = 0\r\n}\r\n","import importHighlighter from \"./importers/highlight.js\"\r\nimport importTexRenderer from \"./importers/katex.js\"\r\nimport importChartRenderer from \"./importers/charts/index.js\"\r\n\r\nimport mdResolver from \"../utils/markdown/index.js\"\r\nimport keydownEvent from \"../utils/dom/keydownEvent.js\"\r\nimport backToTop from \"../utils/dom/backToTop.js\"\r\nimport eventbus from \"../utils/eventbus/inst.js\"\r\nimport config from \"../../build.config.js\"\r\nimport { Headline } from \"../utils/markdown/node.js\"\r\nimport languageSelector from \"../utils/languageSelector.js\"\r\n\r\nconst articleEl = document.querySelector(\"article\")\r\nconst emptyArticlePlaceHolder = languageSelector(\"空文章\", \"Empty Article\")\r\n\r\neventbus.on(\"catalog-toggle\", () => {\r\n    articleEl.classList.toggle(\"with-catalog\")\r\n})\r\neventbus.on(\"catalog-closed\", () => {\r\n    articleEl.classList.remove(\"with-catalog\")\r\n})\r\n\r\nfunction getHeadlines(structure) {\r\n    return structure\r\n        .filter(node => node instanceof Headline)\r\n        .map((node, index) => {\r\n            const id = node.id = \"headline-\" + index\r\n            const content = node.content.map(el => el.cloneNode(true))\r\n            return {\r\n                id, content,\r\n                level: node.tagName,\r\n            }\r\n        })\r\n}\r\n\r\nexport default function articleRender(articleEl, mdText) {\r\n    // language names to import for `highlight.js`\r\n    globalThis.__LanguageList__ = new Set()\r\n    // to deside which chart library to import\r\n    globalThis.__ChartTypeList__ = new Set()\r\n    // to deside whether to import `katex`\r\n    globalThis.__ContainsFormula__ = false\r\n    // used to dynamic generate iframe id\r\n    globalThis.__IframeCounter__ = 0\r\n\r\n    const structure = mdResolver(mdText)\r\n    if (config.enableCatalog) {\r\n        const headlineItems = getHeadlines(structure)\r\n        eventbus.emit(\"article-rendered\", headlineItems)\r\n    }\r\n\r\n    let resultNodes = structure.map(node => node.toHTML())\r\n    if (!resultNodes.length) {\r\n        resultNodes = el(\"h1\", emptyArticlePlaceHolder)\r\n    }\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    articleEl.innerHTML = \"\"\r\n    resultNodes.forEach(el => articleEl.appendChild(el))\r\n\r\n    articleEl.style.display = \"block\"\r\n    articleEl.querySelectorAll(\"[tabindex='0']\").forEach((el) => {\r\n        el.onkeydown = keydownEvent(el)\r\n    })\r\n    backToTop()\r\n\r\n    importHighlighter(globalThis.__LanguageList__).then(() => globalThis.__LanguageList__ = null)\r\n    importTexRenderer(globalThis.__ContainsFormula__).then(() => globalThis.__ContainsFormula__ = false)\r\n    importChartRenderer(globalThis.__ChartTypeList__).then(() => globalThis.__ChartTypeList__ = null)\r\n}\r\n","import articleRender from \"./articleRenderer.js\"\r\nimport el from \"../utils/dom/el.js\"\r\nimport keydownEvent from \"../utils/dom/keydownEvent.js\"\r\n\r\nexport function newestItemRenderer(item) {\r\n    const createDate = new Date(item.timestamp)\r\n    const formatedDate = new Intl.DateTimeFormat().format(createDate)\r\n    const dateEl  = el(\"code\", formatedDate)\r\n    const titleEl = el(\"span\", item.title, {\r\n        \"class\": \"underline-target\"\r\n    })\r\n    return el(\"li\",\r\n        [dateEl, el(\"text\", \": \"), titleEl],\r\n        {\r\n            tabindex: 0,\r\n            \"class\": \"underline-through\",\r\n            \"data-target-blog\": item.link,\r\n        }\r\n    )\r\n}\r\nexport function directoryItemRenderer(item) {\r\n    const contentEl = el(\"span\", item, {\r\n        \"class\": \"underline-target\"\r\n    })\r\n    return el(\"li\", contentEl, {\r\n        \"class\": \"underline-through\",\r\n        tabindex: 0,\r\n    })\r\n}\r\n\r\nconst mainEl           = document.querySelector(\"main\")\r\nconst articleEl        = document.querySelector(\"article\")\r\nconst articleList      = mainEl.querySelector(\"#article-list\")\r\nconst dirDescriptionEl = mainEl.querySelector(\"#directory-description\")\r\nconst pagingComponent  = mainEl.querySelector(\"paging-view\")\r\n\r\nexport default function indexRender(indexing, itemResolver) {\r\n    const {current, total} = indexing\r\n    pagingComponent.setPage(current, total)\r\n\r\n    // --- --- --- --- --- ---\r\n    \r\n    // reset directory description\r\n    dirDescriptionEl.innerHTML = \"\"\r\n    if (\"directoryDescription\" in indexing) {\r\n        articleRender(dirDescriptionEl, indexing.directoryDescription)\r\n    }\r\n\r\n    // reset articleList content\r\n    articleList.innerHTML = \"\"\r\n    indexing.content\r\n        .map(itemResolver)\r\n        .forEach(el =>\r\n            articleList.appendChild(el)\r\n        )\r\n\r\n    // set keyboard event\r\n    articleList.querySelectorAll(\"[tabindex='0']\").forEach((el) => {\r\n        el.onkeydown = keydownEvent(el)\r\n    })\r\n\r\n    // --- --- --- --- --- ---\r\n\r\n    articleEl.style.display = \"none\"\r\n    mainEl.style.display = \"block\"\r\n\r\n    // return to the top\r\n    document.body.scrollTop = 0\r\n    document.documentElement.scrollTop = 0\r\n}\r\n","import pageController from \"../components/paging.js\"\r\nimport { fetchJSON, fetchMD } from \"./fetchResources.js\"\r\nimport articleRender from \"./articleRenderer.js\"\r\nimport indexRender, { newestItemRenderer, directoryItemRenderer } from \"./indexRenderer.js\"\r\n\r\nexport async function hashChangeEvent(_) {\r\n    const mainEl = document.querySelector(\"main\")\r\n    const articleEl = document.querySelector(\"article\")\r\n    const indexDirPath = \"./.index/\"\r\n\r\n    if (!location.hash) {\r\n        pathManager.homepage()\r\n        return\r\n    }\r\n    const hash = location.hash.slice(1)\r\n    mainEl.classList.add(\"disabled\")\r\n\r\n    if (pathManager.isIn.newestPage()) {\r\n        // open newest page\r\n        const indexPath = indexDirPath\r\n            + \"newest_\"\r\n            + pageController.current()\r\n        const newestIndex = await fetchJSON(indexPath)\r\n        if (!newestIndex) return\r\n        indexRender(newestIndex, newestItemRenderer)\r\n    } else\r\n    if (pathManager.isIn.directory()) {\r\n        // open directory\r\n        const splited = hash.split(\"/\").slice(0, -1)\r\n        const indexFilePath = indexDirPath\r\n            + splited.join(\"+\") + \"_\"\r\n            + pageController.current()\r\n        const index = await fetchJSON(indexFilePath)\r\n        if (!index) return\r\n        indexRender(index, directoryItemRenderer)\r\n    } else\r\n    if (pathManager.isIn.article()) {\r\n        // open article\r\n        const articleContent = await fetchMD(\"./\" + hash)\r\n        if (!articleContent) return\r\n        mainEl.style.display = \"none\"\r\n        articleRender(articleEl, articleContent)\r\n    } else {\r\n        pathManager.homepage()\r\n    }\r\n\r\n    mainEl.setAttribute(\"data-is-root\", hash === \"static/\")\r\n    mainEl.classList.remove(\"disabled\")\r\n}\r\n\r\nwindow.addEventListener(\"hashchange\", hashChangeEvent)\r\nwindow.addEventListener(\"load\", hashChangeEvent)\r\n\r\nconst homepagePath = \"static/\"\r\nconst newestPath = \"newest/\"\r\nconst pathManager = {\r\n    homepage() {\r\n        location.hash = homepagePath\r\n    },\r\n\r\n    open(name) {\r\n        location.hash += name\r\n    },\r\n    jumpTo(target) {\r\n        location.hash = target\r\n    },\r\n    parent() {\r\n        if (this.isIn.root() || this.isIn.newestPage()) {\r\n            return homepagePath\r\n        }\r\n        const splited = location.hash.slice(1).split(\"/\")\r\n        if (this.isIn.directory()) {\r\n            return splited.slice(0, -2).join(\"/\") + \"/\"\r\n        }\r\n        if (this.isIn.article()) {\r\n            return splited.slice(0, -1).join(\"/\") + \"/\"\r\n        }\r\n        throw new Error(\"Unexpected hash: \" + location.hash)\r\n    },\r\n    isIn: {\r\n        root() {\r\n            return location.hash === \"#\" + homepagePath\r\n        },\r\n        newestPage() {\r\n            return location.hash === \"#\" + newestPath\r\n        },\r\n        directory() {\r\n            return location.hash.startsWith(\"#static\")\r\n                && location.hash.endsWith(\"/\")\r\n        },\r\n        article() {\r\n            return location.hash.startsWith(\"#static\")\r\n                && location.hash.endsWith(\".md\")\r\n        }\r\n    }\r\n}\r\nexport default pathManager\r\n","import { hashChangeEvent } from \"../scripts/pathManager.js\"\r\nimport el from \"../utils/dom/el.js\"\r\nimport languageSelector from \"../utils/languageSelector.js\"\r\n\r\nclass PageController {\r\n    #pageList = [1]\r\n\r\n    current = () => this.#pageList[this.length() - 1]\r\n    next    = () => this.#pageList[this.length() - 1] += 1\r\n    prev    = () => this.#pageList[this.length() - 1] -= 1\r\n    jumpTo  = targetPage => this.#pageList[this.length() - 1] = Number(targetPage)\r\n    length  = () => this.#pageList.length\r\n\r\n    back() {\r\n        // called when \"popstate\" event emited\r\n        this.#pageList.pop()\r\n        if (!this.#pageList.length) {\r\n            this.#pageList.push(1)\r\n        }\r\n    }\r\n    open() {\r\n        // called when enter directory\r\n        this.#pageList.push(1)\r\n    }\r\n}\r\nconst pageController = new PageController()\r\nexport default pageController\r\n\r\n// --- --- --- --- --- ---\r\n\r\nconst btn = content => el(\"button\",\r\n    el(\"span\", content, {\r\n        \"class\": \"underline-target\"\r\n    }), {\r\n    \"class\": \"icon-btn underline-side\"\r\n})\r\n\r\nclass PagingView extends HTMLElement {\r\n    #elements = {}\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.#elements.input = el(\"input\", \"1\", {\r\n            type: \"number\",\r\n            min: 1,\r\n            max: 1,\r\n        })\r\n        this.#elements.maxPage = el(\"span\", \"1\")\r\n        const prevBtn = this.#elements.prevBtn = btn(languageSelector(\"上一页\", \"Prev\"))\r\n        const nextBtn = this.#elements.nextBtn = btn(languageSelector(\"下一页\", \"Next\"))\r\n        prevBtn.id = \"prev-btn\"; prevBtn.classList.add(\"left\")\r\n        nextBtn.id = \"next-btn\"; nextBtn.classList.add(\"right\")\r\n\r\n        const labelEl = el(\"label\", [\r\n            this.#elements.input,\r\n            el(\"text\", \"/\"),\r\n            this.#elements.maxPage,\r\n        ])\r\n        this.#appendEvent()\r\n        for (const el of [prevBtn, labelEl, nextBtn]) {\r\n            this.appendChild(el)\r\n        }\r\n    }\r\n    #appendEvent() {\r\n        this.#elements.input.addEventListener(\"keydown\", e => {\r\n            if (e.key !== \"Enter\") {\r\n                return\r\n            }\r\n            const targetPageStr = e.target.value\r\n            if (!/^\\d+$/.test(targetPageStr)) {\r\n                e.target.value = 1\r\n                return\r\n            }\r\n            const targetPage = Number(targetPageStr)\r\n            if (!(targetPage > 0 && targetPage <= this.#elements.input.max)) {\r\n                e.target.value = 1\r\n                return\r\n            }\r\n            pageController.jumpTo(targetPage)\r\n            hashChangeEvent()\r\n        })\r\n        this.#elements.prevBtn.addEventListener(\"click\", () => {\r\n            if (pageController.current() > 0) {\r\n                pageController.prev()\r\n                hashChangeEvent()\r\n            }\r\n        })\r\n        this.#elements.nextBtn.addEventListener(\"click\", () => {\r\n            if (pageController.current() < this.#elements.input.max) {\r\n                pageController.next()\r\n                hashChangeEvent()\r\n            }\r\n        })\r\n    }\r\n    setPage(current, total) {\r\n        let isFirstPage = false\r\n        let isLastPage  = false\r\n        let isOnlyPage  = false\r\n        if (total === 1) {\r\n            isOnlyPage = true\r\n        } else {\r\n            if (current === 1) {\r\n                isFirstPage = true\r\n            }\r\n            if (current === total) {\r\n                isLastPage = true\r\n            }\r\n        }\r\n        this.#elements.prevBtn.disabled = isOnlyPage || isFirstPage\r\n        this.#elements.nextBtn.disabled = isOnlyPage || isLastPage\r\n        this.#elements.maxPage.textContent = total\r\n        this.#elements.input.value = current\r\n        this.#elements.input.max   = total\r\n        this.classList.toggle(\"hidden\", isOnlyPage)\r\n    }\r\n}\r\ncustomElements.define(\"paging-view\", PagingView)\r\n","import pageController from \"../components/paging.js\"\r\nimport pathManager from \"./pathManager.js\"\r\n\r\nconst mainEl       = document.querySelector(\"main\")\r\nconst parentDirBtn = mainEl.querySelector(\"#previous-dir li\")\r\nconst articleList  = mainEl.querySelector(\"#article-list\")\r\n\r\nparentDirBtn.addEventListener(\"click\", () => {\r\n    pageController.back()\r\n    pathManager.jumpTo(pathManager.parent())\r\n})\r\narticleList.addEventListener(\"click\", e => {\r\n    const target = e.target\r\n\r\n    if (target === articleList) {\r\n        // when click on the `articleList` itself\r\n        // ignore this event.\r\n        return\r\n    }\r\n\r\n    if (!target.getAttribute(\"data-target-blog\")) {\r\n        if (target.innerText.endsWith(\"/\")) {\r\n            // open directory\r\n            pageController.open()\r\n        }\r\n        pathManager.open(target.innerText)\r\n    } else {\r\n        // in `newest` page\r\n        pageController.open()\r\n        pathManager.jumpTo(target.getAttribute(\"data-target-blog\"))\r\n    }\r\n})\r\n","import importStyle from \"./style.js\"\r\n\r\nexport default async function(name) {\r\n    await import(`../../components/${name}.js`)\r\n    importStyle(`./dist/chunks/${name}.min.css`)\r\n}\r\n","import \"./styles/style.css\"\r\n\r\nimport \"./scripts/mainManager.js\"\r\nimport config from \"../build.config.js\"\r\nimport pageController from \"./components/paging.js\"\r\nimport keydownEvent from \"./utils/dom/keydownEvent.js\"\r\nimport importComponent from \"./scripts/importers/component.js\"\r\n\r\nif (config.enableFab) {\r\n    importComponent(\"fab\")\r\n}\r\nif (config.enableCatalog) {\r\n    importComponent(\"catalog\")\r\n}\r\n\r\nconst lightBtn = document.querySelector(\"#light-btn\")\r\nconst darkBtn = document.querySelector(\"#dark-btn\")\r\nlightBtn.onkeydown = keydownEvent(lightBtn)\r\ndarkBtn.onkeydown = keydownEvent(darkBtn)\r\n\r\nwindow.addEventListener(\"popstate\", () => {\r\n    if (location.hash.endsWith(\"/\")) {\r\n        // in a directory\r\n        pageController.back()\r\n    }\r\n})\r\nwindow.addEventListener(\"message\", e => {\r\n    if (e.origin != \"null\") {\r\n        return\r\n    }\r\n    const { id, height } = e.data\r\n    const targetIframeEl = document.getElementById(id)\r\n    targetIframeEl.style.height = height + \"px\"\r\n})\r\n\r\nif (\"serviceWorker\" in navigator) {\r\n    // if support service worker, register\r\n    navigator.serviceWorker\r\n        .register(\"./sw.js\")\r\n        .catch(function(error) {\r\n            // registration failed\r\n            console.error(\"Registration failed with \" + error);\r\n        })\r\n}\r\n"],"names":["controller","async","fetchJSON","path","abort","AbortController","fetch","signal","then","json","res","catch","err","console","log","error","hljs","importHighlighter","languageList","Set","importLangDefs","languageListArr","Array","from","langDefImporters","filter","name","getLanguage","map","lang","__variableDynamicImportRuntime0__","toLowerCase","Promise","all","langDefs","forEach","defModule","index","def","default","registerLanguage","document","querySelectorAll","highlightElement","size","import","module","importStyle","linkEl","createElement","rel","href","head","appendChild","katex","katexOptions","config","eventbus","events","Map","emit","args","targetEvent","this","get","handler","apply","on","push","set","off","length","delete","handlerIndex","indexOf","splice","mergeObj","destObj","srcObj","key","Object","keys","echarts","importChart","importComponent","globalOptions","echartsOptions","chartElList","chartRenderer","el","renderMode","body","classList","contains","chartInst","init","currentOptions","__ChartOptions__","globalOptionsCloned","finalOptions","setOption","chartOptionResolver","options","libsToImport","ignoredProps","includes","components","add","item","series","charts","type","darkmodeObserver","MutationObserver","_","dispose","resizeEvent","getInstanceByDom","resize","umdLoader","scriptEl","src","resolve","reject","onload","localModuleObj","globalThis","onerror","flowchart","raphael","flowchartOptions","SequenceDiagram","FrappGantt","language","ganttOptions","currentLang","langList","languageSelector","langName","entries","selections","warn","languageSelectorCreator","chartMethodMap","loadError","textContent","loadErrText","importChartLibs","chartOptions","chartsToImport","componentsToImport","concat","echartsLibs","use","darkModule","darkTheme","registerTheme","observe","attributes","attributeFilter","setTimeout","window","addEventListener","callback","waitMillisecond","timer","clearTimeout","debounce","flowChartRender","chartContent","__ChartContent__","parse","drawSVG","renderErrText","renderItem","diagram","dom","sequenceChartRenderer","ganttChartRenderer","propToString","props","val","undefined","toString","replaceAll","htmlValueFormater","join","tagName","content","createTextNode","targetEl","Function","setAttribute","propSetter","childEl","HTMLElement","Error","contentSetter","getInterval","text","endSign","intervalText","isEscape","ch","slice","substr","KeyToken_TagName_map","PairedParenMap","katexRenderer","renderModule","render","TextToken","constructor","toHTML","KeyToken","tagSign","tag","realTagName","className","split","__ContainsFormula__","formulaImage","class","elOption","parseEntry","LinkToken","address","displayContent","startsWith","target","PhoneticToken","notation","ignoredLeftParenthesis","ignoredRightParenthesis","notationEl","source","tokens","getFirstChar","charAt","substring","getSpecialTokenClass","tokenSign","targetTokenType","textTerm","keyTerm","keyStart","isInKey","has","nextCh","specialTokenSign","pairedTokenSign","removedContent","hiddenContent","parser","resultHTML","token","htmlEntityReplace","Headline","splited","numberSignStr","numberSignCount","rawContent","inlineResolver","id","static","match","Para","trimStart","inline","Quote","children","innerNodes","node","Divider","List","isOrdered","Boolean","orderedPattern","getContent","child","childrenHTML","unorderedPattern","line","Table","headerCells","bodyRows","tableHeaderCell","tableBodyCell","tableHeaderRow","row","tableBodyRow","tableHeader","tableBody","MediaNode","description","mdText","containerGenerator","patternGenerator","identifierSign","endsWith","replaceContentGenerator","srcUrlResolver","rawUrl","actualUrl","location","hash","Image","imageEl","alt","loading","tabindex","onclick","e","open","title","Audio","audioEl","controls","Video","videoEl","isIframePattern","Iframe","iframeEl","sandbox","CodeBlock","append","isPlaintext","langClass","__LanguageList__","toUpperCase","codeEl","DetailsBlock","summary","mdResolver","summaryEl","detailsEl","childrenEl","FormulaBlock","IframeBlock","__IframeCounter__","injectedCodes","srcdoc","EchartsChartType","__ChartTypeList__","chartEl","FlowChartType","SequenceChartType","GanttChartType","UnknownChartType","errMsg","ChartBlock","getIndent","indentCount","spaceCount","listResolver","currentLine","lines","currentIndent","currentNode","isListPattern","nextLine","shift","nextIndent","isNextOrdered","unshift","quoteResolver","firstLine","quotedContent","l","pattern","tableLineConverter","tableLine","trim","tableResolver","headerText","contentLines","contentRows","blockResolverGenerator","targetClass","codeResolver","chartResolver","detailsResolver","formulaResolver","iframeResolver","blockResolver","getLines","nodes","keydownEvent","click","backToTop","scrollTop","documentElement","articleEl","querySelector","emptyArticlePlaceHolder","articleRender","structure","enableCatalog","headlineItems","cloneNode","level","getHeadlines","resultNodes","innerHTML","style","display","onkeydown","isContainsFormula","renderFormula","texString","ParseError","message","replace","katexModule","importTexRenderer","chartTypeList","targetChartLoadMethod","importChartRenderer","newestItemRenderer","createDate","Date","timestamp","dateEl","Intl","DateTimeFormat","format","titleEl","link","directoryItemRenderer","contentEl","toggle","remove","mainEl","articleList","dirDescriptionEl","pagingComponent","indexRender","indexing","itemResolver","current","total","setPage","directoryDescription","hashChangeEvent","indexDirPath","pathManager","homepage","isIn","newestPage","indexPath","pageController","newestIndex","directory","indexFilePath","article","articleContent","status","DOMException","fetchMD","homepagePath","jumpTo","parent","root","pageList","next","prev","targetPage","Number","back","pop","btn","PagingView","elements","super","input","min","max","maxPage","prevBtn","nextBtn","labelEl","appendEvent","targetPageStr","value","test","isFirstPage","isLastPage","isOnlyPage","disabled","customElements","define","parentDirBtn","getAttribute","innerText","enableFab","lightBtn","darkBtn","origin","height","data","getElementById","navigator","serviceWorker","register"],"mappings":"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"}