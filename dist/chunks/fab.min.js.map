{"version":3,"file":"fab.min.js","sources":["../../src/components/fab.js"],"sourcesContent":["import pathManager from \"../scripts/pathManager.js\"\r\nimport config from \"../../build.config.js\"\r\nimport el from \"../utils/el.js\"\r\nimport backToTop from \"../utils/backToTop.js\"\r\nimport languageSelector from \"../utils/languageSelector.js\"\r\nimport { downsizeText, enlargeText } from \"../scripts/articleRenderer.js\"\r\n\r\nconst fabItem = (id, imgName, title) => el(\"button\",\r\n    el(\"img\", \"\", {\r\n        src: `./dist/imgs/fab-${imgName}.svg`,\r\n        loading: \"lazy\",\r\n        onerror() {\r\n            this.src = \"./dist/imgs/broken-image.svg\"\r\n        }\r\n    }),\r\n    { id, title }\r\n)\r\n\r\nclass FabIcon extends HTMLElement {\r\n    #switcher = null\r\n    #subItems = {}\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        const switcher = this.#switcher = fabItem(\"switcher\"      , \"switch\"        , languageSelector(\"切换浮动操作按钮\", \"Switch The FAB\"))\r\n        this.#subItems.backToParent     = fabItem(\"back-to-parent\", \"back-to-parent\", languageSelector(\"返回父级\"       , \"Back to Parent\"))\r\n        this.#subItems.backToTop        = fabItem(\"back-to-top\"   , \"back-to-top\"   , languageSelector(\"返回顶部\"       , \"Back to Top\"   ))\r\n        this.#subItems.enlargeText      = fabItem(\"enlarge-text\"  , \"zoom-out\"      , languageSelector(\"放大文本\"       , \"Enlarge Text\"  ))\r\n        this.#subItems.downsizeText     = fabItem(\"downsize-text\" , \"zoom-in\"       , languageSelector(\"缩小文本\"       , \"Downsize Text\" ))\r\n\r\n        const subFabItem = config.fabOrdering\r\n            .map(fabItem => this.#subItems[fabItem])\r\n            .filter(fabItem => fabItem !== undefined)\r\n        for (const [index, item] of Object.entries(subFabItem)) {\r\n            item.style.setProperty(\"--fab-item-index\", Number(index) + 1)\r\n        }\r\n\r\n        this.classList.add(\"hidden\")\r\n        this.#eventAppender()\r\n        this.style.setProperty(\"--fab-item-count\", subFabItem.length + 1)\r\n        for (const el of [switcher].concat(subFabItem)) {\r\n            this.appendChild(el)\r\n        }\r\n    }\r\n\r\n    #eventAppender() {\r\n        this.#switcher.addEventListener(\"click\", () => {\r\n            this.classList.toggle(\"hidden\")\r\n        })\r\n        this.#subItems.backToParent.addEventListener(\"click\", () => {\r\n            pathManager.jumpTo(pathManager.parent())\r\n        })\r\n        this.#subItems.backToTop.addEventListener(\"click\", backToTop)\r\n        this.#subItems.enlargeText.addEventListener(\"click\", enlargeText)\r\n        this.#subItems.downsizeText.addEventListener(\"click\", downsizeText)\r\n    }\r\n}\r\ncustomElements.define(\"fab-icon\", FabIcon)\r\n"],"names":["fabItem","id","imgName","title","el","src","loading","onerror","this","FabIcon","HTMLElement","switcher","subItems","constructor","super","languageSelector","backToParent","backToTop","enlargeText","downsizeText","subFabItem","config","fabOrdering","map","filter","undefined","index","item","Object","entries","style","setProperty","Number","classList","add","eventAppender","length","concat","appendChild","addEventListener","toggle","pathManager","jumpTo","parent","customElements","define"],"mappings":"yEAOA,MAAMA,EAAU,CAACC,EAAIC,EAASC,IAAUC,EAAG,SACvCA,EAAG,MAAO,GAAI,CACVC,IAAK,mBAAmBH,QACxBI,QAAS,OACT,OAAAC,GACIC,KAAKH,IAAM,8BACd,IAEL,CAAEJ,KAAIE,UAGV,MAAMM,UAAgBC,YAClBC,GAAY,KACZC,GAAY,CAAE,EAEd,WAAAC,GACIC,QAEA,MAAMH,EAAWH,MAAKG,EAAYX,EAAQ,WAAkB,SAAkBe,EAAiB,WAAY,mBAC3GP,MAAKI,EAAUI,aAAmBhB,EAAQ,iBAAkB,iBAAkBe,EAAiB,OAAe,mBAC9GP,MAAKI,EAAUK,UAAmBjB,EAAQ,cAAkB,cAAkBe,EAAiB,OAAe,gBAC9GP,MAAKI,EAAUM,YAAmBlB,EAAQ,eAAkB,WAAkBe,EAAiB,OAAe,iBAC9GP,MAAKI,EAAUO,aAAmBnB,EAAQ,gBAAkB,UAAkBe,EAAiB,OAAe,kBAE9G,MAAMK,EAAaC,EAAOC,YACrBC,KAAIvB,GAAWQ,MAAKI,EAAUZ,KAC9BwB,QAAOxB,QAAuByB,IAAZzB,IACvB,IAAK,MAAO0B,EAAOC,KAASC,OAAOC,QAAQT,GACvCO,EAAKG,MAAMC,YAAY,mBAAoBC,OAAON,GAAS,GAG/DlB,KAAKyB,UAAUC,IAAI,UACnB1B,MAAK2B,IACL3B,KAAKsB,MAAMC,YAAY,mBAAoBX,EAAWgB,OAAS,GAC/D,IAAK,MAAMhC,IAAM,CAACO,GAAU0B,OAAOjB,GAC/BZ,KAAK8B,YAAYlC,EAExB,CAED,EAAA+B,GACI3B,MAAKG,EAAU4B,iBAAiB,SAAS,KACrC/B,KAAKyB,UAAUO,OAAO,SAAS,IAEnChC,MAAKI,EAAUI,aAAauB,iBAAiB,SAAS,KAClDE,EAAYC,OAAOD,EAAYE,SAAS,IAE5CnC,MAAKI,EAAUK,UAAUsB,iBAAiB,QAAStB,GACnDT,MAAKI,EAAUM,YAAYqB,iBAAiB,QAASrB,GACrDV,MAAKI,EAAUO,aAAaoB,iBAAiB,QAASpB,EACzD,EAELyB,eAAeC,OAAO,WAAYpC"}