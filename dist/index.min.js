let t=null;async function e(e){return t&&t.abort(),t=new AbortController,await fetch(e,{signal:t.signal}).then((async e=>{const n=await e.json();return t=null,n})).catch((t=>(console.log("JSON request error: "+e),console.error(t),null)))}var n={homepage:"https://bhznjns.github.io/markdown-blog/",title:"BHznJNs' Blog",footer:"::Powered by [MarkdownBlog](https://github.com/BHznJNs/markdown-blog)::",language:"zh",enableRSS:!0,rssIgnoreDir:["学习笔记/"],enableNewest:!0,newestIgnoreDir:[],pageCapacity:10,RSSCapacity:16,previewPort:3e3,katexOptions:null};const{katexOptions:s}=n;let r=null,i=null;function o(t){return Object.entries(t).filter((([t,e])=>null!=e)).map((([t,e])=>`${t}="${(t=>t.toString().replaceAll('"',"&quot;"))(e)}"`)).join(" ")}function a(t,e="",n=null){if("document"in globalThis){if("text"===t)return document.createTextNode(e);const s=document.createElement(t);return function(t,e){if(e)for(const[n,s]of Object.entries(e))void 0!==s&&t.setAttribute(n,s)}(s,n),function(t,e){if(e instanceof Array)for(const n of e)t.appendChild(n);else if(e instanceof HTMLElement)t.appendChild(e);else{if("string"!=typeof e)throw Error("Unexpected element content: "+e);t.textContent=e}}(s,e),s}switch(e instanceof Array&&(e=e.join("")),t){case"text":return e;case"hr":case"br":return`<${t}>`;case"img":case"input":return`<${t} ${n?o(n):""}>`}return`<${t}${n?" "+o(n):""}>${e}</${t}>`}function c(t,e){if(!t.includes(e))return null;let n="",s=!1;for(;t.length;){const r=t.slice(0,1);if(t=t.substr(1),"\\"!==r){if(r===e&&!s)break;n+=r,s=!1}else s=!s}return n}const l=new Map([["#","strong"],["`","code"],["_","u"],["/","i"],["-","del"],[":","span.dim"],[",","sub"],["'","sup"],["$","span.math"]]),h=new Map([["[","]"],["{","}"]]);class u{constructor(t){this.content=t}toHTML=()=>a("text",this.content)}class d{constructor(t,e){const n=l.get(t);if(n.includes(".")){const[t,e]=n.split(".");this.tagName=t,this.className=e}else this.tagName=n;this.content=e,"math"===this.className&&(globalThis.__ContainsFormula__=!0)}toHTML(){const t=void 0===this.className?null:{class:this.className};return a(this.tagName,m(this.content),t)}}class p{constructor(t,e){this.content=t,this.address=e}toHTML(){const t=m(this.content);if(this.address.startsWith("http"))return a("a",t,{href:this.address,target:"_blank"});return a("a",t,{href:"#"+("static/"+this.address)})}}class g{constructor(t,e){this.content=t,this.notation=e}toHTML(){const t=a("rp","("),e=a("rp",")"),n=a("rt",this.notation);return a("ruby",m(this.content).concat([t,n,e]),{"data-notation":this.notation})}}function m(t){function e(){const e=t.charAt(0);return t=t.substring(1),e}function n(t){let e;return"["===t?e=p:"{"===t&&(e=g),e}const s=[];let r="",i="",o="",a=!1,m=!1;for(;t.length;){const p=e();if(l.has(p)){if(a){m?i+=p:r+=p;continue}if(m&&p!=o){i+=p;continue}const n=e();if(n!=p){m?i+=p:r+=p,t=n+t;continue}m?(s.push(new d(p,i)),i="",o=""):(s.push(new u(r)),r="",o=p),m=!m;continue}if(["[","{"].includes(p)&&!m&&!a){const i=p,o=h.get(i);s.push(new u(r)),r="";let a=i;const l=c(t,o);if(null!=l){a+=t.slice(0,l.length+1),t=t.substr(l.length+1);const r=e();if(a+=r,"("===r){const e=c(t,")");if(null!=e){let r=n(i);t=t.substr(e.length+1),s.push(new r(l,e));continue}}}r+=a;continue}if("\\"===p){a=!a;continue}let g;a?(g="\\"+p,a=!1):g=p,m?i+=g:r+=g}return i.length&&s.push(new d(o,i)),r.length&&s.push(new u(r)),s.filter((t=>!(t instanceof u&&!t.content.length))).map((t=>t.toHTML()))}const f=n.language,b=["zh","en"];const w=function(t){for(const[t,e]of Object.entries(b))if(f===e)return(...e)=>e[t];return console.warn("Unexpected language: "+t),(...t)=>t[1]}(f);class y{tagName="";content="";toHTML(){const t=m(this.content);return a(this.tagName,t)}}class L extends y{constructor(t){super();const e=t.split(" "),n=e[0];let s=0;for(const t of n)"#"===t&&(s+=1);s>6&&(s=0),this.tagName="h"+s,this.content=e.slice(1).join(" ")}static pattern=t=>t.match(/^(#+ )/)}class T extends y{tagName="p";constructor(t){super(),this.content=t.trimStart()}}class x extends y{tagName="blockquote";children=[];constructor(t){super(),this.children=t}toHTML(){const t=this.children.map((t=>t.toHTML()));return a(this.tagName,t)}static pattern=t=>">"===t||t.startsWith("> ")}class _ extends y{toHTML=()=>a("hr");static pattern=t=>t.match(/(-\s*-\s*-)|(\*\s*\*\s*\*)/)&&!t.match(/[a-zA-Z0-9]/)}class k extends y{children=[];constructor(t){super(),this.isOrdered=Boolean(k.orderedPattern(t)),this.tagName=this.isOrdered?"ol":"ul",this.children=[k.getContent(t,this.isOrdered)]}push=t=>this.children.push(t);toHTML(){const t=[];for(const e of this.children)if("string"==typeof e){const n=m(e);t.push(a("li",n))}else t.push(e.toHTML());return a(this.tagName,t)}static unorderedPattern=t=>Boolean(t.match(/^([\s\t]*[+-]+ )/));static orderedPattern=t=>Boolean(t.match(/^([\s\t]*[0-9]+. )/));static isListPattern=t=>k.orderedPattern(t)||k.unorderedPattern(t);static getContent(t,e){return e?t.match(/(?<=^([\s\t]*[0-9]+. )).+$/g)[0]:t.match(/(?<=^([\s\t]*[+-]+ )).+$/g)[0]}}class v extends y{headerCells=[""];bodyRows=[[""]];constructor(t,e){super(),this.headerCells=t,this.bodyRows=e}#t=t=>a("th",t);#e=t=>a("td",m(t));#n=t=>a("tr",t.map(this.#t));#s=t=>a("tr",t.map(this.#e));toHTML(){const t=a("thead",this.#n(this.headerCells)),e=a("tbody",this.bodyRows.map(this.#s));return a("div",a("table",[t,e]),{class:"table"})}static pattern=t=>t.startsWith("| ")}class E extends y{source="";description="";constructor(t){super(),t=t.substr(2),this.description=c(t,"]"),t=t.substr(this.description.length+2),this.source=c(t,")")}static containerGenerator(t){return a("div",t,{class:"media-container"})}static patternGenerator(t){return e=>e.startsWith(t+"[")&&e.endsWith(")")}static replaceContentGenerator(t,e){return`${e}<br>${a("a",w("从这里下载！","Download Here!"),{href:t})}`}static srcUrlResolver(t){let e;if(t.startsWith("http"))e=t;else if("location"in globalThis){e=location.hash.slice(1).split("/").slice(0,-1).join("/")+"/"+t}else{e=globalThis.__ResourcePath__+"/"+t}return e}}class C extends E{static pattern=E.patternGenerator("!");toHTML(){const t=a("img","",{src:E.srcUrlResolver(this.source),alt:this.description,loading:"lazy",tabindex:0});return"object"==typeof window&&(t.onclick=t=>window.open(t.target.src),t.onerror=t=>{const e=t.target;e.onclick=null,e.title=this.description,e.classList.add("load-error")}),E.containerGenerator(t)}}class H extends E{static pattern=E.patternGenerator(":");toHTML(){const t=E.srcUrlResolver(this.source),e=a("audio",E.replaceContentGenerator(t,this.description),{src:t,controls:!0});return E.containerGenerator(e)}}class M extends E{static pattern=E.patternGenerator("?");toHTML(){const t=E.srcUrlResolver(this.source),e=a("video",E.replaceContentGenerator(t,this.description),{src:t,controls:"true"});return E.containerGenerator(e)}}const j=t=>E.patternGenerator("@")(t)||t.startsWith("@@@");class P extends E{toHTML(){const t=E.srcUrlResolver(this.source),e=a("iframe",this.description,{src:t,title:this.description,sandbox:"allow-scripts"});return E.containerGenerator(e)}}class N extends y{constructor(t,e){super(),this.lang=e,"object"==typeof window?this.content=t:this.content=t.replaceAll("<","&lt;").replaceAll(">","&gt;")}append(t){this.content+=t}toHTML(){const t=["plaintext","text",""].includes(this.lang);let e,n;"object"!=typeof window||t||globalThis.__LanguageList__.add(this.lang),t?(n="nohighlight",e="PLAINTEXT"):(n=`language-${this.lang}`,e=this.lang.toUpperCase());const s=a("code",this.content,{class:n,tabindex:0});return a("pre",s,{"data-language":e})}static pattern=t=>t.startsWith("```")}class S extends y{summary="";content="";constructor(t,e){super(),this.summary=e,this.content=D(t)}toHTML(){const t=a("summary",this.summary),e=a("details",t),n=a("div",a("div",this.content.map((t=>t.toHTML())),{class:"details-children"}),{class:"details-children-container"});return a("div",[e,n],{class:"details"})}static pattern=t=>t.startsWith(">>>")}class A extends y{content="";description="";constructor(t,e){super(),this.content=t,this.description=e}toHTML(){return globalThis.__ContainsFormula__=!0,a("div",this.content,{class:"math",title:this.description})}static pattern=t=>t.startsWith("$$$")}class $ extends y{static#r=t=>`<style>\n@media (prefers-color-scheme: dark) {\n  :root {\n    color: white;\n    background-color: #121212;\n  }\n}\n</style>\n<script>\nwindow.addEventListener("load", (e) => {\n  const iframeRootEl = e.target.documentElement\n  const parent = window.parent\n  const height = parseFloat(getComputedStyle(iframeRootEl).height)\n  parent.postMessage({\n    height,\n    id: "${t}"\n  }, "*")\n})\n<\/script>`;constructor(t,e){super(),globalThis.__IframeCounter__+=1,this.id="iframe_"+globalThis.__IframeCounter__,this.description=e,"object"==typeof window?this.content=t+$.#r(this.id):this.content=t}toHTML(){const t=a("iframe",this.description,{id:this.id,title:this.description,srcdoc:this.content,sandbox:"allow-scripts"});return E.containerGenerator(t)}}function B(t){let e=0,n=0;for(const s of t){if(s.match(/[^\s\t]/))break;"\t"!==s?(" "===s&&(n+=1),2===n&&(n=0,e+=1)):e+=1}return e}function q(t,e){const n=B(t),s=new k(t);for(;e.length&&k.isListPattern(e[0]);){const t=e.shift(),r=B(t),i=k.orderedPattern(t);if(r>n)s.push(q(t,e));else{if(r!==n||i!==s.isOrdered){e.unshift(t);break}s.push(k.getContent(t,i))}}return s}function W(t,e){let n=t.slice(2)+"\n";for(;e.length;){const t=e.shift();if(!x.pattern(t)){e.unshift(t);break}n+=t.slice(2)+"\n"}const s=D(n);return new x(s)}function R(t){return t.split("|").filter((t=>t.length>0)).map((t=>t.trim()))}function I(t,e){const n=t,s=[];for(;e.length;){const t=e.shift();if(!v.pattern(t)){e.unshift(t);break}s.push(t)}const r=R(n),i=s.map(R);return new v(r,i)}function G(t,e){return function(n,s){const r=n.slice(3);let i="";for(;s.length;){const e=s.shift();if(e===t)break;i+=e+"\n"}return new e(i,r)}}const O=G("```",N),U=G(">>>",S),F=G("$$$",A);function z(t,e){const n=G("@@@",$);return t.startsWith("@@@")?n(t,e):new P(t)}function D(t){const e=function(t){return-1!=t.indexOf("\r")?t.split("\r\n"):t.split("\n")}(t),n=[];for(;e.length;){const t=e.shift();t.length&&(L.pattern(t)?n.push(new L(t)):_.pattern(t)?n.push(new _):x.pattern(t)?n.push(W(t,e)):k.isListPattern(t)?n.push(q(t,e)):v.pattern(t)?n.push(I(t,e)):C.pattern(t)?n.push(new C(t)):H.pattern(t)?n.push(new H(t)):M.pattern(t)?n.push(new M(t)):S.pattern(t)?n.push(U(t,e)):A.pattern(t)?n.push(F(t,e)):N.pattern(t)?n.push(O(t,e)):j(t)?n.push(z(t,e)):n.push(new T(t)))}return n}function J(t){return function(e){"Enter"!==e.key&&" "!==e.key||t.click()}}function X(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function Z(t,e){globalThis.__LanguageList__=new Set,globalThis.__ContainsFormula__=!1,globalThis.__IframeCounter__=0;let n=D(e).map((t=>t.toHTML()));n.length||(n=el("h1","Empty")),t.innerHTML="",n.forEach((e=>t.appendChild(e))),t.style.display="block",t.querySelectorAll("[tabindex='0']").forEach((t=>{t.onkeydown=J(t)})),X(),async function(){function t(){const t=Array.from(globalThis.__LanguageList__),e=t.filter((t=>!r.getLanguage(t))).map((t=>import(`./libs/highlight-es/languages/${t.toLowerCase()}.js`)));Promise.all(e).then((e=>e.forEach(((e,n)=>{const s=t[n],i=e.default;r.registerLanguage(s,i)})))).then((()=>r.highlightAll())).catch((t=>console.error(t)))}globalThis.__LanguageList__.size&&(r?t():await import("./libs/highlight-es/highlight.min.js").then((t=>r=t.default)).then(t).catch((t=>console.error(t))))}().then((()=>globalThis.__LanguageList__=null)),async function(){function t(){document.querySelectorAll(".math").forEach((t=>{const e=t.textContent;try{i.render(e,t,s)}catch(n){if(!(n instanceof i.ParseError))throw n;t.innerHTML=("Error in LaTeX '"+e+"': "+n.message).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}))}if(!globalThis.__ContainsFormula__)return;if(i)return void t();const e=document.createElement("link");e.rel="stylesheet",e.href="./dist/libs/katex/katex.min.css",document.head.appendChild(e);try{const e=await import("./libs/katex/katex.min.js");i=e.default,t()}catch(t){console.error(t)}}().then((()=>globalThis.__ContainsFormula__=!1))}function K(t){const e=new Date(t.timestamp),n=a("code",(new Intl.DateTimeFormat).format(e)),s=a("span",t.title);return a("li",[n,a("text",": "),s],{tabindex:0,"data-target-blog":t.link})}function Q(t){return a("li",a("span",t),{tabindex:0})}const V=document.querySelector("main"),Y=document.querySelector("article"),tt=V.querySelector("#article-list"),et=V.querySelector("#directory-description"),nt=V.querySelector("paging-view");function st(t,e){const{current:n,total:s}=t;nt.setPage(n,s),et.innerHTML="","directoryDescription"in t&&Z(et,t.directoryDescription),tt.innerHTML="",t.content.map(e).forEach((t=>tt.appendChild(t))),tt.querySelectorAll("[tabindex='0']").forEach((t=>{t.onkeydown=J(t)})),Y.style.display="none",V.style.display="block",document.body.scrollTop=0,document.documentElement.scrollTop=0}async function rt(n){const s=document.querySelector("main"),r=document.querySelector("article"),i="./.index/";if(!location.hash)return void ot.homepage();const o=location.hash.slice(1);if(s.classList.add("disabled"),ot.isIn.newestPage()){const t=i+"newest_"+at.current(),n=await e(t);if(!n)return;st(n,K)}else if(ot.isIn.directory()){const t=i+o.split("/").slice(0,-1).join("+")+"_"+at.current(),n=await e(t);if(!n)return;st(n,Q)}else if(ot.isIn.article()){const e=await async function(e){return t&&t.abort(),t=new AbortController,await fetch(e,{signal:t.signal}).then((async e=>{if(200!=e.status)throw e.status;const n=await e.text();return t=null,n})).catch((t=>{if("number"!=typeof t)return console.error(t),null;switch(t){case 404:return"# 404 Not Found";case 500:return"# 500 Internal Server Error";case DOMException:console.error(t);break;default:return console.log("Markdown request error: "+e),console.error(t),"# Unexpected request error"}}))}("./"+o);if(!e)return;s.style.display="none",Z(r,e)}else ot.homepage();s.setAttribute("data-is-root","static/"===o),s.classList.remove("disabled")}window.addEventListener("hashchange",rt),window.addEventListener("load",rt);const it="static/",ot={homepage(){location.hash=it},open(t){location.hash+=t},jumpTo(t){location.hash=t},parent(){if(this.isIn.root()||this.isIn.newestPage())return it;const t=location.hash.slice(1).split("/");if(this.isIn.directory())return t.slice(0,-2).join("/")+"/";if(this.isIn.article())return t.slice(0,-1).join("/")+"/";throw new Error("Unexpected hash: "+location.hash)},isIn:{root:()=>location.hash==="#"+it,newestPage:()=>"#newest/"===location.hash,directory:()=>location.hash.startsWith("#static")&&location.hash.endsWith("/"),article:()=>location.hash.startsWith("#static")&&location.hash.endsWith(".md")}};const at=new class{#i=[1];current=()=>this.#i[this.length()-1];next=()=>this.#i[this.length()-1]+=1;prev=()=>this.#i[this.length()-1]-=1;jumpTo=t=>this.#i[this.length()-1]=Number(t);length=()=>this.#i.length;back(){this.#i.pop(),this.#i.length||this.#i.push(1)}open(){this.#i.push(1)}},ct=t=>a("button",a("span",t),{class:"icon-btn"});class lt extends HTMLElement{#o={};constructor(){super(),this.#o.input=a("input","1",{type:"number",min:1,max:1}),this.#o.maxPage=a("span","1");const t=this.#o.prevBtn=ct(w("上一页","Prev")),e=this.#o.nextBtn=ct(w("下一页","Next"));t.id="prev-btn",e.id="next-btn";const n=a("label",[this.#o.input,a("text","/"),this.#o.maxPage]);this.#a();for(const s of[t,n,e])this.appendChild(s)}#a(){this.#o.input.addEventListener("keydown",(t=>{if("Enter"!==t.key)return;const e=t.target.value;if(!/^\d+$/.test(e))return void(t.target.value=1);const n=Number(e);n>0&&n<=this.#o.input.max?(at.jumpTo(n),rt()):t.target.value=1})),this.#o.prevBtn.addEventListener("click",(()=>{at.current()>0&&(at.prev(),rt())})),this.#o.nextBtn.addEventListener("click",(()=>{at.current()<this.#o.input.max&&(at.next(),rt())}))}setPage(t,e){let n=!1,s=!1,r=!1;1===e?r=!0:(1===t&&(n=!0),t===e&&(s=!0)),this.#o.prevBtn.disabled=r||n,this.#o.nextBtn.disabled=r||s,this.#o.maxPage.textContent=e,this.#o.input.value=t,this.#o.input.max=e,this.classList.toggle("hidden",r)}}customElements.define("paging-view",lt);const ht=document.querySelector("main"),ut=ht.querySelector("#previous-dir li"),dt=ht.querySelector("#article-list");ut.addEventListener("click",(()=>{at.back(),ot.jumpTo(ot.parent())})),dt.addEventListener("click",(t=>{const e=t.target;e!==dt&&(e.getAttribute("data-target-blog")?(at.open(),ot.jumpTo(e.getAttribute("data-target-blog"))):(e.innerText.endsWith("/")&&at.open(),ot.open(e.innerText)))}));const pt=(t,e)=>a("button",a("div","",{"data-image-name":t}),{id:t,title:e});class gt extends HTMLElement{#o={};constructor(){super();const t=this.#o.switcher=pt("switcher",w("切换浮动操作按钮","Switch The FAB")),e=[this.#o.backToParent=pt("back-to-parent",w("返回父级","Back to Parent")),this.#o.backToTop=pt("back-to-top",w("返回顶部","Back to Top"))];for(const[t,n]of Object.entries(e))n.style.setProperty("--fab-item-index",Number(t)+1);this.classList.add("hidden"),this.#a();for(const n of[t].concat(e))this.appendChild(n)}#a(){this.#o.switcher.addEventListener("click",(()=>{this.classList.toggle("hidden")})),this.#o.backToParent.addEventListener("click",(()=>{console.log(ot.parent()),ot.jumpTo(ot.parent())})),this.#o.backToTop.addEventListener("click",(()=>{X()}))}}customElements.define("fab-icon",gt);const mt=document.querySelector("#light-btn"),ft=document.querySelector("#dark-btn");mt.onkeydown=J(mt),ft.onkeydown=J(ft),window.addEventListener("popstate",(()=>{location.hash.endsWith("/")&&at.back()})),window.addEventListener("message",(t=>{if("null"!=t.origin)return;const{id:e,height:n}=t.data;document.getElementById(e).style.height=n+"px"}),!1),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").catch((function(t){console.error("Registration failed with "+t)}));
//# sourceMappingURL=index.min.js.map
