import{D as e,C as s,e as t,l as i,d as a,a as n}from"./chunks/echarts.min.js";import l from"../user/build.config.js";import r from"./libs/resolve-pathname/index.js";let g=null;async function h(e){return g&&g.abort(),g=new AbortController,await fetch(e,{signal:g.signal}).then((async e=>{const s=await e.json();return g=null,s})).catch((s=>(console.log("JSON request error: "+e),console.error(s),null)))}function o(e){return new Promise(((s,t)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=e,document.head.appendChild(i),i.onload=s,i.onerror=t}))}const c=new class extends e{name="Highlight.js";_targetElList=()=>document.querySelectorAll("pre.code-block code");async#e(e=[]){const s=e.filter((e=>!this._module.getLanguage(e))).map((e=>function(e){switch(e){case"../../libs/highlight-es/languages/1c.js":return import("./libs/highlight-es/languages/1c.js");case"../../libs/highlight-es/languages/abnf.js":return import("./libs/highlight-es/languages/abnf.js");case"../../libs/highlight-es/languages/accesslog.js":return import("./libs/highlight-es/languages/accesslog.js");case"../../libs/highlight-es/languages/actionscript.js":return import("./libs/highlight-es/languages/actionscript.js");case"../../libs/highlight-es/languages/ada.js":return import("./libs/highlight-es/languages/ada.js");case"../../libs/highlight-es/languages/angelscript.js":return import("./libs/highlight-es/languages/angelscript.js");case"../../libs/highlight-es/languages/apache.js":return import("./libs/highlight-es/languages/apache.js");case"../../libs/highlight-es/languages/applescript.js":return import("./libs/highlight-es/languages/applescript.js");case"../../libs/highlight-es/languages/arcade.js":return import("./libs/highlight-es/languages/arcade.js");case"../../libs/highlight-es/languages/arduino.js":return import("./libs/highlight-es/languages/arduino.js");case"../../libs/highlight-es/languages/armasm.js":return import("./libs/highlight-es/languages/armasm.js");case"../../libs/highlight-es/languages/asciidoc.js":return import("./libs/highlight-es/languages/asciidoc.js");case"../../libs/highlight-es/languages/aspectj.js":return import("./libs/highlight-es/languages/aspectj.js");case"../../libs/highlight-es/languages/autohotkey.js":return import("./libs/highlight-es/languages/autohotkey.js");case"../../libs/highlight-es/languages/autoit.js":return import("./libs/highlight-es/languages/autoit.js");case"../../libs/highlight-es/languages/avrasm.js":return import("./libs/highlight-es/languages/avrasm.js");case"../../libs/highlight-es/languages/awk.js":return import("./libs/highlight-es/languages/awk.js");case"../../libs/highlight-es/languages/axapta.js":return import("./libs/highlight-es/languages/axapta.js");case"../../libs/highlight-es/languages/bash.js":return import("./libs/highlight-es/languages/bash.js");case"../../libs/highlight-es/languages/basic.js":return import("./libs/highlight-es/languages/basic.js");case"../../libs/highlight-es/languages/bnf.js":return import("./libs/highlight-es/languages/bnf.js");case"../../libs/highlight-es/languages/brainfuck.js":return import("./libs/highlight-es/languages/brainfuck.js");case"../../libs/highlight-es/languages/c.js":return import("./libs/highlight-es/languages/c.js");case"../../libs/highlight-es/languages/cal.js":return import("./libs/highlight-es/languages/cal.js");case"../../libs/highlight-es/languages/capnproto.js":return import("./libs/highlight-es/languages/capnproto.js");case"../../libs/highlight-es/languages/ceylon.js":return import("./libs/highlight-es/languages/ceylon.js");case"../../libs/highlight-es/languages/clean.js":return import("./libs/highlight-es/languages/clean.js");case"../../libs/highlight-es/languages/clojure-repl.js":return import("./libs/highlight-es/languages/clojure-repl.js");case"../../libs/highlight-es/languages/clojure.js":return import("./libs/highlight-es/languages/clojure.js");case"../../libs/highlight-es/languages/cmake.js":return import("./libs/highlight-es/languages/cmake.js");case"../../libs/highlight-es/languages/coffeescript.js":return import("./libs/highlight-es/languages/coffeescript.js");case"../../libs/highlight-es/languages/coq.js":return import("./libs/highlight-es/languages/coq.js");case"../../libs/highlight-es/languages/cos.js":return import("./libs/highlight-es/languages/cos.js");case"../../libs/highlight-es/languages/cpp.js":return import("./libs/highlight-es/languages/cpp.js");case"../../libs/highlight-es/languages/crmsh.js":return import("./libs/highlight-es/languages/crmsh.js");case"../../libs/highlight-es/languages/crystal.js":return import("./libs/highlight-es/languages/crystal.js");case"../../libs/highlight-es/languages/csharp.js":return import("./libs/highlight-es/languages/csharp.js");case"../../libs/highlight-es/languages/csp.js":return import("./libs/highlight-es/languages/csp.js");case"../../libs/highlight-es/languages/css.js":return import("./libs/highlight-es/languages/css.js");case"../../libs/highlight-es/languages/d.js":return import("./libs/highlight-es/languages/d.js");case"../../libs/highlight-es/languages/dart.js":return import("./libs/highlight-es/languages/dart.js");case"../../libs/highlight-es/languages/delphi.js":return import("./libs/highlight-es/languages/delphi.js");case"../../libs/highlight-es/languages/diff.js":return import("./libs/highlight-es/languages/diff.js");case"../../libs/highlight-es/languages/django.js":return import("./libs/highlight-es/languages/django.js");case"../../libs/highlight-es/languages/dns.js":return import("./libs/highlight-es/languages/dns.js");case"../../libs/highlight-es/languages/dockerfile.js":return import("./libs/highlight-es/languages/dockerfile.js");case"../../libs/highlight-es/languages/dos.js":return import("./libs/highlight-es/languages/dos.js");case"../../libs/highlight-es/languages/dsconfig.js":return import("./libs/highlight-es/languages/dsconfig.js");case"../../libs/highlight-es/languages/dts.js":return import("./libs/highlight-es/languages/dts.js");case"../../libs/highlight-es/languages/dust.js":return import("./libs/highlight-es/languages/dust.js");case"../../libs/highlight-es/languages/ebnf.js":return import("./libs/highlight-es/languages/ebnf.js");case"../../libs/highlight-es/languages/elixir.js":return import("./libs/highlight-es/languages/elixir.js");case"../../libs/highlight-es/languages/elm.js":return import("./libs/highlight-es/languages/elm.js");case"../../libs/highlight-es/languages/erb.js":return import("./libs/highlight-es/languages/erb.js");case"../../libs/highlight-es/languages/erlang-repl.js":return import("./libs/highlight-es/languages/erlang-repl.js");case"../../libs/highlight-es/languages/erlang.js":return import("./libs/highlight-es/languages/erlang.js");case"../../libs/highlight-es/languages/excel.js":return import("./libs/highlight-es/languages/excel.js");case"../../libs/highlight-es/languages/fix.js":return import("./libs/highlight-es/languages/fix.js");case"../../libs/highlight-es/languages/flix.js":return import("./libs/highlight-es/languages/flix.js");case"../../libs/highlight-es/languages/fortran.js":return import("./libs/highlight-es/languages/fortran.js");case"../../libs/highlight-es/languages/fsharp.js":return import("./libs/highlight-es/languages/fsharp.js");case"../../libs/highlight-es/languages/gams.js":return import("./libs/highlight-es/languages/gams.js");case"../../libs/highlight-es/languages/gauss.js":return import("./libs/highlight-es/languages/gauss.js");case"../../libs/highlight-es/languages/gcode.js":return import("./libs/highlight-es/languages/gcode.js");case"../../libs/highlight-es/languages/gherkin.js":return import("./libs/highlight-es/languages/gherkin.js");case"../../libs/highlight-es/languages/glsl.js":return import("./libs/highlight-es/languages/glsl.js");case"../../libs/highlight-es/languages/gml.js":return import("./libs/highlight-es/languages/gml.js");case"../../libs/highlight-es/languages/go.js":return import("./libs/highlight-es/languages/go.js");case"../../libs/highlight-es/languages/golo.js":return import("./libs/highlight-es/languages/golo.js");case"../../libs/highlight-es/languages/gradle.js":return import("./libs/highlight-es/languages/gradle.js");case"../../libs/highlight-es/languages/graphql.js":return import("./libs/highlight-es/languages/graphql.js");case"../../libs/highlight-es/languages/groovy.js":return import("./libs/highlight-es/languages/groovy.js");case"../../libs/highlight-es/languages/haml.js":return import("./libs/highlight-es/languages/haml.js");case"../../libs/highlight-es/languages/handlebars.js":return import("./libs/highlight-es/languages/handlebars.js");case"../../libs/highlight-es/languages/haskell.js":return import("./libs/highlight-es/languages/haskell.js");case"../../libs/highlight-es/languages/haxe.js":return import("./libs/highlight-es/languages/haxe.js");case"../../libs/highlight-es/languages/hsp.js":return import("./libs/highlight-es/languages/hsp.js");case"../../libs/highlight-es/languages/http.js":return import("./libs/highlight-es/languages/http.js");case"../../libs/highlight-es/languages/hy.js":return import("./libs/highlight-es/languages/hy.js");case"../../libs/highlight-es/languages/inform7.js":return import("./libs/highlight-es/languages/inform7.js");case"../../libs/highlight-es/languages/ini.js":return import("./libs/highlight-es/languages/ini.js");case"../../libs/highlight-es/languages/irpf90.js":return import("./libs/highlight-es/languages/irpf90.js");case"../../libs/highlight-es/languages/isbl.js":return import("./libs/highlight-es/languages/isbl.js");case"../../libs/highlight-es/languages/java.js":return import("./libs/highlight-es/languages/java.js");case"../../libs/highlight-es/languages/javascript.js":return import("./libs/highlight-es/languages/javascript.js");case"../../libs/highlight-es/languages/jboss-cli.js":return import("./libs/highlight-es/languages/jboss-cli.js");case"../../libs/highlight-es/languages/json.js":return import("./libs/highlight-es/languages/json.js");case"../../libs/highlight-es/languages/julia-repl.js":return import("./libs/highlight-es/languages/julia-repl.js");case"../../libs/highlight-es/languages/julia.js":return import("./libs/highlight-es/languages/julia.js");case"../../libs/highlight-es/languages/kotlin.js":return import("./libs/highlight-es/languages/kotlin.js");case"../../libs/highlight-es/languages/lasso.js":return import("./libs/highlight-es/languages/lasso.js");case"../../libs/highlight-es/languages/latex.js":return import("./libs/highlight-es/languages/latex.js");case"../../libs/highlight-es/languages/ldif.js":return import("./libs/highlight-es/languages/ldif.js");case"../../libs/highlight-es/languages/leaf.js":return import("./libs/highlight-es/languages/leaf.js");case"../../libs/highlight-es/languages/less.js":return import("./libs/highlight-es/languages/less.js");case"../../libs/highlight-es/languages/lisp.js":return import("./libs/highlight-es/languages/lisp.js");case"../../libs/highlight-es/languages/livecodeserver.js":return import("./libs/highlight-es/languages/livecodeserver.js");case"../../libs/highlight-es/languages/livescript.js":return import("./libs/highlight-es/languages/livescript.js");case"../../libs/highlight-es/languages/llvm.js":return import("./libs/highlight-es/languages/llvm.js");case"../../libs/highlight-es/languages/lsl.js":return import("./libs/highlight-es/languages/lsl.js");case"../../libs/highlight-es/languages/lua.js":return import("./libs/highlight-es/languages/lua.js");case"../../libs/highlight-es/languages/makefile.js":return import("./libs/highlight-es/languages/makefile.js");case"../../libs/highlight-es/languages/markdown.js":return import("./libs/highlight-es/languages/markdown.js");case"../../libs/highlight-es/languages/mathematica.js":return import("./libs/highlight-es/languages/mathematica.js");case"../../libs/highlight-es/languages/matlab.js":return import("./libs/highlight-es/languages/matlab.js");case"../../libs/highlight-es/languages/maxima.js":return import("./libs/highlight-es/languages/maxima.js");case"../../libs/highlight-es/languages/mel.js":return import("./libs/highlight-es/languages/mel.js");case"../../libs/highlight-es/languages/mercury.js":return import("./libs/highlight-es/languages/mercury.js");case"../../libs/highlight-es/languages/mipsasm.js":return import("./libs/highlight-es/languages/mipsasm.js");case"../../libs/highlight-es/languages/mizar.js":return import("./libs/highlight-es/languages/mizar.js");case"../../libs/highlight-es/languages/mojolicious.js":return import("./libs/highlight-es/languages/mojolicious.js");case"../../libs/highlight-es/languages/monkey.js":return import("./libs/highlight-es/languages/monkey.js");case"../../libs/highlight-es/languages/moonscript.js":return import("./libs/highlight-es/languages/moonscript.js");case"../../libs/highlight-es/languages/n1ql.js":return import("./libs/highlight-es/languages/n1ql.js");case"../../libs/highlight-es/languages/nestedtext.js":return import("./libs/highlight-es/languages/nestedtext.js");case"../../libs/highlight-es/languages/nginx.js":return import("./libs/highlight-es/languages/nginx.js");case"../../libs/highlight-es/languages/nim.js":return import("./libs/highlight-es/languages/nim.js");case"../../libs/highlight-es/languages/nix.js":return import("./libs/highlight-es/languages/nix.js");case"../../libs/highlight-es/languages/node-repl.js":return import("./libs/highlight-es/languages/node-repl.js");case"../../libs/highlight-es/languages/nsis.js":return import("./libs/highlight-es/languages/nsis.js");case"../../libs/highlight-es/languages/objectivec.js":return import("./libs/highlight-es/languages/objectivec.js");case"../../libs/highlight-es/languages/ocaml.js":return import("./libs/highlight-es/languages/ocaml.js");case"../../libs/highlight-es/languages/openscad.js":return import("./libs/highlight-es/languages/openscad.js");case"../../libs/highlight-es/languages/oxygene.js":return import("./libs/highlight-es/languages/oxygene.js");case"../../libs/highlight-es/languages/parser3.js":return import("./libs/highlight-es/languages/parser3.js");case"../../libs/highlight-es/languages/perl.js":return import("./libs/highlight-es/languages/perl.js");case"../../libs/highlight-es/languages/pf.js":return import("./libs/highlight-es/languages/pf.js");case"../../libs/highlight-es/languages/pgsql.js":return import("./libs/highlight-es/languages/pgsql.js");case"../../libs/highlight-es/languages/php-template.js":return import("./libs/highlight-es/languages/php-template.js");case"../../libs/highlight-es/languages/php.js":return import("./libs/highlight-es/languages/php.js");case"../../libs/highlight-es/languages/plaintext.js":return import("./libs/highlight-es/languages/plaintext.js");case"../../libs/highlight-es/languages/pony.js":return import("./libs/highlight-es/languages/pony.js");case"../../libs/highlight-es/languages/powershell.js":return import("./libs/highlight-es/languages/powershell.js");case"../../libs/highlight-es/languages/processing.js":return import("./libs/highlight-es/languages/processing.js");case"../../libs/highlight-es/languages/profile.js":return import("./libs/highlight-es/languages/profile.js");case"../../libs/highlight-es/languages/prolog.js":return import("./libs/highlight-es/languages/prolog.js");case"../../libs/highlight-es/languages/properties.js":return import("./libs/highlight-es/languages/properties.js");case"../../libs/highlight-es/languages/protobuf.js":return import("./libs/highlight-es/languages/protobuf.js");case"../../libs/highlight-es/languages/puppet.js":return import("./libs/highlight-es/languages/puppet.js");case"../../libs/highlight-es/languages/purebasic.js":return import("./libs/highlight-es/languages/purebasic.js");case"../../libs/highlight-es/languages/python-repl.js":return import("./libs/highlight-es/languages/python-repl.js");case"../../libs/highlight-es/languages/python.js":return import("./libs/highlight-es/languages/python.js");case"../../libs/highlight-es/languages/q.js":return import("./libs/highlight-es/languages/q.js");case"../../libs/highlight-es/languages/qml.js":return import("./libs/highlight-es/languages/qml.js");case"../../libs/highlight-es/languages/r.js":return import("./libs/highlight-es/languages/r.js");case"../../libs/highlight-es/languages/reasonml.js":return import("./libs/highlight-es/languages/reasonml.js");case"../../libs/highlight-es/languages/rib.js":return import("./libs/highlight-es/languages/rib.js");case"../../libs/highlight-es/languages/roboconf.js":return import("./libs/highlight-es/languages/roboconf.js");case"../../libs/highlight-es/languages/routeros.js":return import("./libs/highlight-es/languages/routeros.js");case"../../libs/highlight-es/languages/rsl.js":return import("./libs/highlight-es/languages/rsl.js");case"../../libs/highlight-es/languages/ruby.js":return import("./libs/highlight-es/languages/ruby.js");case"../../libs/highlight-es/languages/ruleslanguage.js":return import("./libs/highlight-es/languages/ruleslanguage.js");case"../../libs/highlight-es/languages/rust.js":return import("./libs/highlight-es/languages/rust.js");case"../../libs/highlight-es/languages/sas.js":return import("./libs/highlight-es/languages/sas.js");case"../../libs/highlight-es/languages/scala.js":return import("./libs/highlight-es/languages/scala.js");case"../../libs/highlight-es/languages/scheme.js":return import("./libs/highlight-es/languages/scheme.js");case"../../libs/highlight-es/languages/scilab.js":return import("./libs/highlight-es/languages/scilab.js");case"../../libs/highlight-es/languages/scss.js":return import("./libs/highlight-es/languages/scss.js");case"../../libs/highlight-es/languages/shell.js":return import("./libs/highlight-es/languages/shell.js");case"../../libs/highlight-es/languages/smali.js":return import("./libs/highlight-es/languages/smali.js");case"../../libs/highlight-es/languages/smalltalk.js":return import("./libs/highlight-es/languages/smalltalk.js");case"../../libs/highlight-es/languages/sml.js":return import("./libs/highlight-es/languages/sml.js");case"../../libs/highlight-es/languages/sqf.js":return import("./libs/highlight-es/languages/sqf.js");case"../../libs/highlight-es/languages/sql.js":return import("./libs/highlight-es/languages/sql.js");case"../../libs/highlight-es/languages/stan.js":return import("./libs/highlight-es/languages/stan.js");case"../../libs/highlight-es/languages/stata.js":return import("./libs/highlight-es/languages/stata.js");case"../../libs/highlight-es/languages/step21.js":return import("./libs/highlight-es/languages/step21.js");case"../../libs/highlight-es/languages/stylus.js":return import("./libs/highlight-es/languages/stylus.js");case"../../libs/highlight-es/languages/subunit.js":return import("./libs/highlight-es/languages/subunit.js");case"../../libs/highlight-es/languages/swift.js":return import("./libs/highlight-es/languages/swift.js");case"../../libs/highlight-es/languages/taggerscript.js":return import("./libs/highlight-es/languages/taggerscript.js");case"../../libs/highlight-es/languages/tap.js":return import("./libs/highlight-es/languages/tap.js");case"../../libs/highlight-es/languages/tcl.js":return import("./libs/highlight-es/languages/tcl.js");case"../../libs/highlight-es/languages/thrift.js":return import("./libs/highlight-es/languages/thrift.js");case"../../libs/highlight-es/languages/toml.js":return import("./libs/highlight-es/languages/toml.js");case"../../libs/highlight-es/languages/tp.js":return import("./libs/highlight-es/languages/tp.js");case"../../libs/highlight-es/languages/twig.js":return import("./libs/highlight-es/languages/twig.js");case"../../libs/highlight-es/languages/typescript.js":return import("./libs/highlight-es/languages/typescript.js");case"../../libs/highlight-es/languages/vala.js":return import("./libs/highlight-es/languages/vala.js");case"../../libs/highlight-es/languages/vbnet.js":return import("./libs/highlight-es/languages/vbnet.js");case"../../libs/highlight-es/languages/vbscript-html.js":return import("./libs/highlight-es/languages/vbscript-html.js");case"../../libs/highlight-es/languages/vbscript.js":return import("./libs/highlight-es/languages/vbscript.js");case"../../libs/highlight-es/languages/verilog.js":return import("./libs/highlight-es/languages/verilog.js");case"../../libs/highlight-es/languages/vhdl.js":return import("./libs/highlight-es/languages/vhdl.js");case"../../libs/highlight-es/languages/vim.js":return import("./libs/highlight-es/languages/vim.js");case"../../libs/highlight-es/languages/wasm.js":return import("./libs/highlight-es/languages/wasm.js");case"../../libs/highlight-es/languages/wren.js":return import("./libs/highlight-es/languages/wren.js");case"../../libs/highlight-es/languages/x86asm.js":return import("./libs/highlight-es/languages/x86asm.js");case"../../libs/highlight-es/languages/xl.js":return import("./libs/highlight-es/languages/xl.js");case"../../libs/highlight-es/languages/xml.js":return import("./libs/highlight-es/languages/xml.js");case"../../libs/highlight-es/languages/xquery.js":return import("./libs/highlight-es/languages/xquery.js");case"../../libs/highlight-es/languages/yaml.js":return import("./libs/highlight-es/languages/yaml.js");case"../../libs/highlight-es/languages/zephir.js":return import("./libs/highlight-es/languages/zephir.js");default:return new Promise((function(s,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`../../libs/highlight-es/languages/${e.toLowerCase()}.js`)));await Promise.all(s).then((s=>s.forEach(((s,t)=>{const i=e[t],a=s.default;this._module.registerLanguage(i,a)})))).catch(this.loadErrResolver)}loadCondition(e){return e.size>0}renderItem(e){this._module.highlightElement(e)}async beforeRender(e=new Set){await this.#e(Array.from(e))}async importModule(){o("./dist/libs/highlight-es/github-dark.css");return(await import("./libs/highlight-es/highlight.min.js")).default}};var u=c.render.bind(c);const{katexOptions:p}=l;const d=new class extends e{name="KaTeX";_targetElList=()=>document.querySelectorAll(".math");loadCondition(e){return e}renderErrResolver(s,t){const i=t.textContent;s instanceof this._module.ParseError?t.innerHTML=("Error in LaTeX '"+i+"': "+s.message).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(t.textContent=this.name+" "+e.renderErrMsg,console.error(s))}renderItem(e){const s=e.textContent;this._module.render(s,e,p)}async importModule(){o("./dist/libs/katex/katex.min.css");return(await import("./libs/katex/katex.min.js")).default}};var m=d.render.bind(d);function b(e,s){const t=document.createElement("script");return t.src=e,t.type="text/javascript",document.head.appendChild(t),new Promise(((i,a)=>{t.onload=function(){if(!(s in globalThis)){const e=`Module ${s} does not support this import method.`;console.error(e),a(e)}const e=globalThis[s];globalThis[s]=void 0,i(e)},t.onerror=function(t){console.error(`Error loading dynamically imported module "${s}": ${e}`),a(t)}}))}globalThis.raphael=null;const{flowchartOptions:j}=l;const f=new class extends s{_targetElList=()=>document.querySelectorAll(".flowchart-container");constructor(){super()}renderItem(e,s){this._module.parse(s).drawSVG(e,j)}async importModule(){globalThis.raphael=await b("./dist/libs/flowchart.js/raphael.min.js","raphael");return await b("./dist/libs/flowchart.js/flowchart.min.js","flowchart")}};var w=f.render.bind(f);const y=new class extends s{_targetElList=()=>document.querySelectorAll(".sequencechart-container");constructor(){super()}renderItem(e,s){const t=new this._module(s);e.appendChild(t.dom())}async importModule(){return(await import("./libs/sequence-diagram/sequence-diagram-web.mjs")).SequenceDiagram}};var v=y.render.bind(y);const{language:_,ganttOptions:L}=l;"language"in L||(L.language=_);const T=new class extends s{_targetElList=()=>document.querySelectorAll(".ganttchart-container");renderItem(e,s){new this._module(e,s,L)}async importModule(){o("./dist/libs/frappe-gantt/frappe-gantt.min.css");return(await import("./libs/frappe-gantt/frappe-gantt.min.js")).default}};var k=T.render.bind(T);let C=null;const{railroadOptions:x}=l,E=/[\x00-\x7F]/,S=/['"]([^'"]*[/\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]+[^'"]*)['"]/gu;const H=new class extends s{_targetElList=()=>document.querySelectorAll(".railroad-container");renderItem(e,s=""){const t=C.CHAR_WIDTH,i=S.test(s),a=(s.match(S)||[]).map((e=>e.slice(1,-1))).every((e=>E.test(e))),n=i&&(a?13:14)||C.CHAR_WIDTH;C.CHAR_WIDTH<n&&(C.CHAR_WIDTH=n);const l=this._module.concat(e);new Function("Diagram","ComplexDiagram","Sequence","Stack","OptionalSequence","AlternatingSequence","Choice","HorizontalChoice","MultipleChoice","Optional","OneOrMore","ZeroOrMore","Group","Start","End","Terminal","NonTerminal","Comment","Skip","Block","targetElement",s+".addTo(targetElement)").apply(null,l),C.CHAR_WIDTH=t}async importModule(){o("./dist/libs/railroad-diagrams/railroad.css");const e=await import("./libs/railroad-diagrams/railroad.min.js"),{default:s,Options:t}=e;return Object.assign(t,{VS:x.verticalGap,AR:x.arcRadius,INTERNAL_ALIGNMENT:x.internalAlignment,CHAR_WIDTH:x.charWidth,COMMENT_CHAR_WIDTH:x.commentCharWidth}),C=t,[s.Diagram,s.ComplexDiagram,s.Sequence,s.Stack,s.OptionalSequence,s.AlternatingSequence,s.Choice,s.HorizontalChoice,s.MultipleChoice,s.Optional,s.OneOrMore,s.ZeroOrMore,s.Group,s.Start,s.End,s.Terminal,s.NonTerminal,s.Comment,s.Skip,s.Block]}};var q=H.render.bind(H);const{qrcodeOptions:M}=l;const I=new class extends s{_targetElList=()=>document.querySelectorAll(".qrcode-container");#s=new MutationObserver(this.renderAll.bind(this));renderItem(e){const s=getComputedStyle(document.body),t=s.getPropertyValue("--default-tx-color"),i=s.getPropertyValue("--chart-bg-color"),a=Object.assign({},M),n=e.__QRCodeContent__,l=a.width||256;a.color=t,a.background=i,a.content=n||a.content||(()=>{throw new Error("No QRCode content provided.")})();const r=new this._module(a);e.style.width=l+"px",e.innerHTML=r.svg()}async importModule(){const e=await b("./dist/libs/qrcode-svg/qrcode.min.js","QRCode"),s=document.body;return this.#s.observe(s,{attributes:!0,attributeFilter:["class"]}),e}};var A=I.render.bind(I);const R=new Map([["echarts",t],["flow-chart",w],["sequence-chart",v],["gantt-chart",k],["railroad-chart",q],["qrcode",A]]);async function W(e=new Set){for(const s of e){if(!R.has(s)){console.error("Unknown chart type: "+s);continue}const e=R.get(s);await e()}}const N=()=>document.querySelectorAll("iframe[srcdoc]");function P(e){N().forEach((s=>s.contentWindow.postMessage({fontSize:e},"*")))}function O(){const e=document.body.classList.contains("dark")?"dark":"light";N().forEach((s=>s.contentWindow.postMessage({theme:e},"*")))}function $(e){return Object.entries(e).filter((([e,s])=>void 0!==s||!1!==s)).map((([e,s])=>"boolean"==typeof s?e:`${e}="${function(e){return e instanceof Array?e.join(" ").replaceAll('"',"&quot;"):e.toString().replaceAll('"',"&quot;")}(s)}"`)).join(" ")}function D(e,s){return`<${e}${s?" "+$(s):""}>`}function F(e,s="",t=null){if(null!==s&&"object"==typeof s&&s.constructor===Object&&(t=s,s=""),"document"in globalThis){if("text"===e)return document.createTextNode(s);const i=document.createElement(e);return function(e,s){if(s)for(const[t,i]of Object.entries(s))void 0!==i&&!1!==i&&(i instanceof Function?e[t]=i:i instanceof Array?e.setAttribute(t,i.join(" ")):e.setAttribute(t,i))}(i,t),function(e,s){if(s instanceof Array)for(const t of s)e.appendChild(t);else if(s instanceof HTMLElement)e.appendChild(s);else{if("string"!=typeof s)throw Error("Unexpected element content: "+s);e.textContent=s}}(i,s),i}switch(s instanceof Array&&(s=s.join("")),e){case"text":return s;case"hr":case"br":return D(e);case"img":case"input":return D(e,t)}return`<${e}${t?" "+$(t):""}>${s}</${e}>`}const G=[/[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]/gu,/[A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]+/g,/\p{Script=Greek}+/gu,/\p{Script=Arabic}+/gu,/\p{Script=Cyrillic}+/gu,/(\-|\+)?\d+(\.\d+)?/g];function U(e=""){if(0===e.length)return[];return G.map((s=>e.match(s)||[])).reduce(((e,s)=>e.concat(s)),[])}function B(e,s,t=!1){if(!e.includes(s))return null;let i="",a=!1;for(;e.length;){const n=e.slice(0,1);if(e=e.substr(1),"\\"!==n||(a=!a,t)){if(n===s&&!a)break;i+=n,a=!1}}return i}const z=new Map([["#","strong"],["`","code"],["_","u"],["/","i"],["-","del"],[":","span.dim"],[",","sub"],["'","sup"],["$","span.math"]]),Q=new Map([["[","]"],["{","}"]]);let V=null;if("undefined"==typeof window){const xs=await import("../builder/utils/renderer/index.js");V=e=>xs.render(e,"katex")}class Z{constructor(e){this.content=e}count=()=>function(e=""){return 0===e.length?0:U(e).length}(this.content);toHTML=()=>F("text",this.content)}class K{constructor(e,s){const t=z.get(e);if(t.includes(".")){const[e,s]=t.split(".");this.tagName=e,this.className=s}else this.tagName=t;this.content=s,"math"===this.className&&"object"==typeof window&&(globalThis.__ContainsFormula__=!0)}count=()=>ee(this.content);toHTML(){if("math"===this.className&&"undefined"==typeof window){const e=F("img","",{src:"./"+V(this.content)});return F("span",e,{class:"math"})}const e=void 0===this.className?null:{class:this.className};return F(this.tagName,se(this.content),e)}}class X{constructor(e,s){this.content=e,this.address=s}count=()=>0;toHTML(){const e=se(this.content);try{return new URL(this.address),F("a",e,{href:this.address,target:"_blank"})}catch{}if(this.address.startsWith("//"))return F("a",e,{href:this.address.slice(2)});if(this.address.startsWith("/")){return F("a",e,{href:"#"+("static"+this.address)})}let s;s="location"in globalThis?location.hash:globalThis.__ResourcePath__;return F("a",e,{href:r(this.address,s)})}}class Y{constructor(e,s){this.content=e,this.notation=s}count=()=>ee(this.content);toHTML(){const e=F("rp","("),s=F("rp",")"),t=F("rt",this.notation);return F("ruby",se(this.content).concat([e,t,s]),{"data-notation":this.notation})}}function J(e){function s(){const s=e.charAt(0);return e=e.substring(1),s}function t(e){let s;return"["===e?s=X:"{"===e&&(s=Y),s}const i=[];let a="",n="",l="",r=!1,g=!1;for(;e.length;){const h=s();if(z.has(h)){if(r){g?n+="\\"+h:a+=h,r=!1;continue}if(g&&h!=l){n+=h;continue}const t=s();if(t!=h){g?n+=h:a+=h,e=t+e;continue}g?(i.push(new K(h,n)),n="",l=""):(i.push(new Z(a)),a="",l=h),g=!g;continue}if(["[","{"].includes(h)&&!g&&!r){const n=h,l=Q.get(n);i.push(new Z(a)),a="";let r=n;const g=B(e,l,!0);if(null!=g){r+=e.slice(0,g.length+1),e=e.substr(g.length+1);const a=s();if(r+=a,"("===a){const s=B(e,")");if(null!=s){let a=t(n);e=e.substr(s.length+1),i.push(new a(g,s));continue}}}a+=r;continue}if("\\"===h){r=!r;continue}let o;r?(o="\\"+h,r=!1):o=h,g?n+=o:a+=o}return n.length&&i.push(new K(l,n)),a.length&&i.push(new Z(a)),i}function ee(e){return J(e).reduce(((e,s)=>e+s.count()),0)}function se(e){const s=J(e).filter((e=>!(e instanceof Z&&!e.content.length))).map((e=>e.toHTML()));return"object"!=typeof window&&e===s[0]?(e=>e.replaceAll("<","&lt;").replaceAll(">","&gt;"))(e):s}class te{constructor(e){const s=e.split(" "),t=s[0];let i=0;for(const e of t)"#"===e&&(i+=1);i>6&&(i=0);const a=s.slice(1).join(" ");this.tagName="h"+i,this.content=a}toHTML(){const e=void 0===this.id?null:{id:this.id},s=se(this.content);return F(this.tagName,s,e)}static pattern=e=>/^(#+ )/.test(e)}class ie{tagName="p";constructor(e){this.content=e.trimStart()}toHTML(){const e=se(this.content);return F(this.tagName,e)}}class ae{children=[];title="";type=ae.NormalTypeEnum;constructor(e){if(!(e[0]instanceof ie&&ae.alertPattern(e[0].content)))return void(this.children=e);let s;const t=e[0].content,a=B(t.slice(1),"]");switch(a.toLowerCase()){case"note":case"笔记":this.type=ae.NoteTypeEnum,s=i("笔记","Note");break;case"tip":case"提示":this.type=ae.TipTypeEnum,s=i("提示","Tip");break;case"important":case"重要":this.type=ae.ImportantTypeEnum,s=i("重要","Important");break;case"warning":case"注意":this.type=ae.warningTypeEnum,s=i("注意","Warning");break;case"caution":case"警告":this.type=ae.CautionTypeEnum,s=i("警告","Caution")}const n=t.slice(a.length+2).trimStart();this.title=n||s,this.children=e.slice(1)}toHTML(){if(this.type===ae.NormalTypeEnum){return F("blockquote",this.children.map((e=>e.toHTML())))}const e=F("p",this.title,{class:"alert-title"}),s=this.children.map((e=>e.toHTML()));return F("blockquote",[e].concat(s),{class:["alert",this.type.description]})}static pattern=e=>">"===e||e.startsWith("> ");static alertPattern=e=>/^\[(.*)+\].*/.test(e);static NormalTypeEnum=Symbol("normal");static NoteTypeEnum=Symbol("note");static TipTypeEnum=Symbol("tip");static ImportantTypeEnum=Symbol("important");static warningTypeEnum=Symbol("warning");static CautionTypeEnum=Symbol("caution")}class ne{toHTML=()=>F("hr");static pattern=e=>e.match(/(-\s*-\s*-)|(\*\s*\*\s*\*)/)&&!e.match(/[a-zA-Z0-9]/)}class le{children=[];constructor(e){this.isOrdered=le.orderedPattern(e),this.tagName=this.isOrdered?"ol":"ul",this.children=[le.getContent(e,this.isOrdered)]}toHTML(){const e=this.children.map((e=>{if("string"==typeof e){return F("li",se(e))}return e.toHTML()}));return F(this.tagName,e)}static orderedPattern=e=>/^([\s\t]*[0-9]+\. )/.test(e);static unorderedPattern=e=>/^([\s\t]*[+-] )/.test(e);static taskListPattern=e=>/^[\s\t]*- \[( |x|\*)\] /.test(e);static isListPattern=e=>le.orderedPattern(e)||le.unorderedPattern(e);static getContent(e,s){if(s)return e.match(/(?<=^([\s\t]*[0-9]+. )).+$/g)[0];if(this.taskListPattern(e)){const s=e.trimStart();return new re(s.slice(6),s.slice(0,6))}if(this.unorderedPattern(e))return e.match(/(?<=^([\s\t]*[+-]+ )).+$/g)[0];throw new Error("Unexpected list item: "+e)}}class re{constructor(e,s){this.content=e,this.isChecked="x"===s[3]||"*"===s[3]}count(){return ee(this.content)}toHTML(){const e=F("input","",{type:"checkbox",checked:!!this.isChecked||void 0}),s=F("text",this.content);return F("li",[e,s],{class:"task-list-item"})}}class ge{elements=[];push(e){this.elements.push(e)}toHTML(){return F("div",this.elements.map((e=>e.toHTML())),{class:"qa-block"})}}class he{constructor(e){this.content=e.substr(3)}toHTML(){return F("div",se(this.content),{class:"question"})}static pattern=e=>e.startsWith("Q: ")}class oe{constructor(e){this.content=e.substr(3)}toHTML(){return F("div",se(this.content),{class:"answer"})}static pattern=e=>e.startsWith("A: ")}class ce{headerCells=[""];bodyRows=[[""]];constructor(e,s){this.headerCells=e,this.bodyRows=s}#t=e=>F("th",e);#i=e=>F("td",se(e));#a=e=>F("tr",e.map(this.#t));#n=e=>F("tr",e.map(this.#i));toHTML(){const e=F("thead",this.#a(this.headerCells)),s=F("tbody",this.bodyRows.map(this.#n));return F("div",F("table",[e,s]),{class:"table"})}static pattern=e=>e.startsWith("| ")}class ue{source="";description="";constructor(e){e=e.substr(2),this.description=B(e,"]"),e=e.substr(this.description.length+2),this.source=B(e,")")}static containerGenerator(e,s){return F("div",e,{class:["media-container",s??""]})}static patternGenerator(e){return s=>s.startsWith(e+"[")&&s.endsWith(")")}static replaceContentGenerator(e,s){return`${s}<br>${F("a",i("从这里下载！","Download Here!"),{href:e})}`}static srcUrlResolver(e){let s;if(e.startsWith("http")||e.startsWith("data"))s=e;else{s=location.hash.slice(1).split("/").slice(0,-1).join("/")+"/"+e}return s}}class pe extends ue{static pattern=ue.patternGenerator("!");toHTML(){const e=F("img","",{src:ue.srcUrlResolver(this.source),alt:this.description,loading:"lazy",tabindex:0});return e.onclick=e=>window.open(e.target.src),e.onerror=e=>{const s=e.target;s.onclick=null,s.title=this.description,s.classList.add("load-error"),s.parentNode.classList.remove("image")},ue.containerGenerator(e,"image")}}class de extends ue{static pattern=ue.patternGenerator(":");toHTML(){const e=ue.srcUrlResolver(this.source),s=F("audio",ue.replaceContentGenerator(e,this.description),{src:e,controls:!0});return ue.containerGenerator(s)}}class me extends ue{static pattern=ue.patternGenerator("?");toHTML(){const e=ue.srcUrlResolver(this.source),s=F("video",ue.replaceContentGenerator(e,this.description),{src:e,controls:"true"});return ue.containerGenerator(s)}}const be=e=>ue.patternGenerator("@")(e)||e.startsWith("@@@");class je extends ue{toHTML(){const e=ue.srcUrlResolver(this.source),s=F("iframe",this.description,{src:e,title:this.description,sandbox:"allow-same-origin allow-scripts",loading:"lazy"});return ue.containerGenerator(s,"iframe")}}class fe{constructor(e,s){this.lang=s,this.content=e}toHTML(){const e=["plaintext","text",""].includes(this.lang);let s,t;e||globalThis.__LanguageList__.add(this.lang),e?(t="nohighlight",s="PLAINTEXT"):(t=`language-${this.lang}`,s=this.lang.toUpperCase());const i=F("code",this.content,{class:t,tabindex:0});return F("pre",i,{class:"code-block","data-language":s})}static pattern=e=>e.startsWith("```")}class we{summary="";content="";constructor(e,s){this.summary=s,this.content=e}toHTML(){const e=F("summary",se(this.summary)),s=F("details",e),t=F("div",F("div",this.content.map((e=>e.toHTML())),{class:"details-children"}),{class:"details-children-container"});return F("div",[s,t],{class:"details"})}static pattern=e=>e.startsWith(">>>")}class ye{content="";description="";constructor(e,s){this.content=e,this.description=s}toHTML(){return globalThis.__ContainsFormula__=!0,F("div",this.content,{class:"math",title:this.description})}static pattern=e=>e.startsWith("$$$")}class ve{static#l=e=>`<style>\nbody{transition: .3s .15s}\nbody.light{color:#333;background:#fff}\nbody.dark{color:#f7f7f7;background:#252525}</style>\n<script>\nconst rootEl = document.documentElement\nfunction postHeight() {\n    const parent = window.parent\n    const height = parseFloat(getComputedStyle(rootEl).height)\n    parent.postMessage({\n        height,\n        id: "${e}"\n    }, "*")\n}\nwindow.addEventListener("load", postHeight)\nwindow.addEventListener("message", e => {\nconst { fontSize, theme } = e.data\nif (fontSize) {\n    rootEl.style.fontSize = fontSize\n    postHeight()\n}\nif (theme) {\n    document.body.classList = theme\n}\n})\n<\/script>`;constructor(e,s){globalThis.__IframeCounter__+=1,this.id="iframe_"+globalThis.__IframeCounter__,this.description=s,this.content=e+ve.#l(this.id)}toHTML(){const e=F("iframe",this.description,{id:this.id,title:this.description,srcdoc:this.content,sandbox:"allow-scripts"});return ue.containerGenerator(e,"iframe")}}class _e{constructor(e){const s=new Function("let option;"+e+";return option")();this.chartOptions=s,globalThis.__ChartTypeList__.add("echarts")}toHTML(){const e=F("div","",{class:"echarts-container"});return e.__ChartOptions__=this.chartOptions,e}}class Le{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("flow-chart")}toHTML(){const e=F("div","",{class:"flowchart-container"});return e.__ChartContent__=this.content,e}}class Te{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("sequence-chart")}toHTML(){const e=F("div","",{class:"sequencechart-container"});return e.__ChartContent__=this.content,e}}class ke{constructor(e){this.content=new Function(`const tasks = [${e}]; return tasks`)(),globalThis.__ChartTypeList__.add("gantt-chart")}toHTML(){const e=F("div","",{class:"ganttchart-container"});return e.__ChartContent__=this.content,e}}class Ce{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("railroad-chart")}toHTML(){const e=F("div","",{class:"railroad-container"});return e.__ChartContent__=this.content,e}}class xe{constructor(e){this.content=e,globalThis.__ChartTypeList__.add("qrcode")}toHTML(){const e=F("div","",{class:"qrcode-container"});return e.__QRCodeContent__=this.content,e}}class Ee{constructor(e){this.content=e}toHTML(){return F("span",this.content)}}class Se{static pattern=e=>e.startsWith("!!!");#r=null;constructor(e,s){switch(s){case"":case"echarts":this.#r=new _e(e);break;case"flow":case"flowchart":case"flow chart":case"flow-chart":this.#r=new Le(e);break;case"sequence":case"sequencechart":case"sequence char":case"sequence-chart":this.#r=new Te(e);break;case"gantt":case"ganttchart":case"gantt chart":case"gantt-chart":this.#r=new ke(e);break;case"rail":case"railroad":case"railroadchart":case"railroad chart":case"railroad-chart":this.#r=new Ce(e);break;case"qrcode":case"qr-code":case"qr code":this.#r=new xe(e);break;default:const t="Unknown chart type: "+s;console.error(t),this.#r=new Ee(t)}}toHTML(){const e=this.#r.toHTML();return ue.containerGenerator(e)}}function He(e){let s=0,t=0;for(const i of e){if(i.match(/[^\s\t]/))break;"\t"!==i?(" "===i&&(t+=1),2===t&&(t=0,s+=1)):s+=1}return s}function qe(e,s){const t=He(e),i=new le(e);for(;s.length&&le.isListPattern(s[0]);){const e=s.shift(),a=He(e),n=le.orderedPattern(e);if(a>t)i.children.push(qe(e,s));else{if(a!==t||n!==i.isOrdered){s.unshift(e);break}i.children.push(le.getContent(e,n))}}return i}function Me(e,s){let t=e.slice(2)+"\n";for(;s.length;){const e=s.shift();if(!ae.pattern(e)){s.unshift(e);break}t+=e.slice(2)+"\n"}const i=Fe(t);return new ae(i)}function Ie(e){return e.split("|").filter((e=>e.length>0)).map((e=>e.trim()))}function Ae(e,s){const t=e,i=[];for(;s.length;){const e=s.shift();if(!ce.pattern(e)){s.unshift(e);break}i.push(e)}const a=Ie(t),n=i.map(Ie);return new ce(a,n)}function Re(e,s){const t=new ge;for(s.unshift(e);s.length;){const e=s[0],i=he.pattern(e),a=oe.pattern(e);if(i)t.push(new he(e));else{if(!a)break;t.push(new oe(e))}s.shift()}return t}function We(e,s){return function(t,i){const a=t.slice(3);let n="";for(;i.length;){const s=i.shift();if(s===e)break;n+=s+"\n"}return new s(n,a)}}const Ne=We("```",fe),Pe=We("!!!",Se),Oe=We("$$$",ye);function $e(e,s){const t=We(">>>",we)(e,s);return t.content=Fe(t.content),t}function De(e,s){const t=We("@@@",ve);return e.startsWith("@@@")?t(e,s):new je(e)}function Fe(e){const s=function(e){return-1!=e.indexOf("\r")?e.split("\r\n"):e.split("\n")}(e),t=[];for(;s.length;){const e=s.shift();e.length&&(te.pattern(e)?t.push(new te(e)):ne.pattern(e)?t.push(new ne):ae.pattern(e)?t.push(Me(e,s)):le.isListPattern(e)?t.push(qe(e,s)):he.pattern(e)||oe.pattern(e)?t.push(Re(e,s)):ce.pattern(e)?t.push(Ae(e,s)):pe.pattern(e)?t.push(new pe(e)):de.pattern(e)?t.push(new de(e)):me.pattern(e)?t.push(new me(e)):we.pattern(e)?t.push($e(e,s)):ye.pattern(e)?t.push(Oe(e,s)):fe.pattern(e)?t.push(Ne(e,s)):Se.pattern(e)?t.push(Pe(e,s)):be(e)?t.push(De(e,s)):t.push(new ie(e)))}return t}function Ge(e){return function(s){"Enter"!==s.key&&" "!==s.key||e.click()}}const Ue=()=>window.scrollY||document.documentElement.scrollTop,Be=()=>document.documentElement.scrollHeight-document.documentElement.clientHeight;function ze(e){window.scroll({top:e,behavior:"smooth"})}function Qe(e,s){ze(e.offsetTop+-s)}function Ve(){ze(0)}const Ze=i("空文章","Empty Article");function Ke(e,s){globalThis.__LanguageList__=new Set,globalThis.__ChartTypeList__=new Set,globalThis.__ContainsFormula__=!1,globalThis.__IframeCounter__=0;const t=Fe(s);if(l.catalog.enable){const e=function(e){return e.filter((e=>e instanceof te)).map(((e,s)=>({id:e.id="headline-"+s,content:se(e.content),level:e.tagName})))}(t);n.emit("article-rendered",e)}let i=t.map((e=>e.toHTML()));i.length||(i=[F("h1",Ze)]);const r=document.createDocumentFragment();i.forEach((e=>r.appendChild(e))),e.innerHTML="",e.appendChild(r),async function(){const e=Array.from(N()).map((e=>new Promise(((s,t)=>e.onload=s))));await Promise.all(e)}().then(O),e.querySelectorAll("[tabindex='0']").forEach((e=>{e.onkeydown=Ge(e)})),Promise.all([u(globalThis.__LanguageList__),m(globalThis.__ContainsFormula__),W(globalThis.__ChartTypeList__)]).then((()=>{globalThis.__LanguageList__=null,globalThis.__ContainsFormula__=!1,globalThis.__ChartTypeList__=null;const e=sessionStorage.getItem("last-leave-page"),s=sessionStorage.getItem("last-leave-position")||0;if(sessionStorage.removeItem("last-leave-page"),sessionStorage.removeItem("last-leave-position"),Ue()>0)return;if(location.hash!==e)return;const t=Number.parseInt(s);!function(e,s){const t=a((function(){Math.abs(Be()-Ue())<10||s()?window.removeEventListener("scroll",t):e()}),30);window.addEventListener("scroll",t),e()}((()=>ze(t)),(()=>t-Ue()<100))}))}function Xe(e){const s=new Date(e);return(new Intl.DateTimeFormat).format(s)}function Ye(e){const s=F("span",e.title,{class:"underline-target"}),t=F("code",Xe(e.createTime));return F("li",[s,t],{class:"underline-through","data-jumpto":e.link,tabindex:0})}function Je(e){const s=F("span",e.name,{class:"underline-target"}),t=F("code",Xe(e.modifyTime));return F("li",[s,t],{class:"underline-through","data-relative":e.name,tabindex:0})}const es=document.querySelector("main"),ss=document.querySelector("article"),ts=es.querySelector("#article-list"),is=es.querySelector("#directory-description"),as=es.querySelector("#update-time code"),ns=es.querySelector("paging-view");function ls(e,s){const{current:t,total:i,updateTime:a}=e;ns.setPage(t,i),is.innerHTML="","dirDescription"in e&&Ke(is,e.dirDescription),as.textContent=a?Xe(a):"";const n=document.createDocumentFragment();e.content.map(s).forEach((e=>n.appendChild(e))),ts.innerHTML="",ts.appendChild(n),ts.querySelectorAll("[tabindex='0']").forEach((e=>{e.onkeydown=Ge(e)})),ss.innerHTML="",es.classList.remove("hidden"),Ve()}function rs(e,s){return new Promise(((t,i)=>{const a=document.createElement("link");a.rel="prefetch",a.href=e,a.as=s,document.head.appendChild(a),a.onload=t,a.onerror=i}))}const gs=document.querySelector("main"),hs=document.querySelector("#newest-header"),os=document.querySelector("#directory-header"),cs=document.querySelector("article");function us(e=location.hash.slice(1)){return"./.index/"+e.split("/").slice(0,-1).join("+")+"_"+bs.current()}async function ps(e){if(!location.hash)return void ms.homepage();const s=location.hash.slice(1);if(gs.classList.add("disabled"),ms.isIn.newestPage()){const e=await h(us());if(!e)return;hs.classList.remove("hidden"),os.classList.add("hidden"),ls(e,Ye)}else if(ms.isIn.directory()){const e=await h(us());if(!e)return;hs.classList.add("hidden"),os.classList.remove("hidden"),async function(e){const s=location.hash.slice(1),t=[];for(const i of e){if(t.length>=40)break;if(!i.name.endsWith("/"))continue;const e=us(s+i.name);t.push(rs(e,"fetch"))}await Promise.all(t)}(e.content),ls(e,Je)}else if(ms.isIn.article()){cs.innerHTML="";const e=await async function(e){return g&&g.abort(),g=new AbortController,await fetch(e,{signal:g.signal}).then((async e=>{if(200!=e.status)throw e.status;const s=await e.text();return g=null,s})).catch((s=>{if("number"!=typeof s)return console.error(s),null;switch(s){case 404:return"# 404 Not Found";case 500:return"# 500 Internal Server Error";case DOMException:console.error(s);break;default:return console.log("Markdown request error: "+e),console.error(s),"# Unexpected request error"}}))}("./"+s);if(!e)return;gs.classList.add("hidden"),Ke(cs,e)}else ms.homepage();gs.setAttribute("data-is-root","static/"===s),gs.setAttribute("data-is-newest",s.startsWith("newest/")),gs.classList.remove("disabled");const t=e=>new URL(e).hash;e instanceof HashChangeEvent&&ms.isIn.directory(t(e.oldURL))&&ms.isIn.article(t(e.newURL))&&Ve()}window.addEventListener("hashchange",ps),window.addEventListener("load",ps);const ds="static/",ms={homepage(){location.hash=ds},open(e){location.hash+=e},jumpTo(e){location.hash=e},parent(){if(this.isIn.root()||this.isIn.newestPage())return ds;const e=location.hash.slice(1).split("/");if(this.isIn.directory())return e.slice(0,-2).join("/")+"/";if(this.isIn.article())return e.slice(0,-1).join("/")+"/";throw new Error("Unexpected hash: "+location.hash)},isIn:{root:()=>location.hash==="#"+ds,newestPage:()=>"#newest/"===location.hash,directory(e){const s=e||location.hash;return s.startsWith("#static")&&s.endsWith("/")},article(e){const s=e||location.hash;return s.startsWith("#static")&&s.endsWith(".md")}}};const bs=new class{#g=[1];current=()=>this.#g[this.length()-1];next=()=>this.#g[this.length()-1]+=1;prev=()=>this.#g[this.length()-1]-=1;jumpTo=e=>this.#g[this.length()-1]=Number(e);length=()=>this.#g.length;back(){this.#g.pop(),this.#g.length||this.#g.push(1)}open(){this.#g.push(1)}},js=e=>F("button",F("span",e,{class:"underline-target"}),{class:"icon-btn underline-side"});class fs extends HTMLElement{#h={};constructor(){super(),this.#h.input=F("input","1",{type:"number",min:1,max:1}),this.#h.maxPage=F("span","1");const e=this.#h.prevBtn=js(i("上一页","Prev")),s=this.#h.nextBtn=js(i("下一页","Next"));e.id="prev-btn",e.classList.add("left"),s.id="next-btn",s.classList.add("right");const t=F("label",[this.#h.input,F("text","/"),this.#h.maxPage]);this.#o();for(const i of[e,t,s])this.appendChild(i)}#o(){this.#h.input.addEventListener("keydown",(e=>{if("Enter"!==e.key)return;const s=e.target.value;if(!/^\d+$/.test(s))return void(e.target.value=1);const t=Number(s);t>0&&t<=this.#h.input.max?(bs.jumpTo(t),ps()):e.target.value=1})),this.#h.prevBtn.addEventListener("click",(()=>{bs.current()>0&&(bs.prev(),ps())})),this.#h.nextBtn.addEventListener("click",(()=>{bs.current()<this.#h.input.max&&(bs.next(),ps())}))}setPage(e,s){let t=!1,i=!1,a=!1;1===s?a=!0:(1===e&&(t=!0),e===s&&(i=!0)),this.#h.prevBtn.disabled=a||t,this.#h.nextBtn.disabled=a||i,this.#h.maxPage.textContent=s,this.#h.input.value=e,this.#h.input.max=s,this.classList.toggle("hidden",a)}}customElements.define("paging-view",fs);const ws=document.querySelector("main"),ys=ws.querySelector("#newest"),vs=ws.querySelector("#previous-dir"),_s=ws.querySelector("#article-list");ys.onkeydown=Ge(ys),vs.onkeydown=Ge(vs),vs.addEventListener("click",(()=>{bs.back(),ms.jumpTo(ms.parent())})),_s.addEventListener("click",(e=>{const s=e.target;if(s===_s)return;const t=s.getAttribute("data-relative"),i=s.getAttribute("data-jumpto");t&&(t.endsWith("/")&&bs.open(),ms.open(t)),i&&(bs.open(),ms.jumpTo(i))}));class Ls{ws=null;wsServerURL="ws://"+location.host;isConnected=!1;retryCount=0;retryInterval=Ls.defaultRetryInterval;connect(){if(!Ls.isAbleToConnect)return;const e=this.ws=new WebSocket(this.wsServerURL);e.addEventListener("open",(()=>{this.retryCount=0,this.retryInterval=Ls.defaultRetryInterval,this.isConnected=!0,console.log("[LiveReload] WebSocket connected.")})),e.addEventListener("message",(e=>{console.log("[LiveReload] WebSocket signal received: ",e),"refresh"===e.data&&location.reload()})),e.addEventListener("error",(e=>{console.error("[LiveReload] WebSocket error occurred:",e),this.close()})),e.addEventListener("close",(e=>{console.warn("[LiveReload] WebSocket connection closed."),this.close(),1e3!==e.code&&this.reconnect()}))}reconnect(){this.isConnected||(this.retryCount>10&&this.retryCount<=20?this.retryInterval=2*Ls.defaultRetryInterval:this.retryCount>20?this.retryInterval=4*Ls.defaultRetryInterval:this.retryInterval=Ls.defaultRetryInterval,setTimeout((()=>{this.retryCount+=1,this.connect()}),this.retryInterval))}close(){this.isConnected=!1,this.ws&&this.ws.close(),this.ws=null}static isAbleToConnect=function(){const e=location.hostname;return"localhost"===e||"127.0.0.1"===e||e.startsWith("192.168.")}()&&"WebSocket"in window;static defaultRetryInterval=1e3}if(o("dist/chunks/skeleton.min.css"),l.fab.enable&&import("./chunks/fab.min.js"),l.search.enable&&import("./chunks/searchBox.min.js"),l.catalog.enable){function Es(){Hs&&n.emit("article-rendered",qs)}let Ss=!1,Hs=!1,qs=null;import("./chunks/catalog.min.js").then((()=>Ss=!0)).then(Es),n.on("article-rendered",(e=>{Ss||(Hs=!0,qs=e)}))}const Ts=document.getElementById("search-btn"),ks=document.getElementById("light-btn"),Cs=document.getElementById("dark-btn");Ts.onclick=()=>n.emit("searchbox-show"),ks.onkeydown=Ge(ks),Cs.onkeydown=Ge(Cs),window.addEventListener("popstate",(()=>{location.hash.endsWith("/")&&bs.back()})),window.addEventListener("beforeunload",(e=>{ms.isIn.article()&&(sessionStorage.setItem("last-leave-page",location.hash),sessionStorage.setItem("last-leave-position",window.scrollY))}));new MutationObserver(O).observe(document.body,{attributes:!0,attributeFilter:["class"]}),window.addEventListener("message",(e=>{if("null"!=e.origin)return;const{id:s,height:t}=e.data;document.getElementById(s).style.height=t+"px"}));(new Ls).connect(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").catch((function(e){console.error("Registration failed with "+e)}));export{Ve as a,Qe as b,F as e,o as i,Ge as k,ms as p,P as s,U as t};
//# sourceMappingURL=index.min.js.map
