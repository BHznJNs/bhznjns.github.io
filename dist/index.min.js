async function t(t){return await fetch(t).then((t=>t.json())).catch((s=>{console.log("JSON request error: "+t),console.error(s)}))}function s(t){return function(s){"Enter"!=s.key&&" "!=s.key||t.click()}}var e=(t,s,e)=>`<${t}${e?" "+function(t){const s=[];for(const[e,n]of Object.entries(t))s.push(`${e}="${n.toString()}"`);return s.join(" ")}(e):""}>${s}</${t}>`;const n=["#","`","_","/","-",":",",","'","$"],i=new Map([["##","strong"],["``","code"],["__","u"],["//","i"],["--","del"],["::","span.dim"],[",,","sub"],["''","sup"],["$$","span.math"]]);class a{constructor(t,s){this.type=t,this.content=s}static key=Symbol("key");static link=Symbol("link");static text=Symbol("text")}class r extends a{constructor(t,s){super(),this.type=a.link,this.content=t,this.address=s}toHTML(){if(this.address.startsWith("http"))return`<a href="${this.address}" target="_blank">${this.content}</a>`;return`<a href="#${"static/"+this.address}">${this.content}</a>`}}function l(t,s){let e="",n=!1;for(;t.length;){const i=t.slice(0,1);if(t=t.substr(1),"\\"!=i){if(i==s&&!n)break;e+=i,n=!1}else n=!n}return e}function h(t){const s=function(t){let s="",n="",r="";for(const l of t)switch(l.type){case a.key:if(n.length&&l.content==n){const t=i.get(n);if(t.includes(".")){const[i,a]=t.split(".");"$$"==n&&(globalThis.__ContainsFormula__=!0),s+=e(i,r,{class:a})}else s+=e(t,r);n="",r=""}else n=l.content;break;case a.text:n.length?r=l.content:s+=l.content;break;case a.link:s+=l.toHTML()}return s}(function(t){const s=[];let e="",i="",h=!1;for(;t.length;){const o=t.slice(0,1);if(t=t.substr(1),"["!=o||h)if(n.includes(o)&&!h)i.length&&i==o?(s.push(new a(a.text,e)),s.push(new a(a.key,i+o)),i="",e=""):i=o;else{if("\\"==o){h=!h;continue}i.length&&(e+=i,i=""),h=!1,e+=o}else{s.push(new a(a.text,e)),e="";const n=l(t,"]");let i=(t=t.substr(n.length+1)).slice(0,1);if(t=t.substr(1),"("==i&&!h){const e=l(t,")");t=t.substr(e.length+1),s.push(new r(n,e))}}}return e.length&&s.push(new a(a.text,e)),i.length&&s.push(new a(a.text,i)),s}(t));return s}class o{tagName="";content="";toHTML(){const t=h(this.content);return e(this.tagName,t)}}class c extends o{constructor(t){super();const s=t.split(" "),e=s[0];let n=0;for(const t of e)"#"==t&&(n+=1);n>6&&(n=0),this.tagName="h"+n,this.content=s.slice(1).join(" ")}static pattern=t=>t.match(/^(#+ )/)}class u extends o{tagName="p";constructor(t){super(),this.content=t.trimStart()}}class g extends o{tagName="blockquote";children=[];constructor(t){super(),this.children=t}toHTML(){const t=this.children.map((t=>t.toHTML())).join("");return e(this.tagName,t)}static pattern=t=>t.startsWith("> ")}class m extends o{toHTML=()=>"<hr>";static pattern=t=>t.match(/(-\s*-\s*-)|(\*\s*\*\s*\*)/)&&!t.match(/[a-zA-Z0-9]/)}class p extends o{children=[];constructor(t){super(),this.isOrdered=Boolean(p.orderedPattern(t)),this.tagName=this.isOrdered?"ol":"ul",this.children=[p.getContent(t,this.isOrdered)]}push=t=>this.children.push(t);toHTML(){const t=[];for(const s of this.children)if("string"==typeof s){const e=h(s);t.push(`<li>${e}</li>`)}else t.push(s.toHTML());const s=t.join("");return e(this.tagName,s)}static unorderedPattern=t=>Boolean(t.match(/^([\s\t]*[+-]+ )/));static orderedPattern=t=>Boolean(t.match(/^([\s\t]*[0-9]+. )/));static isListPattern=t=>p.orderedPattern(t)||p.unorderedPattern(t);static getContent(t,s){return s?t.match(/(?<=^([\s\t]*[0-9]+. )).+$/g)[0]:t.match(/(?<=^([\s\t]*[+-]+ )).+$/g)[0]}}class d extends o{headerCells=[""];bodyRows=[[""]];constructor(t,s){super(),this.headerCells=t,this.bodyRows=s}#t=t=>e("th",t);#s=t=>e("td",h(t));#e=t=>e("tr",t.map(this.#t).join(""));#n=t=>e("tr",t.map(this.#s).join(""));toHTML(){const t=e("thead",this.#e(this.headerCells)),s=e("tbody",this.bodyRows.map(this.#n).join(""));return e("table",t+s)}static pattern=t=>t.startsWith("| ")}class j extends o{constructor(t,s){super(),this.lang=s,this.content=t.replaceAll("<","&lt;").replaceAll(">","&gt;")}append(t){this.content+=t}toHTML(){"object"==typeof window&&globalThis.__LanguageList__.add(this.lang);const t=e("code",this.content,{class:`language-${this.lang}`,"data-language":this.lang.toUpperCase()});return e("pre",t)}static pattern=t=>t.startsWith("```")}class b extends o{constructor(t){super();const s=l(t=t.substr(2),"]"),e=l(t=t.substr(s.length+2),")");this.alt=s,this.address=e}toHTML(){let t;if(this.address.startsWith("http"))t=this.address;else if("location"in globalThis){t=location.hash.slice(1).split("/").slice(0,-1).join("/")+"/"+this.address}else{t=globalThis.__ResourcePath__+"/"+this.address}return`<div class="img"><img src="${t}" alt="${this.alt}" loading="lazy" tabindex="0"></div>`}static pattern=t=>t.startsWith("![")&&t.endsWith(")")}class k extends o{tagName="div";content="";constructor(t){super(),this.content=t,globalThis.__ContainsFormula__=!0}toHTML=()=>e(this.tagName,this.content,{class:"math"});static pattern=t=>t.startsWith("$$$")}function f(t,s){const e=t.slice(3);let n="";for(;s.length;){const t=s.shift();if("```"==t)break;n+=t+"\n"}return new j(n,e)}function _(t){let s=0,e=0;for(const n of t){if(n.match(/[^\s\t]/))break;"\t"!=n?(" "==n&&(e+=1),2==e&&(e=0,s+=1)):s+=1}return s}function y(t,s){const e=_(t),n=new p(t);for(;s.length&&p.isListPattern(s[0]);){const t=s.shift(),i=_(t),a=p.orderedPattern(t);if(i>e)n.push(y(t,s));else{if(i!=e||a!=n.isOrdered){s.unshift(t);break}n.push(p.getContent(t,a))}}return n}function w(t,s){let e=t.slice(2)+"\n";for(;s.length;){const t=s.shift();if(!g.pattern(t)){s.unshift(t);break}e+=t.slice(2)+"\n"}const n=v(e);return new g(n)}function x(t){return t.split("|").filter((t=>t.length>0)).map((t=>t.trim()))}function T(t,s){const e=t,n=[];for(;s.length;){const t=s.shift();if(!d.pattern(t)){s.unshift(t);break}n.push(t)}const i=x(e),a=n.map(x);return new d(i,a)}function L(t,s){let e="";for(;s.length;){const t=s.shift();if("$$$"==t)break;e+=t+"\n"}return new k(e)}function v(t){const s=function(t){return-1!=t.indexOf("\r")?t.split("\r\n"):t.split("\n")}(t),e=[];for(;s.length;){const t=s.shift();0!=t.length&&(c.pattern(t)?e.push(new c(t)):b.pattern(t)?e.push(new b(t)):m.pattern(t)?e.push(new m):g.pattern(t)?e.push(w(t,s)):p.isListPattern(t)?e.push(y(t,s)):j.pattern(t)?e.push(f(t,s)):d.pattern(t)?e.push(T(t,s)):k.pattern(t)?e.push(L(0,s)):e.push(new u(t)))}return e}let $=null,C=null;async function P(){function t(){const t=Array.from(globalThis.__LanguageList__),s=t.filter((t=>!$.getLanguage(t))).map((t=>function(t){switch(t){case"../libs/highlight-es/languages/armasm.js":return import("./chunks/armasm.min.js");case"../libs/highlight-es/languages/asciidoc.js":return import("./chunks/asciidoc.min.js");case"../libs/highlight-es/languages/bash.js":return import("./chunks/bash.min.js");case"../libs/highlight-es/languages/c.js":return import("./chunks/c.min.js");case"../libs/highlight-es/languages/clojure.js":return import("./chunks/clojure.min.js");case"../libs/highlight-es/languages/cmake.js":return import("./chunks/cmake.min.js");case"../libs/highlight-es/languages/cos.js":return import("./chunks/cos.min.js");case"../libs/highlight-es/languages/cpp.js":return import("./chunks/cpp.min.js");case"../libs/highlight-es/languages/csharp.js":return import("./chunks/csharp.min.js");case"../libs/highlight-es/languages/css.js":return import("./chunks/css.min.js");case"../libs/highlight-es/languages/dart.js":return import("./chunks/dart.min.js");case"../libs/highlight-es/languages/django.js":return import("./chunks/django.min.js");case"../libs/highlight-es/languages/dockerfile.js":return import("./chunks/dockerfile.min.js");case"../libs/highlight-es/languages/elixir.js":return import("./chunks/elixir.min.js");case"../libs/highlight-es/languages/erlang.js":return import("./chunks/erlang.min.js");case"../libs/highlight-es/languages/excel.js":return import("./chunks/excel.min.js");case"../libs/highlight-es/languages/go.js":return import("./chunks/go.min.js");case"../libs/highlight-es/languages/gradle.js":return import("./chunks/gradle.min.js");case"../libs/highlight-es/languages/groovy.js":return import("./chunks/groovy.min.js");case"../libs/highlight-es/languages/haml.js":return import("./chunks/haml.min.js");case"../libs/highlight-es/languages/haskell.js":return import("./chunks/haskell.min.js");case"../libs/highlight-es/languages/http.js":return import("./chunks/http.min.js");case"../libs/highlight-es/languages/ini.js":return import("./chunks/ini.min.js");case"../libs/highlight-es/languages/java.js":return import("./chunks/java.min.js");case"../libs/highlight-es/languages/javascript.js":return import("./chunks/javascript.min.js").then((function(t){return t.b}));case"../libs/highlight-es/languages/json.js":return import("./chunks/json.min.js");case"../libs/highlight-es/languages/julia.js":return import("./chunks/julia.min.js");case"../libs/highlight-es/languages/kotlin.js":return import("./chunks/kotlin.min.js");case"../libs/highlight-es/languages/latex.js":return import("./chunks/latex.min.js");case"../libs/highlight-es/languages/less.js":return import("./chunks/less.min.js");case"../libs/highlight-es/languages/lisp.js":return import("./chunks/lisp.min.js");case"../libs/highlight-es/languages/llvm.js":return import("./chunks/llvm.min.js");case"../libs/highlight-es/languages/lua.js":return import("./chunks/lua.min.js");case"../libs/highlight-es/languages/makefile.js":return import("./chunks/makefile.min.js");case"../libs/highlight-es/languages/markdown.js":return import("./chunks/markdown.min.js");case"../libs/highlight-es/languages/mathematica.js":return import("./chunks/mathematica.min.js");case"../libs/highlight-es/languages/matlab.js":return import("./chunks/matlab.min.js");case"../libs/highlight-es/languages/nginx.js":return import("./chunks/nginx.min.js");case"../libs/highlight-es/languages/nim.js":return import("./chunks/nim.min.js");case"../libs/highlight-es/languages/nix.js":return import("./chunks/nix.min.js");case"../libs/highlight-es/languages/objectivec.js":return import("./chunks/objectivec.min.js");case"../libs/highlight-es/languages/ocaml.js":return import("./chunks/ocaml.min.js");case"../libs/highlight-es/languages/perl.js":return import("./chunks/perl.min.js");case"../libs/highlight-es/languages/php.js":return import("./chunks/php.min.js");case"../libs/highlight-es/languages/powershell.js":return import("./chunks/powershell.min.js");case"../libs/highlight-es/languages/python.js":return import("./chunks/python.min.js");case"../libs/highlight-es/languages/ruby.js":return import("./chunks/ruby.min.js");case"../libs/highlight-es/languages/rust.js":return import("./chunks/rust.min.js");case"../libs/highlight-es/languages/scala.js":return import("./chunks/scala.min.js");case"../libs/highlight-es/languages/scss.js":return import("./chunks/scss.min.js");case"../libs/highlight-es/languages/shell.js":return import("./chunks/shell.min.js");case"../libs/highlight-es/languages/sql.js":return import("./chunks/sql.min.js");case"../libs/highlight-es/languages/stata.js":return import("./chunks/stata.min.js");case"../libs/highlight-es/languages/stylus.js":return import("./chunks/stylus.min.js");case"../libs/highlight-es/languages/swift.js":return import("./chunks/swift.min.js");case"../libs/highlight-es/languages/toml.js":return import("./chunks/toml.min.js");case"../libs/highlight-es/languages/typescript.js":return import("./chunks/typescript.min.js");case"../libs/highlight-es/languages/vim.js":return import("./chunks/vim.min.js");case"../libs/highlight-es/languages/wasm.js":return import("./chunks/wasm.min.js");case"../libs/highlight-es/languages/x86asm.js":return import("./chunks/x86asm.min.js");case"../libs/highlight-es/languages/xml.js":return import("./chunks/xml.min.js");case"../libs/highlight-es/languages/xquery.js":return import("./chunks/xquery.min.js");case"../libs/highlight-es/languages/yaml.js":return import("./chunks/yaml.min.js");default:return new Promise((function(s,e){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(e.bind(null,new Error("Unknown variable dynamic import: "+t)))}))}}(`../libs/highlight-es/languages/${t.toLowerCase()}.js`)));Promise.all(s).then((s=>s.forEach(((s,e)=>{const n=t[e],i=s.default;$.registerLanguage(n,i)})))).then((()=>$.highlightAll())).catch((t=>console.error(t)))}0!=globalThis.__LanguageList__.size&&($?t():await import("./chunks/highlight.min.js").then((t=>$=t.default)).then(t).catch((t=>console.error(t))))}const q=document.querySelector("article"),M=document.querySelector("main"),H=M.querySelector("#previous-dir li"),S=M.querySelector("#article-list");function A(t){globalThis.__LanguageList__=new Set,globalThis.__ContainsFormula__=!1;let e=t.map((t=>t.toHTML())).join("");e.length||(e="<h1>空文章</h1>"),M.style.display="none",q.style.display="block",q.innerHTML=e,q.querySelectorAll("[tabindex='0']").forEach((t=>{t.onkeydown=s(t)})),P().then((()=>globalThis.__LanguageList__=null)),async function(){function t(){document.querySelectorAll(".math").forEach((t=>C.render(t.textContent,t)))}if(!globalThis.__ContainsFormula__)return;if(C)return void t();const s=[import("./chunks/katex.min.js"),fetch("dist/katex.min.css")];await Promise.all(s).then((([s,e])=>(C=s.default,t(),e.text()))).then((t=>{const s=document.createElement("style");s.textContent=t,document.head.appendChild(s)})).catch((t=>console.error(t)))}().then((()=>globalThis.__ContainsFormula__=!1))}function E(t,e){const{current:n,total:i}=t;let a=!1,r=!1,l=!1;1==i?l=!0:(1==n&&(a=!0),n==i&&(r=!0)),M.setAttribute("data-is-first-page",a),M.setAttribute("data-is-last-page",r),M.setAttribute("data-is-only-page",l),S.innerHTML=t.content.map(e).join(""),S.querySelectorAll("[tabindex='0']").forEach((t=>{t.onkeydown=s(t)})),q.style.display="none",M.style.display="block"}q.addEventListener("click",(t=>{const s=t.target;"IMG"==s.tagName&&window.open(s.src)})),H.addEventListener("click",(()=>{const t=location.hash.split("/");globalThis.__CurrentPage__=1,location.hash=t.slice(0,-2).join("/")+"/"})),S.addEventListener("click",(t=>{const s=t.target;s.getAttribute("data-target-blog")?(globalThis.__CurrentPage__=1,location.hash=s.getAttribute("data-target-blog")):(s.innerText.endsWith("/")&&(globalThis.__CurrentPage__=1),location.hash+=s.innerText)})),globalThis.__CurrentPage__=1;const W="./.index/",N=document.querySelector("#light-btn"),R=document.querySelector("#dark-btn"),B=document.querySelector("button#previous"),O=document.querySelector("button#next");N.onkeydown=s(N),R.onkeydown=s(R),B.addEventListener("click",(()=>{globalThis.__CurrentPage__>0&&(globalThis.__CurrentPage__-=1,I())})),O.addEventListener("click",(()=>{globalThis.__CurrentPage__+=1,I()}));const F=document.querySelector("main"),z=document.getElementById("article-list");async function I(){if(!location.hash)return void(location.hash="static/");const s=location.hash.slice(1);if(z.classList.add("disabled"),"newest/"==s){E(await t(W+"newest_"+globalThis.__CurrentPage__),(t=>{const s=e("code",t.date),n=e("span",t.title);return e("li",`${s}: ${n}`,{tabindex:0,"data-target-blog":t.link})}))}else if(s.startsWith("static")&&s.endsWith("/")){const n=s.split("/").slice(0,-1),i=W+n.join("+")+"_"+globalThis.__CurrentPage__;E(await t(i),(t=>e("li",e("span",t),{tabindex:0})))}else{if(!s.startsWith("static")||!s.endsWith(".md"))return void(location.hash="static/");A(v(await async function(t){return await fetch(t).then((t=>t.body)).then((async t=>{const s=t.getReader(),e=new TextDecoder("utf-8");let n="";const i=t=>t.done?n:(n+=e.decode(t.value,{stream:!0}),s.read().then(i)),a=await s.read();return i(a)})).catch((s=>{console.log("Markdown request error: "+t),console.error(s)}))}("./"+s)))}F.setAttribute("data-is-root","static/"==s),z.classList.remove("disabled")}window.onload=I,window.addEventListener("hashchange",I);
//# sourceMappingURL=index.map
